import{A as qt,a as cn,c as Nt,b as Sc,y as $c,R as Pn,d as _n,S as Cc,_ as Ac,h as kc,m as Dc,K as Ri,r as Mc,C as Lo,U as Tc,V as Ic,X as Pc,e as Gc,g as zc,Y as Vo,j as w,f as X,G as Se,z as de,B as Me,q as Rc,Z as Oc}from"./index-f9942fbd.js";import{r as y,a as Lc,R as Zn}from"./index-f15177ee.js";import{E as Vc,a as Hc,p as Ho,b as Pe,h as Bc,i as Fc,f as Ne,I as Oi,c as Uc,H as qc}from"./autosize-text-area-0b51e74b.js";import{c as Wc,S as Bo}from"./stack-efa65be7.js";import{g as ii}from"./_commonjsHelpers-de833af9.js";import{d as Yc,S as Kc}from"./libs-5f276d5d.js";import{I as Xc,C as jc,a as Jn,s as be,F as kt,S as ve,E as Zc,b as Jc,T as Qc,D as eu}from"./dt-70cff9b5.js";import{_ as Wt,a as Ar}from"./extends-0ea0fc03.js";import{v as Gt}from"./v4-a960c1f4.js";import{E as tu}from"./expression-4871a0b8.js";import{_ as nu}from"./iframe-e78b534e.js";var ru={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908 640H804V488c0-4.4-3.6-8-8-8H548v-96h108c8.8 0 16-7.2 16-16V80c0-8.8-7.2-16-16-16H368c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h108v96H228c-4.4 0-8 3.6-8 8v152H116c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16H292v-88h440v88H620c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16zm-564 76v168H176V716h168zm84-408V140h168v168H428zm420 576H680V716h168v168z"}}]},name:"apartment",theme:"outlined"};const iu=ru;var ou=function(t,n){return y.createElement(qt,Wt({},t,{ref:n,icon:iu}))};const su=y.forwardRef(ou);var au={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"}}]},name:"arrow-right",theme:"outlined"};const cu=au;var uu=function(t,n){return y.createElement(qt,Wt({},t,{ref:n,icon:cu}))};const Vn=y.forwardRef(uu);var lu={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M516 673c0 4.4 3.4 8 7.5 8h185c4.1 0 7.5-3.6 7.5-8v-48c0-4.4-3.4-8-7.5-8h-185c-4.1 0-7.5 3.6-7.5 8v48zm-194.9 6.1l192-161c3.8-3.2 3.8-9.1 0-12.3l-192-160.9A7.95 7.95 0 00308 351v62.7c0 2.4 1 4.6 2.9 6.1L420.7 512l-109.8 92.2a8.1 8.1 0 00-2.9 6.1V673c0 6.8 7.9 10.5 13.1 6.1zM880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"code",theme:"outlined"};const du=lu;var fu=function(t,n){return y.createElement(qt,Wt({},t,{ref:n,icon:du}))};const Fo=y.forwardRef(fu);var hu={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M841 370c3-3.3 2.7-8.3-.6-11.3a8.24 8.24 0 00-5.3-2.1h-72.6c-2.4 0-4.6 1-6.1 2.8L633.5 504.6a7.96 7.96 0 01-13.4-1.9l-63.5-141.3a7.9 7.9 0 00-7.3-4.7H380.7l.9-4.7 8-42.3c10.5-55.4 38-81.4 85.8-81.4 18.6 0 35.5 1.7 48.8 4.7l14.1-66.8c-22.6-4.7-35.2-6.1-54.9-6.1-103.3 0-156.4 44.3-175.9 147.3l-9.4 49.4h-97.6c-3.8 0-7.1 2.7-7.8 6.4L181.9 415a8.07 8.07 0 007.8 9.7H284l-89 429.9a8.07 8.07 0 007.8 9.7H269c3.8 0 7.1-2.7 7.8-6.4l89.7-433.1h135.8l68.2 139.1c1.4 2.9 1 6.4-1.2 8.8l-180.6 203c-2.9 3.3-2.6 8.4.7 11.3 1.5 1.3 3.4 2 5.3 2h72.7c2.4 0 4.6-1 6.1-2.8l123.7-146.7c2.8-3.4 7.9-3.8 11.3-1 .9.8 1.6 1.7 2.1 2.8L676.4 784c1.3 2.8 4.1 4.7 7.3 4.7h64.6a8.02 8.02 0 007.2-11.5l-95.2-198.9c-1.4-2.9-.9-6.4 1.3-8.8L841 370z"}}]},name:"function",theme:"outlined"};const pu=hu;var gu=function(t,n){return y.createElement(qt,Wt({},t,{ref:n,icon:pu}))};const Uo=y.forwardRef(gu);var yu={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M843.5 737.4c-12.4-75.2-79.2-129.1-155.3-125.4S550.9 676 546 752c-153.5-4.8-208-40.7-199.1-113.7 3.3-27.3 19.8-41.9 50.1-49 18.4-4.3 38.8-4.9 57.3-3.2 1.7.2 3.5.3 5.2.5 11.3 2.7 22.8 5 34.3 6.8 34.1 5.6 68.8 8.4 101.8 6.6 92.8-5 156-45.9 159.2-132.7 3.1-84.1-54.7-143.7-147.9-183.6-29.9-12.8-61.6-22.7-93.3-30.2-14.3-3.4-26.3-5.7-35.2-7.2-7.9-75.9-71.5-133.8-147.8-134.4-76.3-.6-140.9 56.1-150.1 131.9s40 146.3 114.2 163.9c74.2 17.6 149.9-23.3 175.7-95.1 9.4 1.7 18.7 3.6 28 5.8 28.2 6.6 56.4 15.4 82.4 26.6 70.7 30.2 109.3 70.1 107.5 119.9-1.6 44.6-33.6 65.2-96.2 68.6-27.5 1.5-57.6-.9-87.3-5.8-8.3-1.4-15.9-2.8-22.6-4.3-3.9-.8-6.6-1.5-7.8-1.8l-3.1-.6c-2.2-.3-5.9-.8-10.7-1.3-25-2.3-52.1-1.5-78.5 4.6-55.2 12.9-93.9 47.2-101.1 105.8-15.7 126.2 78.6 184.7 276 188.9 29.1 70.4 106.4 107.9 179.6 87 73.3-20.9 119.3-93.4 106.9-168.6zM329.1 345.2a83.3 83.3 0 11.01-166.61 83.3 83.3 0 01-.01 166.61zM695.6 845a83.3 83.3 0 11.01-166.61A83.3 83.3 0 01695.6 845z"}}]},name:"node-index",theme:"outlined"};const mu=yu;var wu=function(t,n){return y.createElement(qt,Wt({},t,{ref:n,icon:mu}))};const bu=y.forwardRef(wu);var vu={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"};const xu=vu;var _u=function(t,n){return y.createElement(qt,Wt({},t,{ref:n,icon:xu}))};const qo=y.forwardRef(_u);var Wo=y.forwardRef(function(e,t){var n=e.prefixCls,r=e.style,i=e.className,o=e.duration,s=o===void 0?4.5:o,a=e.eventKey,u=e.content,c=e.closable,l=e.closeIcon,d=l===void 0?"x":l,f=e.props,h=e.onClick,p=e.onNoticeClose,g=e.times,v=y.useState(!1),m=cn(v,2),N=m[0],$=m[1],x=function(){p(a)},k=function(I){(I.key==="Enter"||I.code==="Enter"||I.keyCode===$c.ENTER)&&x()};y.useEffect(function(){if(!N&&s>0){var C=setTimeout(function(){x()},s*1e3);return function(){clearTimeout(C)}}},[s,N,g]);var E="".concat(n,"-notice");return y.createElement("div",Ar({},f,{ref:t,className:Nt(E,i,Sc({},"".concat(E,"-closable"),c)),style:r,onMouseEnter:function(){$(!0)},onMouseLeave:function(){$(!1)},onClick:h}),y.createElement("div",{className:"".concat(E,"-content")},u),c&&y.createElement("a",{tabIndex:0,className:"".concat(E,"-close"),onKeyDown:k,onClick:function(I){I.preventDefault(),I.stopPropagation(),x()}},d))}),Nu=y.forwardRef(function(e,t){var n=e.prefixCls,r=n===void 0?"rc-notification":n,i=e.container,o=e.motion,s=e.maxCount,a=e.className,u=e.style,c=e.onAllRemoved,l=y.useState([]),d=cn(l,2),f=d[0],h=d[1],p=function(C){var I,G=f.find(function(H){return H.key===C});G==null||(I=G.onClose)===null||I===void 0||I.call(G),h(function(H){return H.filter(function(z){return z.key!==C})})};y.useImperativeHandle(t,function(){return{open:function(C){h(function(I){var G=Pn(I),H=G.findIndex(function(M){return M.key===C.key}),z=_n({},C);if(H>=0){var V;z.times=(((V=I[H])===null||V===void 0?void 0:V.times)||0)+1,G[H]=z}else z.times=0,G.push(z);return s>0&&G.length>s&&(G=G.slice(-s)),G})},close:function(C){p(C)},destroy:function(){h([])}}});var g=y.useState({}),v=cn(g,2),m=v[0],N=v[1];y.useEffect(function(){var E={};f.forEach(function(C){var I=C.placement,G=I===void 0?"topRight":I;G&&(E[G]=E[G]||[],E[G].push(C))}),Object.keys(m).forEach(function(C){E[C]=E[C]||[]}),N(E)},[f]);var $=function(C){N(function(I){var G=_n({},I),H=G[C]||[];return H.length||delete G[C],G})},x=y.useRef(!1);if(y.useEffect(function(){Object.keys(m).length>0?x.current=!0:x.current&&(c==null||c(),x.current=!1)},[m]),!i)return null;var k=Object.keys(m);return Lc.createPortal(y.createElement(y.Fragment,null,k.map(function(E){var C=m[E],I=C.map(function(H){return{config:H,key:H.key}}),G=typeof o=="function"?o(E):o;return y.createElement(Cc,Ar({key:E,className:Nt(r,"".concat(r,"-").concat(E),a==null?void 0:a(E)),style:u==null?void 0:u(E),keys:I,motionAppear:!0},G,{onAllRemoved:function(){$(E)}}),function(H,z){var V=H.config,M=H.className,b=H.style,D=V.key,S=V.times,P=V.className,R=V.style;return y.createElement(Wo,Ar({},V,{ref:z,prefixCls:r,className:Nt(M,P),style:_n(_n({},b),R),times:S,key:D,eventKey:D,onNoticeClose:p}))})})),i)}),Eu=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved"],Su=function(){return document.body},Li=0;function $u(){for(var e={},t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach(function(i){i&&Object.keys(i).forEach(function(o){var s=i[o];s!==void 0&&(e[o]=s)})}),e}function Cu(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.getContainer,n=t===void 0?Su:t,r=e.motion,i=e.prefixCls,o=e.maxCount,s=e.className,a=e.style,u=e.onAllRemoved,c=Ac(e,Eu),l=y.useState(),d=cn(l,2),f=d[0],h=d[1],p=y.useRef(),g=y.createElement(Nu,{container:f,ref:p,prefixCls:i,motion:r,maxCount:o,className:s,style:a,onAllRemoved:u}),v=y.useState([]),m=cn(v,2),N=m[0],$=m[1],x=y.useMemo(function(){return{open:function(E){var C=$u(c,E);(C.key===null||C.key===void 0)&&(C.key="rc-notification-".concat(Li),Li+=1),$(function(I){return[].concat(Pn(I),[{type:"open",config:C}])})},close:function(E){$(function(C){return[].concat(Pn(C),[{type:"close",key:E}])})},destroy:function(){$(function(E){return[].concat(Pn(E),[{type:"destroy"}])})}}},[]);return y.useEffect(function(){h(n())}),y.useEffect(function(){p.current&&N.length&&(N.forEach(function(k){switch(k.type){case"open":p.current.open(k.config);break;case"close":p.current.close(k.key);break;case"destroy":p.current.destroy();break}}),$([]))},[N]),[x,g]}const Au=e=>{const{componentCls:t,iconCls:n,boxShadow:r,colorText:i,colorSuccess:o,colorError:s,colorWarning:a,colorInfo:u,fontSizeLG:c,motionEaseInOutCirc:l,motionDurationSlow:d,marginXS:f,paddingXS:h,borderRadiusLG:p,zIndexPopup:g,contentPadding:v,contentBg:m}=e,N=`${t}-notice`,$=new Ri("MessageMoveIn",{"0%":{padding:0,transform:"translateY(-100%)",opacity:0},"100%":{padding:h,transform:"translateY(0)",opacity:1}}),x=new Ri("MessageMoveOut",{"0%":{maxHeight:e.height,padding:h,opacity:1},"100%":{maxHeight:0,padding:0,opacity:0}}),k={padding:h,textAlign:"center",[`${t}-custom-content > ${n}`]:{verticalAlign:"text-bottom",marginInlineEnd:f,fontSize:c},[`${N}-content`]:{display:"inline-block",padding:v,background:m,borderRadius:p,boxShadow:r,pointerEvents:"all"},[`${t}-success > ${n}`]:{color:o},[`${t}-error > ${n}`]:{color:s},[`${t}-warning > ${n}`]:{color:a},[`${t}-info > ${n},
      ${t}-loading > ${n}`]:{color:u}};return[{[t]:Object.assign(Object.assign({},Mc(e)),{color:i,position:"fixed",top:f,width:"100%",pointerEvents:"none",zIndex:g,[`${t}-move-up`]:{animationFillMode:"forwards"},[`
        ${t}-move-up-appear,
        ${t}-move-up-enter
      `]:{animationName:$,animationDuration:d,animationPlayState:"paused",animationTimingFunction:l},[`
        ${t}-move-up-appear${t}-move-up-appear-active,
        ${t}-move-up-enter${t}-move-up-enter-active
      `]:{animationPlayState:"running"},[`${t}-move-up-leave`]:{animationName:x,animationDuration:d,animationPlayState:"paused",animationTimingFunction:l},[`${t}-move-up-leave${t}-move-up-leave-active`]:{animationPlayState:"running"},"&-rtl":{direction:"rtl",span:{direction:"rtl"}}})},{[t]:{[N]:Object.assign({},k)}},{[`${t}-notice-pure-panel`]:Object.assign(Object.assign({},k),{padding:0,textAlign:"start"})}]},Yo=kc("Message",e=>{const t=Dc(e,{height:150});return[Au(t)]},e=>({zIndexPopup:e.zIndexPopupBase+10,contentBg:e.colorBgElevated,contentPadding:`${(e.controlHeightLG-e.fontSize*e.lineHeight)/2}px ${e.paddingSM}px`}),{clientOnly:!0});var ku=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Du={info:y.createElement(Xc,null),success:y.createElement(jc,null),error:y.createElement(Tc,null),warning:y.createElement(Vc,null),loading:y.createElement(Ic,null)},Ko=e=>{let{prefixCls:t,type:n,icon:r,children:i}=e;return y.createElement("div",{className:Nt(`${t}-custom-content`,`${t}-${n}`)},r||Du[n],y.createElement("span",null,i))},Mu=e=>{const{prefixCls:t,className:n,type:r,icon:i,content:o}=e,s=ku(e,["prefixCls","className","type","icon","content"]),{getPrefixCls:a}=y.useContext(Lo),u=t||a("message"),[,c]=Yo(u);return y.createElement(Wo,Object.assign({},s,{prefixCls:u,className:Nt(n,c,`${u}-notice-pure-panel`),eventKey:"pure",duration:null,content:y.createElement(Ko,{prefixCls:u,type:r,icon:i},o)}))},Tu=Mu;function Iu(e,t){return{motionName:t??`${e}-move-up`}}function oi(e){let t;const n=new Promise(i=>{t=e(()=>{i(!0)})}),r=()=>{t==null||t()};return r.then=(i,o)=>n.then(i,o),r.promise=n,r}var Pu=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Gu=8,zu=3,Ru=y.forwardRef((e,t)=>{const{top:n,prefixCls:r,getContainer:i,maxCount:o,duration:s=zu,rtl:a,transitionName:u,onAllRemoved:c}=e,{getPrefixCls:l,getPopupContainer:d,message:f}=y.useContext(Lo),h=r||l("message"),[,p]=Yo(h),g=()=>({left:"50%",transform:"translateX(-50%)",top:n??Gu}),v=()=>Nt(p,{[`${h}-rtl`]:a}),m=()=>Iu(h,u),N=y.createElement("span",{className:`${h}-close-x`},y.createElement(Jn,{className:`${h}-close-icon`})),[$,x]=Cu({prefixCls:h,style:g,className:v,motion:m,closable:!1,closeIcon:N,duration:s,getContainer:()=>(i==null?void 0:i())||(d==null?void 0:d())||document.body,maxCount:o,onAllRemoved:c});return y.useImperativeHandle(t,()=>Object.assign(Object.assign({},$),{prefixCls:h,hashId:p,message:f})),x});let Vi=0;function Xo(e){const t=y.useRef(null);return[y.useMemo(()=>{const r=u=>{var c;(c=t.current)===null||c===void 0||c.close(u)},i=u=>{if(!t.current){const C=()=>{};return C.then=()=>{},C}const{open:c,prefixCls:l,hashId:d,message:f}=t.current,h=`${l}-notice`,{content:p,icon:g,type:v,key:m,className:N,style:$,onClose:x}=u,k=Pu(u,["content","icon","type","key","className","style","onClose"]);let E=m;return E==null&&(Vi+=1,E=`antd-message-${Vi}`),oi(C=>(c(Object.assign(Object.assign({},k),{key:E,content:y.createElement(Ko,{prefixCls:l,type:v,icon:g},p),placement:"top",className:Nt(v&&`${h}-${v}`,d,N,f==null?void 0:f.className),style:Object.assign(Object.assign({},f==null?void 0:f.style),$),onClose:()=>{x==null||x(),C()}})),()=>{r(E)}))},s={open:i,destroy:u=>{var c;u!==void 0?r(u):(c=t.current)===null||c===void 0||c.destroy()}};return["info","success","warning","error","loading"].forEach(u=>{const c=(l,d,f)=>{let h;l&&typeof l=="object"&&"content"in l?h=l:h={content:l};let p,g;typeof d=="function"?g=d:(p=d,g=f);const v=Object.assign(Object.assign({onClose:g,duration:p},h),{type:u});return i(v)};s[u]=c}),s},[]),y.createElement(Ru,Object.assign({key:"message-holder"},e,{ref:t}))]}function Ou(e){return Xo(e)}let ke=null,bt=e=>e(),un=[],Hn={};function Lu(){const{prefixCls:e,getContainer:t,duration:n,rtl:r,maxCount:i,top:o}=Hn,s=e??Vo().getPrefixCls("message"),a=(t==null?void 0:t())||document.body;return{prefixCls:s,container:a,duration:n,rtl:r,maxCount:i,top:o}}const Vu=y.forwardRef((e,t)=>{const n=()=>{const{prefixCls:f,container:h,maxCount:p,duration:g,rtl:v,top:m}=Lu();return{prefixCls:f,getContainer:()=>h,maxCount:p,duration:g,rtl:v,top:m}},[r,i]=y.useState(n),[o,s]=Xo(r),a=Vo(),u=a.getRootPrefixCls(),c=a.getIconPrefixCls(),l=a.getTheme(),d=()=>{i(n)};return y.useEffect(d,[]),y.useImperativeHandle(t,()=>{const f=Object.assign({},o);return Object.keys(f).forEach(h=>{f[h]=function(){return d(),o[h].apply(o,arguments)}}),{instance:f,sync:d}}),y.createElement(zc,{prefixCls:u,iconPrefixCls:c,theme:l},s)});function Qn(){if(!ke){const e=document.createDocumentFragment(),t={fragment:e};ke=t,bt(()=>{Pc(y.createElement(Vu,{ref:n=>{const{instance:r,sync:i}=n||{};Promise.resolve().then(()=>{!t.instance&&r&&(t.instance=r,t.sync=i,Qn())})}}),e)});return}ke.instance&&(un.forEach(e=>{const{type:t,skipped:n}=e;if(!n)switch(t){case"open":{bt(()=>{const r=ke.instance.open(Object.assign(Object.assign({},Hn),e.config));r==null||r.then(e.resolve),e.setCloseFn(r)});break}case"destroy":bt(()=>{ke==null||ke.instance.destroy(e.key)});break;default:bt(()=>{var r;const i=(r=ke.instance)[t].apply(r,Gc(e.args));i==null||i.then(e.resolve),e.setCloseFn(i)})}}),un=[])}function Hu(e){Hn=Object.assign(Object.assign({},Hn),e),bt(()=>{var t;(t=ke==null?void 0:ke.sync)===null||t===void 0||t.call(ke)})}function Bu(e){const t=oi(n=>{let r;const i={type:"open",config:e,resolve:n,setCloseFn:o=>{r=o}};return un.push(i),()=>{r?bt(()=>{r()}):i.skipped=!0}});return Qn(),t}function Fu(e,t){const n=oi(r=>{let i;const o={type:e,args:t,resolve:r,setCloseFn:s=>{i=s}};return un.push(o),()=>{i?bt(()=>{i()}):o.skipped=!0}});return Qn(),n}function Uu(e){un.push({type:"destroy",key:e}),Qn()}const qu=["success","info","warning","error","loading"],Wu={open:Bu,destroy:Uu,config:Hu,useMessage:Ou,_InternalPanelDoNotUseOrYouWillBeFired:Tu},jo=Wu;qu.forEach(e=>{jo[e]=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Fu(e,n)}});const De=jo,si=Zn.createContext({}),kr=e=>{const{children:t}=e,n=y.useMemo(()=>Hc((r,i)=>({decisionGraph:{nodes:[],edges:[]},setDecisionGraph:o=>{r({decisionGraph:o})},updateNode:(o,s)=>{var u,c;const a=Ho(i().decisionGraph,l=>{const d=(l.nodes||[]).map(f=>(o===(f==null?void 0:f.id)&&(f.content=s),f));l.nodes=d});r({decisionGraph:a}),(c=(u=i())==null?void 0:u.onChange)==null||c.call(u,a)},openTabs:[],activeTab:"graph",openTab:o=>{const s=i().openTabs,a=s.find(u=>u===o);r(a?{activeTab:a}:{openTabs:[...s,o],activeTab:o})},closeTab:o=>{const s=i().openTabs,a=i().activeTab,u=s==null?void 0:s.findIndex(l=>l===o),c=s==null?void 0:s[u];r({openTabs:s.filter(l=>l!==c)}),a===o&&r({activeTab:u>0?s==null?void 0:s[u-1]:"graph"})},disabled:!1,configurable:!0,components:[]})),[]);return w(si.Provider,{value:n,children:t})};function Ve(e,t){return Zn.useContext(si)(e,t)}const Yu=()=>Zn.useContext(si);try{kr.displayName="DecisionGraphProvider",kr.__docgenInfo={description:"",displayName:"DecisionGraphProvider",props:{}}}catch{}try{dgstorecontext.displayName="dgstorecontext",dgstorecontext.__docgenInfo={description:"",displayName:"dgstorecontext",props:{}}}catch{}const Dr=({id:e,defaultValue:t,value:n,disabled:r=!1,configurable:i=!0,onChange:o,onAddNode:s,onOpenNode:a,onTabChange:u,onEditGraph:c,components:l,simulate:d})=>{const f=y.useRef(!1),h=Yu(),{setDecisionGraph:p,decisionGraph:g}=Ve(({setDecisionGraph:m,decisionGraph:N})=>({setDecisionGraph:m,decisionGraph:N}),Pe),v=Wc(m=>{o==null||o(m)},100);return y.useEffect(()=>{h.setState({id:e,disabled:r,configurable:i,components:l,simulate:d,onChange:v,onAddNode:s,onOpenNode:a,onTabChange:u,onEditGraph:c})},[e,r,i,l,d,s,a,u,c]),y.useEffect(()=>{f.current&&n!==void 0&&!Pe(n,g)&&p(n)},[n]),y.useEffect(()=>{n!==void 0?p(n):t!==void 0&&p(t),f.current=!0},[]),null};try{Dr.displayName="DecisionGraphEmpty",Dr.__docgenInfo={description:"",displayName:"DecisionGraphEmpty",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"DecisionGraphType"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"DecisionGraphType"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},configurable:{defaultValue:{value:"true"},description:"",name:"configurable",required:!1,type:{name:"boolean"}},simulate:{defaultValue:null,description:"",name:"simulate",required:!1,type:{name:"any"}},components:{defaultValue:null,description:"",name:"components",required:!1,type:{name:"CustomNodeType[]"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((val: DecisionGraphType) => void)"}},onAddNode:{defaultValue:null,description:"",name:"onAddNode",required:!1,type:{name:"((type: string, position?: XYPosition) => void)"}},onOpenNode:{defaultValue:null,description:"",name:"onOpenNode",required:!1,type:{name:"((node: DecisionNode) => void)"}},onTabChange:{defaultValue:null,description:"",name:"onTabChange",required:!1,type:{name:"((tab?: string) => void)"}},onEditGraph:{defaultValue:null,description:"",name:"onEditGraph",required:!1,type:{name:"((edit: boolean) => void)"}}}}}catch{}var ai={exports:{}},Rt=typeof Reflect=="object"?Reflect:null,Hi=Rt&&typeof Rt.apply=="function"?Rt.apply:function(t,n,r){return Function.prototype.apply.call(t,n,r)},Gn;Rt&&typeof Rt.ownKeys=="function"?Gn=Rt.ownKeys:Object.getOwnPropertySymbols?Gn=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Gn=function(t){return Object.getOwnPropertyNames(t)};function Ku(e){console&&console.warn&&console.warn(e)}var Zo=Number.isNaN||function(t){return t!==t};function se(){se.init.call(this)}ai.exports=se;ai.exports.once=Ju;se.EventEmitter=se;se.prototype._events=void 0;se.prototype._eventsCount=0;se.prototype._maxListeners=void 0;var Bi=10;function er(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(se,"defaultMaxListeners",{enumerable:!0,get:function(){return Bi},set:function(e){if(typeof e!="number"||e<0||Zo(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");Bi=e}});se.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};se.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||Zo(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function Jo(e){return e._maxListeners===void 0?se.defaultMaxListeners:e._maxListeners}se.prototype.getMaxListeners=function(){return Jo(this)};se.prototype.emit=function(t){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=t==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var s;if(n.length>0&&(s=n[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var u=o[t];if(u===void 0)return!1;if(typeof u=="function")Hi(u,this,n);else for(var c=u.length,l=rs(u,c),r=0;r<c;++r)Hi(l[r],this,n);return!0};function Qo(e,t,n,r){var i,o,s;if(er(n),o=e._events,o===void 0?(o=e._events=Object.create(null),e._eventsCount=0):(o.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),s===void 0)s=o[t]=n,++e._eventsCount;else if(typeof s=="function"?s=o[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),i=Jo(e),i>0&&s.length>i&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=s.length,Ku(a)}return e}se.prototype.addListener=function(t,n){return Qo(this,t,n,!1)};se.prototype.on=se.prototype.addListener;se.prototype.prependListener=function(t,n){return Qo(this,t,n,!0)};function Xu(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function es(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=Xu.bind(r);return i.listener=n,r.wrapFn=i,i}se.prototype.once=function(t,n){return er(n),this.on(t,es(this,t,n)),this};se.prototype.prependOnceListener=function(t,n){return er(n),this.prependListener(t,es(this,t,n)),this};se.prototype.removeListener=function(t,n){var r,i,o,s,a;if(er(n),i=this._events,i===void 0)return this;if(r=i[t],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,r.listener||n));else if(typeof r!="function"){for(o=-1,s=r.length-1;s>=0;s--)if(r[s]===n||r[s].listener===n){a=r[s].listener,o=s;break}if(o<0)return this;o===0?r.shift():ju(r,o),r.length===1&&(i[t]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",t,a||n)}return this};se.prototype.off=se.prototype.removeListener;se.prototype.removeAllListeners=function(t){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[t]),this;if(arguments.length===0){var o=Object.keys(r),s;for(i=0;i<o.length;++i)s=o[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(t,n[i]);return this};function ts(e,t,n){var r=e._events;if(r===void 0)return[];var i=r[t];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?Zu(i):rs(i,i.length)}se.prototype.listeners=function(t){return ts(this,t,!0)};se.prototype.rawListeners=function(t){return ts(this,t,!1)};se.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):ns.call(e,t)};se.prototype.listenerCount=ns;function ns(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}se.prototype.eventNames=function(){return this._eventsCount>0?Gn(this._events):[]};function rs(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function ju(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function Zu(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function Ju(e,t){return new Promise(function(n,r){function i(s){e.removeListener(t,o),r(s)}function o(){typeof e.removeListener=="function"&&e.removeListener("error",i),n([].slice.call(arguments))}is(e,t,o,{once:!0}),t!=="error"&&Qu(e,i,{once:!0})})}function Qu(e,t,n){typeof e.on=="function"&&is(e,"error",t,n)}function is(e,t,n,r){if(typeof e.on=="function")r.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function i(o){r.once&&e.removeEventListener(t,i),n(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var el=ai.exports;function qe(e){if(typeof e!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=e}typeof Symbol<"u"&&(qe.prototype[Symbol.iterator]=function(){return this});qe.of=function(){var e=arguments,t=e.length,n=0;return new qe(function(){return n>=t?{done:!0}:{done:!1,value:e[n++]}})};qe.empty=function(){var e=new qe(function(){return{done:!0}});return e};qe.fromSequence=function(e){var t=0,n=e.length;return new qe(function(){return t>=n?{done:!0}:{done:!1,value:e[t++]}})};qe.is=function(e){return e instanceof qe?!0:typeof e=="object"&&e!==null&&typeof e.next=="function"};var tr=qe;const Ge=ii(tr);var nr={};nr.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";nr.SYMBOL_SUPPORT=typeof Symbol<"u";var tl=tr,os=nr,nl=os.ARRAY_BUFFER_SUPPORT,rl=os.SYMBOL_SUPPORT;function il(e){return typeof e=="string"||Array.isArray(e)||nl&&ArrayBuffer.isView(e)?tl.fromSequence(e):typeof e!="object"||e===null?null:rl&&typeof e[Symbol.iterator]=="function"?e[Symbol.iterator]():typeof e.next=="function"?e:null}var ss=function(t){var n=il(t);if(!n)throw new Error("obliterator: target is not iterable nor a valid iterator.");return n},ol=ss,sl=function(t,n){for(var r=arguments.length>1?n:1/0,i=r!==1/0?new Array(r):[],o,s=0,a=ol(t);;){if(s===r)return i;if(o=a.next(),o.done)return s!==n&&(i.length=s),i;i[s++]=o.value}};const as=ii(sl);var al=tr,cl=ss,ul=function(){var t=arguments,n=null,r=-1;return new al(function(){var o=null;do{if(n===null){if(r++,r>=t.length)return{done:!0};n=cl(t[r])}if(o=n.next(),o.done===!0){n=null;continue}break}while(!0);return o})};const Xe=ii(ul);function ll(){const e=arguments[0];for(let t=1,n=arguments.length;t<n;t++)if(arguments[t])for(const r in arguments[t])e[r]=arguments[t][r];return e}let he=ll;typeof Object.assign=="function"&&(he=Object.assign);function Ie(e,t,n,r){const i=e._nodes.get(t);let o=null;return i&&(r==="mixed"?o=i.out&&i.out[n]||i.undirected&&i.undirected[n]:r==="directed"?o=i.out&&i.out[n]:o=i.undirected&&i.undirected[n]),o}function ye(e){return typeof e=="object"&&e!==null}function cs(e){let t;for(t in e)return!1;return!0}function Ae(e,t,n){Object.defineProperty(e,t,{enumerable:!1,configurable:!1,writable:!0,value:n})}function ze(e,t,n){const r={enumerable:!0,configurable:!0};typeof n=="function"?r.get=n:(r.value=n,r.writable=!1),Object.defineProperty(e,t,r)}function Fi(e){return!(!ye(e)||e.attributes&&!Array.isArray(e.attributes))}function dl(){let e=Math.floor(Math.random()*256)&255;return()=>e++}class ci extends Error{constructor(t){super(),this.name="GraphError",this.message=t}}class B extends ci{constructor(t){super(t),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,B.prototype.constructor)}}class L extends ci{constructor(t){super(t),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,L.prototype.constructor)}}class J extends ci{constructor(t){super(t),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,J.prototype.constructor)}}function us(e,t){this.key=e,this.attributes=t,this.clear()}us.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function ls(e,t){this.key=e,this.attributes=t,this.clear()}ls.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function ds(e,t){this.key=e,this.attributes=t,this.clear()}ds.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function Yt(e,t,n,r,i){this.key=t,this.attributes=i,this.undirected=e,this.source=n,this.target=r}Yt.prototype.attach=function(){let e="out",t="in";this.undirected&&(e=t="undirected");const n=this.source.key,r=this.target.key;this.source[e][r]=this,!(this.undirected&&n===r)&&(this.target[t][n]=this)};Yt.prototype.attachMulti=function(){let e="out",t="in";const n=this.source.key,r=this.target.key;this.undirected&&(e=t="undirected");const i=this.source[e],o=i[r];if(typeof o>"u"){i[r]=this,this.undirected&&n===r||(this.target[t][n]=this);return}o.previous=this,this.next=o,i[r]=this,this.target[t][n]=this};Yt.prototype.detach=function(){const e=this.source.key,t=this.target.key;let n="out",r="in";this.undirected&&(n=r="undirected"),delete this.source[n][t],delete this.target[r][e]};Yt.prototype.detachMulti=function(){const e=this.source.key,t=this.target.key;let n="out",r="in";this.undirected&&(n=r="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[n][t],delete this.target[r][e]):(this.next.previous=void 0,this.source[n][t]=this.next,this.target[r][e]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const fs=0,hs=1,fl=2,ps=3;function Je(e,t,n,r,i,o,s){let a,u,c,l;if(r=""+r,n===fs){if(a=e._nodes.get(r),!a)throw new L(`Graph.${t}: could not find the "${r}" node in the graph.`);c=i,l=o}else if(n===ps){if(i=""+i,u=e._edges.get(i),!u)throw new L(`Graph.${t}: could not find the "${i}" edge in the graph.`);const d=u.source.key,f=u.target.key;if(r===d)a=u.target;else if(r===f)a=u.source;else throw new L(`Graph.${t}: the "${r}" node is not attached to the "${i}" edge (${d}, ${f}).`);c=o,l=s}else{if(u=e._edges.get(r),!u)throw new L(`Graph.${t}: could not find the "${r}" edge in the graph.`);n===hs?a=u.source:a=u.target,c=i,l=o}return[a,c,l]}function hl(e,t,n){e.prototype[t]=function(r,i,o){const[s,a]=Je(this,t,n,r,i,o);return s.attributes[a]}}function pl(e,t,n){e.prototype[t]=function(r,i){const[o]=Je(this,t,n,r,i);return o.attributes}}function gl(e,t,n){e.prototype[t]=function(r,i,o){const[s,a]=Je(this,t,n,r,i,o);return s.attributes.hasOwnProperty(a)}}function yl(e,t,n){e.prototype[t]=function(r,i,o,s){const[a,u,c]=Je(this,t,n,r,i,o,s);return a.attributes[u]=c,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:u}),this}}function ml(e,t,n){e.prototype[t]=function(r,i,o,s){const[a,u,c]=Je(this,t,n,r,i,o,s);if(typeof c!="function")throw new B(`Graph.${t}: updater should be a function.`);const l=a.attributes,d=c(l[u]);return l[u]=d,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:u}),this}}function wl(e,t,n){e.prototype[t]=function(r,i,o){const[s,a]=Je(this,t,n,r,i,o);return delete s.attributes[a],this.emit("nodeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:a}),this}}function bl(e,t,n){e.prototype[t]=function(r,i,o){const[s,a]=Je(this,t,n,r,i,o);if(!ye(a))throw new B(`Graph.${t}: provided attributes are not a plain object.`);return s.attributes=a,this.emit("nodeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function vl(e,t,n){e.prototype[t]=function(r,i,o){const[s,a]=Je(this,t,n,r,i,o);if(!ye(a))throw new B(`Graph.${t}: provided attributes are not a plain object.`);return he(s.attributes,a),this.emit("nodeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:a}),this}}function xl(e,t,n){e.prototype[t]=function(r,i,o){const[s,a]=Je(this,t,n,r,i,o);if(typeof a!="function")throw new B(`Graph.${t}: provided updater is not a function.`);return s.attributes=a(s.attributes),this.emit("nodeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const _l=[{name:e=>`get${e}Attribute`,attacher:hl},{name:e=>`get${e}Attributes`,attacher:pl},{name:e=>`has${e}Attribute`,attacher:gl},{name:e=>`set${e}Attribute`,attacher:yl},{name:e=>`update${e}Attribute`,attacher:ml},{name:e=>`remove${e}Attribute`,attacher:wl},{name:e=>`replace${e}Attributes`,attacher:bl},{name:e=>`merge${e}Attributes`,attacher:vl},{name:e=>`update${e}Attributes`,attacher:xl}];function Nl(e){_l.forEach(function({name:t,attacher:n}){n(e,t("Node"),fs),n(e,t("Source"),hs),n(e,t("Target"),fl),n(e,t("Opposite"),ps)})}function El(e,t,n){e.prototype[t]=function(r,i){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new J(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new J(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,a=""+i;if(i=arguments[2],o=Ie(this,s,a,n),!o)throw new L(`Graph.${t}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(n!=="mixed")throw new J(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new L(`Graph.${t}: could not find the "${r}" edge in the graph.`)}return o.attributes[i]}}function Sl(e,t,n){e.prototype[t]=function(r){let i;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new J(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new J(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,s=""+arguments[1];if(i=Ie(this,o,s,n),!i)throw new L(`Graph.${t}: could not find an edge for the given path ("${o}" - "${s}").`)}else{if(n!=="mixed")throw new J(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,i=this._edges.get(r),!i)throw new L(`Graph.${t}: could not find the "${r}" edge in the graph.`)}return i.attributes}}function $l(e,t,n){e.prototype[t]=function(r,i){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new J(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new J(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,a=""+i;if(i=arguments[2],o=Ie(this,s,a,n),!o)throw new L(`Graph.${t}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(n!=="mixed")throw new J(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new L(`Graph.${t}: could not find the "${r}" edge in the graph.`)}return o.attributes.hasOwnProperty(i)}}function Cl(e,t,n){e.prototype[t]=function(r,i,o){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new J(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new J(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,u=""+i;if(i=arguments[2],o=arguments[3],s=Ie(this,a,u,n),!s)throw new L(`Graph.${t}: could not find an edge for the given path ("${a}" - "${u}").`)}else{if(n!=="mixed")throw new J(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new L(`Graph.${t}: could not find the "${r}" edge in the graph.`)}return s.attributes[i]=o,this.emit("edgeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:i}),this}}function Al(e,t,n){e.prototype[t]=function(r,i,o){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new J(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new J(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,u=""+i;if(i=arguments[2],o=arguments[3],s=Ie(this,a,u,n),!s)throw new L(`Graph.${t}: could not find an edge for the given path ("${a}" - "${u}").`)}else{if(n!=="mixed")throw new J(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new L(`Graph.${t}: could not find the "${r}" edge in the graph.`)}if(typeof o!="function")throw new B(`Graph.${t}: updater should be a function.`);return s.attributes[i]=o(s.attributes[i]),this.emit("edgeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:i}),this}}function kl(e,t,n){e.prototype[t]=function(r,i){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new J(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new J(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,a=""+i;if(i=arguments[2],o=Ie(this,s,a,n),!o)throw new L(`Graph.${t}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(n!=="mixed")throw new J(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new L(`Graph.${t}: could not find the "${r}" edge in the graph.`)}return delete o.attributes[i],this.emit("edgeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:i}),this}}function Dl(e,t,n){e.prototype[t]=function(r,i){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new J(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new J(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,a=""+i;if(i=arguments[2],o=Ie(this,s,a,n),!o)throw new L(`Graph.${t}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(n!=="mixed")throw new J(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new L(`Graph.${t}: could not find the "${r}" edge in the graph.`)}if(!ye(i))throw new B(`Graph.${t}: provided attributes are not a plain object.`);return o.attributes=i,this.emit("edgeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function Ml(e,t,n){e.prototype[t]=function(r,i){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new J(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new J(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,a=""+i;if(i=arguments[2],o=Ie(this,s,a,n),!o)throw new L(`Graph.${t}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(n!=="mixed")throw new J(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new L(`Graph.${t}: could not find the "${r}" edge in the graph.`)}if(!ye(i))throw new B(`Graph.${t}: provided attributes are not a plain object.`);return he(o.attributes,i),this.emit("edgeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:i}),this}}function Tl(e,t,n){e.prototype[t]=function(r,i){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new J(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new J(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,a=""+i;if(i=arguments[2],o=Ie(this,s,a,n),!o)throw new L(`Graph.${t}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(n!=="mixed")throw new J(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new L(`Graph.${t}: could not find the "${r}" edge in the graph.`)}if(typeof i!="function")throw new B(`Graph.${t}: provided updater is not a function.`);return o.attributes=i(o.attributes),this.emit("edgeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const Il=[{name:e=>`get${e}Attribute`,attacher:El},{name:e=>`get${e}Attributes`,attacher:Sl},{name:e=>`has${e}Attribute`,attacher:$l},{name:e=>`set${e}Attribute`,attacher:Cl},{name:e=>`update${e}Attribute`,attacher:Al},{name:e=>`remove${e}Attribute`,attacher:kl},{name:e=>`replace${e}Attributes`,attacher:Dl},{name:e=>`merge${e}Attributes`,attacher:Ml},{name:e=>`update${e}Attributes`,attacher:Tl}];function Pl(e){Il.forEach(function({name:t,attacher:n}){n(e,t("Edge"),"mixed"),n(e,t("DirectedEdge"),"directed"),n(e,t("UndirectedEdge"),"undirected")})}const Gl=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function zl(e,t,n,r){let i=!1;for(const o in t){if(o===r)continue;const s=t[o];if(i=n(s.key,s.attributes,s.source.key,s.target.key,s.source.attributes,s.target.attributes,s.undirected),e&&i)return s.key}}function Rl(e,t,n,r){let i,o,s,a=!1;for(const u in t)if(u!==r){i=t[u];do{if(o=i.source,s=i.target,a=n(i.key,i.attributes,o.key,s.key,o.attributes,s.attributes,i.undirected),e&&a)return i.key;i=i.next}while(i!==void 0)}}function pr(e,t){const n=Object.keys(e),r=n.length;let i,o=0;return new Ge(function(){do if(i)i=i.next;else{if(o>=r)return{done:!0};const a=n[o++];if(a===t){i=void 0;continue}i=e[a]}while(!i);return{done:!1,value:{edge:i.key,attributes:i.attributes,source:i.source.key,target:i.target.key,sourceAttributes:i.source.attributes,targetAttributes:i.target.attributes,undirected:i.undirected}}})}function Ol(e,t,n,r){const i=t[n];if(!i)return;const o=i.source,s=i.target;if(r(i.key,i.attributes,o.key,s.key,o.attributes,s.attributes,i.undirected)&&e)return i.key}function Ll(e,t,n,r){let i=t[n];if(!i)return;let o=!1;do{if(o=r(i.key,i.attributes,i.source.key,i.target.key,i.source.attributes,i.target.attributes,i.undirected),e&&o)return i.key;i=i.next}while(i!==void 0)}function gr(e,t){let n=e[t];return n.next!==void 0?new Ge(function(){if(!n)return{done:!0};const r={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:r}}):Ge.of({edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected})}function Vl(e,t){if(e.size===0)return[];if(t==="mixed"||t===e.type)return typeof Array.from=="function"?Array.from(e._edges.keys()):as(e._edges.keys(),e._edges.size);const n=t==="undirected"?e.undirectedSize:e.directedSize,r=new Array(n),i=t==="undirected",o=e._edges.values();let s=0,a,u;for(;a=o.next(),a.done!==!0;)u=a.value,u.undirected===i&&(r[s++]=u.key);return r}function gs(e,t,n,r){if(t.size===0)return;const i=n!=="mixed"&&n!==t.type,o=n==="undirected";let s,a,u=!1;const c=t._edges.values();for(;s=c.next(),s.done!==!0;){if(a=s.value,i&&a.undirected!==o)continue;const{key:l,attributes:d,source:f,target:h}=a;if(u=r(l,d,f.key,h.key,f.attributes,h.attributes,a.undirected),e&&u)return l}}function Hl(e,t){if(e.size===0)return Ge.empty();const n=t!=="mixed"&&t!==e.type,r=t==="undirected",i=e._edges.values();return new Ge(function(){let s,a;for(;;){if(s=i.next(),s.done)return s;if(a=s.value,!(n&&a.undirected!==r))break}return{value:{edge:a.key,attributes:a.attributes,source:a.source.key,target:a.target.key,sourceAttributes:a.source.attributes,targetAttributes:a.target.attributes,undirected:a.undirected},done:!1}})}function ui(e,t,n,r,i,o){const s=t?Rl:zl;let a;if(n!=="undirected"&&(r!=="out"&&(a=s(e,i.in,o),e&&a)||r!=="in"&&(a=s(e,i.out,o,r?void 0:i.key),e&&a))||n!=="directed"&&(a=s(e,i.undirected,o),e&&a))return a}function Bl(e,t,n,r){const i=[];return ui(!1,e,t,n,r,function(o){i.push(o)}),i}function Fl(e,t,n){let r=Ge.empty();return e!=="undirected"&&(t!=="out"&&typeof n.in<"u"&&(r=Xe(r,pr(n.in))),t!=="in"&&typeof n.out<"u"&&(r=Xe(r,pr(n.out,t?void 0:n.key)))),e!=="directed"&&typeof n.undirected<"u"&&(r=Xe(r,pr(n.undirected))),r}function li(e,t,n,r,i,o,s){const a=n?Ll:Ol;let u;if(t!=="undirected"&&(typeof i.in<"u"&&r!=="out"&&(u=a(e,i.in,o,s),e&&u)||typeof i.out<"u"&&r!=="in"&&(r||i.key!==o)&&(u=a(e,i.out,o,s),e&&u))||t!=="directed"&&typeof i.undirected<"u"&&(u=a(e,i.undirected,o,s),e&&u))return u}function Ul(e,t,n,r,i){const o=[];return li(!1,e,t,n,r,i,function(s){o.push(s)}),o}function ql(e,t,n,r){let i=Ge.empty();return e!=="undirected"&&(typeof n.in<"u"&&t!=="out"&&r in n.in&&(i=Xe(i,gr(n.in,r))),typeof n.out<"u"&&t!=="in"&&r in n.out&&(t||n.key!==r)&&(i=Xe(i,gr(n.out,r)))),e!=="directed"&&typeof n.undirected<"u"&&r in n.undirected&&(i=Xe(i,gr(n.undirected,r))),i}function Wl(e,t){const{name:n,type:r,direction:i}=t;e.prototype[n]=function(o,s){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];if(!arguments.length)return Vl(this,r);if(arguments.length===1){o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new L(`Graph.${n}: could not find the "${o}" node in the graph.`);return Bl(this.multi,r==="mixed"?this.type:r,i,a)}if(arguments.length===2){o=""+o,s=""+s;const a=this._nodes.get(o);if(!a)throw new L(`Graph.${n}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(s))throw new L(`Graph.${n}:  could not find the "${s}" target node in the graph.`);return Ul(r,this.multi,i,a,s)}throw new B(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Yl(e,t){const{name:n,type:r,direction:i}=t,o="forEach"+n[0].toUpperCase()+n.slice(1,-1);e.prototype[o]=function(c,l,d){if(!(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)){if(arguments.length===1)return d=c,gs(!1,this,r,d);if(arguments.length===2){c=""+c,d=l;const f=this._nodes.get(c);if(typeof f>"u")throw new L(`Graph.${o}: could not find the "${c}" node in the graph.`);return ui(!1,this.multi,r==="mixed"?this.type:r,i,f,d)}if(arguments.length===3){c=""+c,l=""+l;const f=this._nodes.get(c);if(!f)throw new L(`Graph.${o}:  could not find the "${c}" source node in the graph.`);if(!this._nodes.has(l))throw new L(`Graph.${o}:  could not find the "${l}" target node in the graph.`);return li(!1,r,this.multi,i,f,l,d)}throw new B(`Graph.${o}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const s="map"+n[0].toUpperCase()+n.slice(1);e.prototype[s]=function(){const c=Array.prototype.slice.call(arguments),l=c.pop();let d;if(c.length===0){let f=0;r!=="directed"&&(f+=this.undirectedSize),r!=="undirected"&&(f+=this.directedSize),d=new Array(f);let h=0;c.push((p,g,v,m,N,$,x)=>{d[h++]=l(p,g,v,m,N,$,x)})}else d=[],c.push((f,h,p,g,v,m,N)=>{d.push(l(f,h,p,g,v,m,N))});return this[o].apply(this,c),d};const a="filter"+n[0].toUpperCase()+n.slice(1);e.prototype[a]=function(){const c=Array.prototype.slice.call(arguments),l=c.pop(),d=[];return c.push((f,h,p,g,v,m,N)=>{l(f,h,p,g,v,m,N)&&d.push(f)}),this[o].apply(this,c),d};const u="reduce"+n[0].toUpperCase()+n.slice(1);e.prototype[u]=function(){let c=Array.prototype.slice.call(arguments);if(c.length<2||c.length>4)throw new B(`Graph.${u}: invalid number of arguments (expecting 2, 3 or 4 and got ${c.length}).`);if(typeof c[c.length-1]=="function"&&typeof c[c.length-2]!="function")throw new B(`Graph.${u}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let l,d;c.length===2?(l=c[0],d=c[1],c=[]):c.length===3?(l=c[1],d=c[2],c=[c[0]]):c.length===4&&(l=c[2],d=c[3],c=[c[0],c[1]]);let f=d;return c.push((h,p,g,v,m,N,$)=>{f=l(f,h,p,g,v,m,N,$)}),this[o].apply(this,c),f}}function Kl(e,t){const{name:n,type:r,direction:i}=t,o="find"+n[0].toUpperCase()+n.slice(1,-1);e.prototype[o]=function(u,c,l){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return!1;if(arguments.length===1)return l=u,gs(!0,this,r,l);if(arguments.length===2){u=""+u,l=c;const d=this._nodes.get(u);if(typeof d>"u")throw new L(`Graph.${o}: could not find the "${u}" node in the graph.`);return ui(!0,this.multi,r==="mixed"?this.type:r,i,d,l)}if(arguments.length===3){u=""+u,c=""+c;const d=this._nodes.get(u);if(!d)throw new L(`Graph.${o}:  could not find the "${u}" source node in the graph.`);if(!this._nodes.has(c))throw new L(`Graph.${o}:  could not find the "${c}" target node in the graph.`);return li(!0,r,this.multi,i,d,c,l)}throw new B(`Graph.${o}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const s="some"+n[0].toUpperCase()+n.slice(1,-1);e.prototype[s]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop();return u.push((d,f,h,p,g,v,m)=>c(d,f,h,p,g,v,m)),!!this[o].apply(this,u)};const a="every"+n[0].toUpperCase()+n.slice(1,-1);e.prototype[a]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop();return u.push((d,f,h,p,g,v,m)=>!c(d,f,h,p,g,v,m)),!this[o].apply(this,u)}}function Xl(e,t){const{name:n,type:r,direction:i}=t,o=n.slice(0,-1)+"Entries";e.prototype[o]=function(s,a){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return Ge.empty();if(!arguments.length)return Hl(this,r);if(arguments.length===1){s=""+s;const u=this._nodes.get(s);if(!u)throw new L(`Graph.${o}: could not find the "${s}" node in the graph.`);return Fl(r,i,u)}if(arguments.length===2){s=""+s,a=""+a;const u=this._nodes.get(s);if(!u)throw new L(`Graph.${o}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(a))throw new L(`Graph.${o}:  could not find the "${a}" target node in the graph.`);return ql(r,i,u,a)}throw new B(`Graph.${o}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function jl(e){Gl.forEach(t=>{Wl(e,t),Yl(e,t),Kl(e,t),Xl(e,t)})}const Zl=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function rr(){this.A=null,this.B=null}rr.prototype.wrap=function(e){this.A===null?this.A=e:this.B===null&&(this.B=e)};rr.prototype.has=function(e){return this.A!==null&&e in this.A||this.B!==null&&e in this.B};function Zt(e,t,n,r,i){for(const o in r){const s=r[o],a=s.source,u=s.target,c=a===n?u:a;if(t&&t.has(c.key))continue;const l=i(c.key,c.attributes);if(e&&l)return c.key}}function di(e,t,n,r,i){if(t!=="mixed"){if(t==="undirected")return Zt(e,null,r,r.undirected,i);if(typeof n=="string")return Zt(e,null,r,r[n],i)}const o=new rr;let s;if(t!=="undirected"){if(n!=="out"){if(s=Zt(e,null,r,r.in,i),e&&s)return s;o.wrap(r.in)}if(n!=="in"){if(s=Zt(e,o,r,r.out,i),e&&s)return s;o.wrap(r.out)}}if(t!=="directed"&&(s=Zt(e,o,r,r.undirected,i),e&&s))return s}function Jl(e,t,n){if(e!=="mixed"){if(e==="undirected")return Object.keys(n.undirected);if(typeof t=="string")return Object.keys(n[t])}const r=[];return di(!1,e,t,n,function(i){r.push(i)}),r}function Jt(e,t,n){const r=Object.keys(n),i=r.length;let o=0;return new Ge(function(){let a=null;do{if(o>=i)return e&&e.wrap(n),{done:!0};const u=n[r[o++]],c=u.source,l=u.target;if(a=c===t?l:c,e&&e.has(a.key)){a=null;continue}}while(a===null);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}})}function Ql(e,t,n){if(e!=="mixed"){if(e==="undirected")return Jt(null,n,n.undirected);if(typeof t=="string")return Jt(null,n,n[t])}let r=Ge.empty();const i=new rr;return e!=="undirected"&&(t!=="out"&&(r=Xe(r,Jt(i,n,n.in))),t!=="in"&&(r=Xe(r,Jt(i,n,n.out)))),e!=="directed"&&(r=Xe(r,Jt(i,n,n.undirected))),r}function ed(e,t){const{name:n,type:r,direction:i}=t;e.prototype[n]=function(o){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];o=""+o;const s=this._nodes.get(o);if(typeof s>"u")throw new L(`Graph.${n}: could not find the "${o}" node in the graph.`);return Jl(r==="mixed"?this.type:r,i,s)}}function td(e,t){const{name:n,type:r,direction:i}=t,o="forEach"+n[0].toUpperCase()+n.slice(1,-1);e.prototype[o]=function(c,l){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;c=""+c;const d=this._nodes.get(c);if(typeof d>"u")throw new L(`Graph.${o}: could not find the "${c}" node in the graph.`);di(!1,r==="mixed"?this.type:r,i,d,l)};const s="map"+n[0].toUpperCase()+n.slice(1);e.prototype[s]=function(c,l){const d=[];return this[o](c,(f,h)=>{d.push(l(f,h))}),d};const a="filter"+n[0].toUpperCase()+n.slice(1);e.prototype[a]=function(c,l){const d=[];return this[o](c,(f,h)=>{l(f,h)&&d.push(f)}),d};const u="reduce"+n[0].toUpperCase()+n.slice(1);e.prototype[u]=function(c,l,d){if(arguments.length<3)throw new B(`Graph.${u}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let f=d;return this[o](c,(h,p)=>{f=l(f,h,p)}),f}}function nd(e,t){const{name:n,type:r,direction:i}=t,o=n[0].toUpperCase()+n.slice(1,-1),s="find"+o;e.prototype[s]=function(c,l){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;c=""+c;const d=this._nodes.get(c);if(typeof d>"u")throw new L(`Graph.${s}: could not find the "${c}" node in the graph.`);return di(!0,r==="mixed"?this.type:r,i,d,l)};const a="some"+o;e.prototype[a]=function(c,l){return!!this[s](c,l)};const u="every"+o;e.prototype[u]=function(c,l){return!this[s](c,(f,h)=>!l(f,h))}}function rd(e,t){const{name:n,type:r,direction:i}=t,o=n.slice(0,-1)+"Entries";e.prototype[o]=function(s){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return Ge.empty();s=""+s;const a=this._nodes.get(s);if(typeof a>"u")throw new L(`Graph.${o}: could not find the "${s}" node in the graph.`);return Ql(r==="mixed"?this.type:r,i,a)}}function id(e){Zl.forEach(t=>{ed(e,t),td(e,t),nd(e,t),rd(e,t)})}function Nn(e,t,n,r,i){const o=r._nodes.values(),s=r.type;let a,u,c,l,d,f,h;for(;a=o.next(),a.done!==!0;){let p=!1;if(u=a.value,s!=="undirected"){l=u.out;for(c in l){d=l[c];do{if(f=d.target,p=!0,h=i(u.key,f.key,u.attributes,f.attributes,d.key,d.attributes,d.undirected),e&&h)return d;d=d.next}while(d)}}if(s!=="directed"){l=u.undirected;for(c in l)if(!(t&&u.key>c)){d=l[c];do{if(f=d.target,f.key!==c&&(f=d.source),p=!0,h=i(u.key,f.key,u.attributes,f.attributes,d.key,d.attributes,d.undirected),e&&h)return d;d=d.next}while(d)}}if(n&&!p&&(h=i(u.key,null,u.attributes,null,null,null,null),e&&h))return null}}function od(e,t){const n={key:e};return cs(t.attributes)||(n.attributes=he({},t.attributes)),n}function sd(e,t,n){const r={key:t,source:n.source.key,target:n.target.key};return cs(n.attributes)||(r.attributes=he({},n.attributes)),e==="mixed"&&n.undirected&&(r.undirected=!0),r}function ad(e){if(!ye(e))throw new B('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in e))throw new B("Graph.import: serialized node is missing its key.");if("attributes"in e&&(!ye(e.attributes)||e.attributes===null))throw new B("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function cd(e){if(!ye(e))throw new B('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in e))throw new B("Graph.import: serialized edge is missing its source.");if(!("target"in e))throw new B("Graph.import: serialized edge is missing its target.");if("attributes"in e&&(!ye(e.attributes)||e.attributes===null))throw new B("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in e&&typeof e.undirected!="boolean")throw new B("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const ud=dl(),ld=new Set(["directed","undirected","mixed"]),Ui=new Set(["domain","_events","_eventsCount","_maxListeners"]),dd=[{name:e=>`${e}Edge`,generateKey:!0},{name:e=>`${e}DirectedEdge`,generateKey:!0,type:"directed"},{name:e=>`${e}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:e=>`${e}EdgeWithKey`},{name:e=>`${e}DirectedEdgeWithKey`,type:"directed"},{name:e=>`${e}UndirectedEdgeWithKey`,type:"undirected"}],fd={allowSelfLoops:!0,multi:!1,type:"mixed"};function hd(e,t,n){if(n&&!ye(n))throw new B(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(t=""+t,n=n||{},e._nodes.has(t))throw new J(`Graph.addNode: the "${t}" node already exist in the graph.`);const r=new e.NodeDataClass(t,n);return e._nodes.set(t,r),e.emit("nodeAdded",{key:t,attributes:n}),r}function qi(e,t,n){const r=new e.NodeDataClass(t,n);return e._nodes.set(t,r),e.emit("nodeAdded",{key:t,attributes:n}),r}function ys(e,t,n,r,i,o,s,a){if(!r&&e.type==="undirected")throw new J(`Graph.${t}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(r&&e.type==="directed")throw new J(`Graph.${t}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!ye(a))throw new B(`Graph.${t}: invalid attributes. Expecting an object but got "${a}"`);if(o=""+o,s=""+s,a=a||{},!e.allowSelfLoops&&o===s)throw new J(`Graph.${t}: source & target are the same ("${o}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const u=e._nodes.get(o),c=e._nodes.get(s);if(!u)throw new L(`Graph.${t}: source node "${o}" not found.`);if(!c)throw new L(`Graph.${t}: target node "${s}" not found.`);const l={key:null,undirected:r,source:o,target:s,attributes:a};if(n)i=e._edgeKeyGenerator();else if(i=""+i,e._edges.has(i))throw new J(`Graph.${t}: the "${i}" edge already exists in the graph.`);if(!e.multi&&(r?typeof u.undirected[s]<"u":typeof u.out[s]<"u"))throw new J(`Graph.${t}: an edge linking "${o}" to "${s}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const d=new Yt(r,i,u,c,a);e._edges.set(i,d);const f=o===s;return r?(u.undirectedDegree++,c.undirectedDegree++,f&&(u.undirectedLoops++,e._undirectedSelfLoopCount++)):(u.outDegree++,c.inDegree++,f&&(u.directedLoops++,e._directedSelfLoopCount++)),e.multi?d.attachMulti():d.attach(),r?e._undirectedSize++:e._directedSize++,l.key=i,e.emit("edgeAdded",l),i}function pd(e,t,n,r,i,o,s,a,u){if(!r&&e.type==="undirected")throw new J(`Graph.${t}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(r&&e.type==="directed")throw new J(`Graph.${t}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a){if(u){if(typeof a!="function")throw new B(`Graph.${t}: invalid updater function. Expecting a function but got "${a}"`)}else if(!ye(a))throw new B(`Graph.${t}: invalid attributes. Expecting an object but got "${a}"`)}o=""+o,s=""+s;let c;if(u&&(c=a,a=void 0),!e.allowSelfLoops&&o===s)throw new J(`Graph.${t}: source & target are the same ("${o}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let l=e._nodes.get(o),d=e._nodes.get(s),f,h;if(!n&&(f=e._edges.get(i),f)){if((f.source.key!==o||f.target.key!==s)&&(!r||f.source.key!==s||f.target.key!==o))throw new J(`Graph.${t}: inconsistency detected when attempting to merge the "${i}" edge with "${o}" source & "${s}" target vs. ("${f.source.key}", "${f.target.key}").`);h=f}if(!h&&!e.multi&&l&&(h=r?l.undirected[s]:l.out[s]),h){const N=[h.key,!1,!1,!1];if(u?!c:!a)return N;if(u){const $=h.attributes;h.attributes=c($),e.emit("edgeAttributesUpdated",{type:"replace",key:h.key,attributes:h.attributes})}else he(h.attributes,a),e.emit("edgeAttributesUpdated",{type:"merge",key:h.key,attributes:h.attributes,data:a});return N}a=a||{},u&&c&&(a=c(a));const p={key:null,undirected:r,source:o,target:s,attributes:a};if(n)i=e._edgeKeyGenerator();else if(i=""+i,e._edges.has(i))throw new J(`Graph.${t}: the "${i}" edge already exists in the graph.`);let g=!1,v=!1;l||(l=qi(e,o,{}),g=!0,o===s&&(d=l,v=!0)),d||(d=qi(e,s,{}),v=!0),f=new Yt(r,i,l,d,a),e._edges.set(i,f);const m=o===s;return r?(l.undirectedDegree++,d.undirectedDegree++,m&&(l.undirectedLoops++,e._undirectedSelfLoopCount++)):(l.outDegree++,d.inDegree++,m&&(l.directedLoops++,e._directedSelfLoopCount++)),e.multi?f.attachMulti():f.attach(),r?e._undirectedSize++:e._directedSize++,p.key=i,e.emit("edgeAdded",p),[i,!0,g,v]}function Dt(e,t){e._edges.delete(t.key);const{source:n,target:r,attributes:i}=t,o=t.undirected,s=n===r;o?(n.undirectedDegree--,r.undirectedDegree--,s&&(n.undirectedLoops--,e._undirectedSelfLoopCount--)):(n.outDegree--,r.inDegree--,s&&(n.directedLoops--,e._directedSelfLoopCount--)),e.multi?t.detachMulti():t.detach(),o?e._undirectedSize--:e._directedSize--,e.emit("edgeDropped",{key:t.key,attributes:i,source:n.key,target:r.key,undirected:o})}let ce=class Mr extends el.EventEmitter{constructor(t){if(super(),t=he({},fd,t),typeof t.multi!="boolean")throw new B(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${t.multi}".`);if(!ld.has(t.type))throw new B(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${t.type}".`);if(typeof t.allowSelfLoops!="boolean")throw new B(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${t.allowSelfLoops}".`);const n=t.type==="mixed"?us:t.type==="directed"?ls:ds;Ae(this,"NodeDataClass",n);const r="geid_"+ud()+"_";let i=0;const o=()=>{let s;do s=r+i++;while(this._edges.has(s));return s};Ae(this,"_attributes",{}),Ae(this,"_nodes",new Map),Ae(this,"_edges",new Map),Ae(this,"_directedSize",0),Ae(this,"_undirectedSize",0),Ae(this,"_directedSelfLoopCount",0),Ae(this,"_undirectedSelfLoopCount",0),Ae(this,"_edgeKeyGenerator",o),Ae(this,"_options",t),Ui.forEach(s=>Ae(this,s,this[s])),ze(this,"order",()=>this._nodes.size),ze(this,"size",()=>this._edges.size),ze(this,"directedSize",()=>this._directedSize),ze(this,"undirectedSize",()=>this._undirectedSize),ze(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),ze(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),ze(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),ze(this,"multi",this._options.multi),ze(this,"type",this._options.type),ze(this,"allowSelfLoops",this._options.allowSelfLoops),ze(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(t){return this._nodes.has(""+t)}hasDirectedEdge(t,n){if(this.type==="undirected")return!1;if(arguments.length===1){const r=""+t,i=this._edges.get(r);return!!i&&!i.undirected}else if(arguments.length===2){t=""+t,n=""+n;const r=this._nodes.get(t);return r?r.out.hasOwnProperty(n):!1}throw new B(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(t,n){if(this.type==="directed")return!1;if(arguments.length===1){const r=""+t,i=this._edges.get(r);return!!i&&i.undirected}else if(arguments.length===2){t=""+t,n=""+n;const r=this._nodes.get(t);return r?r.undirected.hasOwnProperty(n):!1}throw new B(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(t,n){if(arguments.length===1){const r=""+t;return this._edges.has(r)}else if(arguments.length===2){t=""+t,n=""+n;const r=this._nodes.get(t);return r?typeof r.out<"u"&&r.out.hasOwnProperty(n)||typeof r.undirected<"u"&&r.undirected.hasOwnProperty(n):!1}throw new B(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(t,n){if(this.type==="undirected")return;if(t=""+t,n=""+n,this.multi)throw new J("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const r=this._nodes.get(t);if(!r)throw new L(`Graph.directedEdge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(n))throw new L(`Graph.directedEdge: could not find the "${n}" target node in the graph.`);const i=r.out&&r.out[n]||void 0;if(i)return i.key}undirectedEdge(t,n){if(this.type==="directed")return;if(t=""+t,n=""+n,this.multi)throw new J("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const r=this._nodes.get(t);if(!r)throw new L(`Graph.undirectedEdge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(n))throw new L(`Graph.undirectedEdge: could not find the "${n}" target node in the graph.`);const i=r.undirected&&r.undirected[n]||void 0;if(i)return i.key}edge(t,n){if(this.multi)throw new J("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");t=""+t,n=""+n;const r=this._nodes.get(t);if(!r)throw new L(`Graph.edge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(n))throw new L(`Graph.edge: could not find the "${n}" target node in the graph.`);const i=r.out&&r.out[n]||r.undirected&&r.undirected[n]||void 0;if(i)return i.key}areDirectedNeighbors(t,n){t=""+t,n=""+n;const r=this._nodes.get(t);if(!r)throw new L(`Graph.areDirectedNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:n in r.in||n in r.out}areOutNeighbors(t,n){t=""+t,n=""+n;const r=this._nodes.get(t);if(!r)throw new L(`Graph.areOutNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:n in r.out}areInNeighbors(t,n){t=""+t,n=""+n;const r=this._nodes.get(t);if(!r)throw new L(`Graph.areInNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:n in r.in}areUndirectedNeighbors(t,n){t=""+t,n=""+n;const r=this._nodes.get(t);if(!r)throw new L(`Graph.areUndirectedNeighbors: could not find the "${t}" node in the graph.`);return this.type==="directed"?!1:n in r.undirected}areNeighbors(t,n){t=""+t,n=""+n;const r=this._nodes.get(t);if(!r)throw new L(`Graph.areNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&(n in r.in||n in r.out)||this.type!=="directed"&&n in r.undirected}areInboundNeighbors(t,n){t=""+t,n=""+n;const r=this._nodes.get(t);if(!r)throw new L(`Graph.areInboundNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&n in r.in||this.type!=="directed"&&n in r.undirected}areOutboundNeighbors(t,n){t=""+t,n=""+n;const r=this._nodes.get(t);if(!r)throw new L(`Graph.areOutboundNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&n in r.out||this.type!=="directed"&&n in r.undirected}inDegree(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new L(`Graph.inDegree: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:n.inDegree}outDegree(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new L(`Graph.outDegree: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:n.outDegree}directedDegree(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new L(`Graph.directedDegree: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree}undirectedDegree(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new L(`Graph.undirectedDegree: could not find the "${t}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree}inboundDegree(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new L(`Graph.inboundDegree: could not find the "${t}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.inDegree),r}outboundDegree(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new L(`Graph.outboundDegree: could not find the "${t}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.outDegree),r}degree(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new L(`Graph.degree: could not find the "${t}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.inDegree+n.outDegree),r}inDegreeWithoutSelfLoops(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new L(`Graph.inDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:n.inDegree-n.directedLoops}outDegreeWithoutSelfLoops(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new L(`Graph.outDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:n.outDegree-n.directedLoops}directedDegreeWithoutSelfLoops(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new L(`Graph.directedDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree-n.directedLoops*2}undirectedDegreeWithoutSelfLoops(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new L(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree-n.undirectedLoops*2}inboundDegreeWithoutSelfLoops(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new L(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.inDegree,i+=n.directedLoops),r-i}outboundDegreeWithoutSelfLoops(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new L(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.outDegree,i+=n.directedLoops),r-i}degreeWithoutSelfLoops(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new L(`Graph.degreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.inDegree+n.outDegree,i+=n.directedLoops*2),r-i}source(t){t=""+t;const n=this._edges.get(t);if(!n)throw new L(`Graph.source: could not find the "${t}" edge in the graph.`);return n.source.key}target(t){t=""+t;const n=this._edges.get(t);if(!n)throw new L(`Graph.target: could not find the "${t}" edge in the graph.`);return n.target.key}extremities(t){t=""+t;const n=this._edges.get(t);if(!n)throw new L(`Graph.extremities: could not find the "${t}" edge in the graph.`);return[n.source.key,n.target.key]}opposite(t,n){t=""+t,n=""+n;const r=this._edges.get(n);if(!r)throw new L(`Graph.opposite: could not find the "${n}" edge in the graph.`);const i=r.source.key,o=r.target.key;if(t===i)return o;if(t===o)return i;throw new L(`Graph.opposite: the "${t}" node is not attached to the "${n}" edge (${i}, ${o}).`)}hasExtremity(t,n){t=""+t,n=""+n;const r=this._edges.get(t);if(!r)throw new L(`Graph.hasExtremity: could not find the "${t}" edge in the graph.`);return r.source.key===n||r.target.key===n}isUndirected(t){t=""+t;const n=this._edges.get(t);if(!n)throw new L(`Graph.isUndirected: could not find the "${t}" edge in the graph.`);return n.undirected}isDirected(t){t=""+t;const n=this._edges.get(t);if(!n)throw new L(`Graph.isDirected: could not find the "${t}" edge in the graph.`);return!n.undirected}isSelfLoop(t){t=""+t;const n=this._edges.get(t);if(!n)throw new L(`Graph.isSelfLoop: could not find the "${t}" edge in the graph.`);return n.source===n.target}addNode(t,n){return hd(this,t,n).key}mergeNode(t,n){if(n&&!ye(n))throw new B(`Graph.mergeNode: invalid attributes. Expecting an object but got "${n}"`);t=""+t,n=n||{};let r=this._nodes.get(t);return r?(n&&(he(r.attributes,n),this.emit("nodeAttributesUpdated",{type:"merge",key:t,attributes:r.attributes,data:n})),[t,!1]):(r=new this.NodeDataClass(t,n),this._nodes.set(t,r),this.emit("nodeAdded",{key:t,attributes:n}),[t,!0])}updateNode(t,n){if(n&&typeof n!="function")throw new B(`Graph.updateNode: invalid updater function. Expecting a function but got "${n}"`);t=""+t;let r=this._nodes.get(t);if(r){if(n){const o=r.attributes;r.attributes=n(o),this.emit("nodeAttributesUpdated",{type:"replace",key:t,attributes:r.attributes})}return[t,!1]}const i=n?n({}):{};return r=new this.NodeDataClass(t,i),this._nodes.set(t,r),this.emit("nodeAdded",{key:t,attributes:i}),[t,!0]}dropNode(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new L(`Graph.dropNode: could not find the "${t}" node in the graph.`);let r;if(this.type!=="undirected"){for(const i in n.out){r=n.out[i];do Dt(this,r),r=r.next;while(r)}for(const i in n.in){r=n.in[i];do Dt(this,r),r=r.next;while(r)}}if(this.type!=="directed")for(const i in n.undirected){r=n.undirected[i];do Dt(this,r),r=r.next;while(r)}this._nodes.delete(t),this.emit("nodeDropped",{key:t,attributes:n.attributes})}dropEdge(t){let n;if(arguments.length>1){const r=""+arguments[0],i=""+arguments[1];if(n=Ie(this,r,i,this.type),!n)throw new L(`Graph.dropEdge: could not find the "${r}" -> "${i}" edge in the graph.`)}else if(t=""+t,n=this._edges.get(t),!n)throw new L(`Graph.dropEdge: could not find the "${t}" edge in the graph.`);return Dt(this,n),this}dropDirectedEdge(t,n){if(arguments.length<2)throw new J("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new J("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");t=""+t,n=""+n;const r=Ie(this,t,n,"directed");if(!r)throw new L(`Graph.dropDirectedEdge: could not find a "${t}" -> "${n}" edge in the graph.`);return Dt(this,r),this}dropUndirectedEdge(t,n){if(arguments.length<2)throw new J("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new J("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const r=Ie(this,t,n,"undirected");if(!r)throw new L(`Graph.dropUndirectedEdge: could not find a "${t}" -> "${n}" edge in the graph.`);return Dt(this,r),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const t=this._nodes.values();let n;for(;n=t.next(),n.done!==!0;)n.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(t){return this._attributes[t]}getAttributes(){return this._attributes}hasAttribute(t){return this._attributes.hasOwnProperty(t)}setAttribute(t,n){return this._attributes[t]=n,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:t}),this}updateAttribute(t,n){if(typeof n!="function")throw new B("Graph.updateAttribute: updater should be a function.");const r=this._attributes[t];return this._attributes[t]=n(r),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:t}),this}removeAttribute(t){return delete this._attributes[t],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:t}),this}replaceAttributes(t){if(!ye(t))throw new B("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=t,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(t){if(!ye(t))throw new B("Graph.mergeAttributes: provided attributes are not a plain object.");return he(this._attributes,t),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:t}),this}updateAttributes(t){if(typeof t!="function")throw new B("Graph.updateAttributes: provided updater is not a function.");return this._attributes=t(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(t,n){if(typeof t!="function")throw new B("Graph.updateEachNodeAttributes: expecting an updater function.");if(n&&!Fi(n))throw new B("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._nodes.values();let i,o;for(;i=r.next(),i.done!==!0;)o=i.value,o.attributes=t(o.key,o.attributes);this.emit("eachNodeAttributesUpdated",{hints:n||null})}updateEachEdgeAttributes(t,n){if(typeof t!="function")throw new B("Graph.updateEachEdgeAttributes: expecting an updater function.");if(n&&!Fi(n))throw new B("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._edges.values();let i,o,s,a;for(;i=r.next(),i.done!==!0;)o=i.value,s=o.source,a=o.target,o.attributes=t(o.key,o.attributes,s.key,a.key,s.attributes,a.attributes,o.undirected);this.emit("eachEdgeAttributesUpdated",{hints:n||null})}forEachAdjacencyEntry(t){if(typeof t!="function")throw new B("Graph.forEachAdjacencyEntry: expecting a callback.");Nn(!1,!1,!1,this,t)}forEachAdjacencyEntryWithOrphans(t){if(typeof t!="function")throw new B("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");Nn(!1,!1,!0,this,t)}forEachAssymetricAdjacencyEntry(t){if(typeof t!="function")throw new B("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");Nn(!1,!0,!1,this,t)}forEachAssymetricAdjacencyEntryWithOrphans(t){if(typeof t!="function")throw new B("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");Nn(!1,!0,!0,this,t)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):as(this._nodes.keys(),this._nodes.size)}forEachNode(t){if(typeof t!="function")throw new B("Graph.forEachNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)i=r.value,t(i.key,i.attributes)}findNode(t){if(typeof t!="function")throw new B("Graph.findNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,t(i.key,i.attributes))return i.key}mapNodes(t){if(typeof t!="function")throw new B("Graph.mapNode: expecting a callback.");const n=this._nodes.values();let r,i;const o=new Array(this.order);let s=0;for(;r=n.next(),r.done!==!0;)i=r.value,o[s++]=t(i.key,i.attributes);return o}someNode(t){if(typeof t!="function")throw new B("Graph.someNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,t(i.key,i.attributes))return!0;return!1}everyNode(t){if(typeof t!="function")throw new B("Graph.everyNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,!t(i.key,i.attributes))return!1;return!0}filterNodes(t){if(typeof t!="function")throw new B("Graph.filterNodes: expecting a callback.");const n=this._nodes.values();let r,i;const o=[];for(;r=n.next(),r.done!==!0;)i=r.value,t(i.key,i.attributes)&&o.push(i.key);return o}reduceNodes(t,n){if(typeof t!="function")throw new B("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new B("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let r=n;const i=this._nodes.values();let o,s;for(;o=i.next(),o.done!==!0;)s=o.value,r=t(r,s.key,s.attributes);return r}nodeEntries(){const t=this._nodes.values();return new Ge(()=>{const n=t.next();if(n.done)return n;const r=n.value;return{value:{node:r.key,attributes:r.attributes},done:!1}})}export(){const t=new Array(this._nodes.size);let n=0;this._nodes.forEach((i,o)=>{t[n++]=od(o,i)});const r=new Array(this._edges.size);return n=0,this._edges.forEach((i,o)=>{r[n++]=sd(this.type,o,i)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:t,edges:r}}import(t,n=!1){if(t instanceof Mr)return t.forEachNode((u,c)=>{n?this.mergeNode(u,c):this.addNode(u,c)}),t.forEachEdge((u,c,l,d,f,h,p)=>{n?p?this.mergeUndirectedEdgeWithKey(u,l,d,c):this.mergeDirectedEdgeWithKey(u,l,d,c):p?this.addUndirectedEdgeWithKey(u,l,d,c):this.addDirectedEdgeWithKey(u,l,d,c)}),this;if(!ye(t))throw new B("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(t.attributes){if(!ye(t.attributes))throw new B("Graph.import: invalid attributes. Expecting a plain object.");n?this.mergeAttributes(t.attributes):this.replaceAttributes(t.attributes)}let r,i,o,s,a;if(t.nodes){if(o=t.nodes,!Array.isArray(o))throw new B("Graph.import: invalid nodes. Expecting an array.");for(r=0,i=o.length;r<i;r++){s=o[r],ad(s);const{key:u,attributes:c}=s;n?this.mergeNode(u,c):this.addNode(u,c)}}if(t.edges){let u=!1;if(this.type==="undirected"&&(u=!0),o=t.edges,!Array.isArray(o))throw new B("Graph.import: invalid edges. Expecting an array.");for(r=0,i=o.length;r<i;r++){a=o[r],cd(a);const{source:c,target:l,attributes:d,undirected:f=u}=a;let h;"key"in a?(h=n?f?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:f?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,h.call(this,a.key,c,l,d)):(h=n?f?this.mergeUndirectedEdge:this.mergeDirectedEdge:f?this.addUndirectedEdge:this.addDirectedEdge,h.call(this,c,l,d))}}return this}nullCopy(t){const n=new Mr(he({},this._options,t));return n.replaceAttributes(he({},this.getAttributes())),n}emptyCopy(t){const n=this.nullCopy(t);return this._nodes.forEach((r,i)=>{const o=he({},r.attributes);r=new n.NodeDataClass(i,o),n._nodes.set(i,r)}),n}copy(t){if(t=t||{},typeof t.type=="string"&&t.type!==this.type&&t.type!=="mixed")throw new J(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${t.type}" because this would mean losing information about the current graph.`);if(typeof t.multi=="boolean"&&t.multi!==this.multi&&t.multi!==!0)throw new J("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof t.allowSelfLoops=="boolean"&&t.allowSelfLoops!==this.allowSelfLoops&&t.allowSelfLoops!==!0)throw new J("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const n=this.emptyCopy(t),r=this._edges.values();let i,o;for(;i=r.next(),i.done!==!0;)o=i.value,ys(n,"copy",!1,o.undirected,o.key,o.source.key,o.target.key,he({},o.attributes));return n}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const t={};this._nodes.forEach((o,s)=>{t[s]=o.attributes});const n={},r={};this._edges.forEach((o,s)=>{const a=o.undirected?"--":"->";let u="",c=o.source.key,l=o.target.key,d;o.undirected&&c>l&&(d=c,c=l,l=d);const f=`(${c})${a}(${l})`;s.startsWith("geid_")?this.multi&&(typeof r[f]>"u"?r[f]=0:r[f]++,u+=`${r[f]}. `):u+=`[${s}]: `,u+=f,n[u]=o.attributes});const i={};for(const o in this)this.hasOwnProperty(o)&&!Ui.has(o)&&typeof this[o]!="function"&&typeof o!="symbol"&&(i[o]=this[o]);return i.attributes=this._attributes,i.nodes=t,i.edges=n,Ae(i,"constructor",this.constructor),i}};typeof Symbol<"u"&&(ce.prototype[Symbol.for("nodejs.util.inspect.custom")]=ce.prototype.inspect);dd.forEach(e=>{["add","merge","update"].forEach(t=>{const n=e.name(t),r=t==="add"?ys:pd;e.generateKey?ce.prototype[n]=function(i,o,s){return r(this,n,!0,(e.type||this.type)==="undirected",null,i,o,s,t==="update")}:ce.prototype[n]=function(i,o,s,a){return r(this,n,!1,(e.type||this.type)==="undirected",i,o,s,a,t==="update")}})});Nl(ce);Pl(ce);jl(ce);id(ce);class fi extends ce{constructor(t){const n=he({type:"directed"},t);if("multi"in n&&n.multi!==!1)throw new B("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="directed")throw new B('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class ms extends ce{constructor(t){const n=he({type:"undirected"},t);if("multi"in n&&n.multi!==!1)throw new B("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="undirected")throw new B('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class ws extends ce{constructor(t){const n=he({multi:!0},t);if("multi"in n&&n.multi!==!0)throw new B("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(n)}}class bs extends ce{constructor(t){const n=he({type:"directed",multi:!0},t);if("multi"in n&&n.multi!==!0)throw new B("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="directed")throw new B('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class vs extends ce{constructor(t){const n=he({type:"undirected",multi:!0},t);if("multi"in n&&n.multi!==!0)throw new B("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="undirected")throw new B('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}function Kt(e){e.from=function(t,n){const r=he({},t.options,n),i=new e(r);return i.import(t),i}}Kt(ce);Kt(fi);Kt(ms);Kt(ws);Kt(bs);Kt(vs);ce.Graph=ce;ce.DirectedGraph=fi;ce.UndirectedGraph=ms;ce.MultiGraph=ws;ce.MultiDirectedGraph=bs;ce.MultiUndirectedGraph=vs;ce.InvalidArgumentsGraphError=B;ce.NotFoundGraphError=L;ce.UsageGraphError=J;var gd=function(t){return t!==null&&typeof t=="object"&&typeof t.addUndirectedEdgeWithKey=="function"&&typeof t.dropNode=="function"&&typeof t.multi=="boolean"};const yd=gd,md=void 0,En=0,Wi=1;var wd=function(t){if(!yd(t))throw new Error("graphology-dag/has-cycle: the given graph is not a valid graphology instance.");if(t.size===0)return!1;if(t.selfLoopCount!==0)return!0;const n={},r=[];function i(o){const s=n[o];if(s===md)r.push(o);else if(s===En)return!0;return!1}return t.someNode(o=>{if(n[o]===Wi)return!1;for(r.push(o);r.length!==0;){const s=r[r.length-1],a=n[s];if(a!==En){if(n[s]=En,t.someOutboundNeighbor(s,i))return!0}else a===En&&(r.pop(),n[s]=Wi)}return!1})},mn={},xs=nr,bd=xs.ARRAY_BUFFER_SUPPORT,vd=xs.SYMBOL_SUPPORT,xd=function(t,n){var r,i,o,s,a;if(!t)throw new Error("obliterator/forEach: invalid iterable.");if(typeof n!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(t)||bd&&ArrayBuffer.isView(t)||typeof t=="string"||t.toString()==="[object Arguments]"){for(o=0,s=t.length;o<s;o++)n(t[o],o);return}if(typeof t.forEach=="function"){t.forEach(n);return}if(vd&&Symbol.iterator in t&&typeof t.next!="function"&&(t=t[Symbol.iterator]()),typeof t.next=="function"){for(r=t,o=0;a=r.next(),a.done!==!0;)n(a.value,o),o++;return}for(i in t)t.hasOwnProperty(i)&&n(t[i],i)},_s={};(function(e){var t=Math.pow(2,8)-1,n=Math.pow(2,16)-1,r=Math.pow(2,32)-1,i=Math.pow(2,7)-1,o=Math.pow(2,15)-1,s=Math.pow(2,31)-1;e.getPointerArray=function(u){var c=u-1;if(c<=t)return Uint8Array;if(c<=n)return Uint16Array;if(c<=r)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")},e.getSignedPointerArray=function(u){var c=u-1;return c<=i?Int8Array:c<=o?Int16Array:c<=s?Int32Array:Float64Array},e.getNumberType=function(u){return u===(u|0)?Math.sign(u)===-1?u<=127&&u>=-128?Int8Array:u<=32767&&u>=-32768?Int16Array:Int32Array:u<=255?Uint8Array:u<=65535?Uint16Array:Uint32Array:Float64Array};var a={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};e.getMinimalRepresentation=function(u,c){var l=null,d=0,f,h,p,g,v;for(g=0,v=u.length;g<v;g++)p=c?c(u[g]):u[g],h=e.getNumberType(p),f=a[h.name],f>d&&(d=f,l=h);return l},e.isTypedArray=function(u){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(u)},e.concat=function(){var u=0,c,l,d;for(c=0,d=arguments.length;c<d;c++)u+=arguments[c].length;var f=new arguments[0].constructor(u);for(c=0,l=0;c<d;c++)f.set(arguments[c],l),l+=arguments[c].length;return f},e.indices=function(u){for(var c=e.getPointerArray(u),l=new c(u),d=0;d<u;d++)l[d]=d;return l}})(_s);var Ns=xd,Es=_s;function _d(e){return Array.isArray(e)||Es.isTypedArray(e)}function hi(e){if(typeof e.length=="number")return e.length;if(typeof e.size=="number")return e.size}function Nd(e){var t=hi(e),n=typeof t=="number"?new Array(t):[],r=0;return Ns(e,function(i){n[r++]=i}),n}function Ed(e){var t=hi(e),n=typeof t=="number"?Es.getPointerArray(t):Array,r=typeof t=="number"?new Array(t):[],i=typeof t=="number"?new n(t):[],o=0;return Ns(e,function(s){r[o]=s,i[o]=o++}),[r,i]}mn.isArrayLike=_d;mn.guessLength=hi;mn.toArray=Nd;mn.toArrayWithIndices=Ed;var yr=mn,Ss=tr;function fe(e,t){if(arguments.length<2)throw new Error("mnemonist/fixed-deque: expecting an Array class and a capacity.");if(typeof t!="number"||t<=0)throw new Error("mnemonist/fixed-deque: `capacity` should be a positive number.");this.ArrayClass=e,this.capacity=t,this.items=new e(this.capacity),this.clear()}fe.prototype.clear=function(){this.start=0,this.size=0};fe.prototype.push=function(e){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.push: deque capacity ("+this.capacity+") exceeded!");var t=(this.start+this.size)%this.capacity;return this.items[t]=e,++this.size};fe.prototype.unshift=function(e){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.unshift: deque capacity ("+this.capacity+") exceeded!");var t=this.start-1;return this.start===0&&(t=this.capacity-1),this.items[t]=e,this.start=t,++this.size};fe.prototype.pop=function(){if(this.size===0)return;const e=(this.start+this.size-1)%this.capacity;return this.size--,this.items[e]};fe.prototype.shift=function(){if(this.size!==0){var e=this.start;return this.size--,this.start++,this.start===this.capacity&&(this.start=0),this.items[e]}};fe.prototype.peekFirst=function(){if(this.size!==0)return this.items[this.start]};fe.prototype.peekLast=function(){if(this.size!==0){var e=this.start+this.size-1;return e>this.capacity&&(e-=this.capacity),this.items[e]}};fe.prototype.get=function(e){if(this.size!==0)return e=this.start+e,e>this.capacity&&(e-=this.capacity),this.items[e]};fe.prototype.forEach=function(e,t){t=arguments.length>1?t:this;for(var n=this.capacity,r=this.size,i=this.start,o=0;o<r;)e.call(t,this.items[i],o,this),i++,o++,i===n&&(i=0)};fe.prototype.toArray=function(){var e=this.start+this.size;if(e<this.capacity)return this.items.slice(this.start,e);for(var t=new this.ArrayClass(this.size),n=this.capacity,r=this.size,i=this.start,o=0;o<r;)t[o]=this.items[i],i++,o++,i===n&&(i=0);return t};fe.prototype.values=function(){var e=this.items,t=this.capacity,n=this.size,r=this.start,i=0;return new Ss(function(){if(i>=n)return{done:!0};var o=e[r];return r++,i++,r===t&&(r=0),{value:o,done:!1}})};fe.prototype.entries=function(){var e=this.items,t=this.capacity,n=this.size,r=this.start,i=0;return new Ss(function(){if(i>=n)return{done:!0};var o=e[r];return r++,r===t&&(r=0),{value:[i++,o],done:!1}})};typeof Symbol<"u"&&(fe.prototype[Symbol.iterator]=fe.prototype.values);fe.prototype.inspect=function(){var e=this.toArray();return e.type=this.ArrayClass.name,e.capacity=this.capacity,Object.defineProperty(e,"constructor",{value:fe,enumerable:!1}),e};typeof Symbol<"u"&&(fe.prototype[Symbol.for("nodejs.util.inspect.custom")]=fe.prototype.inspect);fe.from=function(e,t,n){if(arguments.length<3&&(n=yr.guessLength(e),typeof n!="number"))throw new Error("mnemonist/fixed-deque.from: could not guess iterable length. Please provide desired capacity as last argument.");var r=new fe(t,n);if(yr.isArrayLike(e)){var i,o;for(i=0,o=e.length;i<o;i++)r.items[i]=e[i];return r.size=o,r}return yr.forEach(e,function(s){r.push(s)}),r};var Sd=wd;function xe(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=xe(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}const{useSyncExternalStoreWithSelector:$d}=Bc;function $s(e,t=e.getState,n){const r=$d(e.subscribe,e.getState,e.getServerState||e.getState,t,n);return y.useDebugValue(r),r}const Yi=(e,t)=>{const n=Fc(e),r=(i,o=t)=>$s(n,i,o);return Object.assign(r,n),r},Cd=(e,t)=>e?Yi(e,t):Yi;var Ad={value:()=>{}};function ir(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new zn(n)}function zn(e){this._=e}function kd(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}zn.prototype=ir.prototype={constructor:zn,on:function(e,t){var n=this._,r=kd(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=Dd(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=Ki(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Ki(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new zn(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function Dd(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Ki(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Ad,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Tr="http://www.w3.org/1999/xhtml";const Xi={svg:"http://www.w3.org/2000/svg",xhtml:Tr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function or(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Xi.hasOwnProperty(t)?{space:Xi[t],local:e}:e}function Md(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Tr&&t.documentElement.namespaceURI===Tr?t.createElement(e):t.createElementNS(n,e)}}function Td(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Cs(e){var t=or(e);return(t.local?Td:Md)(t)}function Id(){}function pi(e){return e==null?Id:function(){return this.querySelector(e)}}function Pd(e){typeof e!="function"&&(e=pi(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=new Array(s),u,c,l=0;l<s;++l)(u=o[l])&&(c=e.call(u,u.__data__,l,o))&&("__data__"in u&&(c.__data__=u.__data__),a[l]=c);return new Ce(r,this._parents)}function Gd(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function zd(){return[]}function As(e){return e==null?zd:function(){return this.querySelectorAll(e)}}function Rd(e){return function(){return Gd(e.apply(this,arguments))}}function Od(e){typeof e=="function"?e=Rd(e):e=As(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var s=t[o],a=s.length,u,c=0;c<a;++c)(u=s[c])&&(r.push(e.call(u,u.__data__,c,s)),i.push(u));return new Ce(r,i)}function ks(e){return function(){return this.matches(e)}}function Ds(e){return function(t){return t.matches(e)}}var Ld=Array.prototype.find;function Vd(e){return function(){return Ld.call(this.children,e)}}function Hd(){return this.firstElementChild}function Bd(e){return this.select(e==null?Hd:Vd(typeof e=="function"?e:Ds(e)))}var Fd=Array.prototype.filter;function Ud(){return Array.from(this.children)}function qd(e){return function(){return Fd.call(this.children,e)}}function Wd(e){return this.selectAll(e==null?Ud:qd(typeof e=="function"?e:Ds(e)))}function Yd(e){typeof e!="function"&&(e=ks(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],u,c=0;c<s;++c)(u=o[c])&&e.call(u,u.__data__,c,o)&&a.push(u);return new Ce(r,this._parents)}function Ms(e){return new Array(e.length)}function Kd(){return new Ce(this._enter||this._groups.map(Ms),this._parents)}function Bn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Bn.prototype={constructor:Bn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Xd(e){return function(){return e}}function jd(e,t,n,r,i,o){for(var s=0,a,u=t.length,c=o.length;s<c;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new Bn(e,o[s]);for(;s<u;++s)(a=t[s])&&(i[s]=a)}function Zd(e,t,n,r,i,o,s){var a,u,c=new Map,l=t.length,d=o.length,f=new Array(l),h;for(a=0;a<l;++a)(u=t[a])&&(f[a]=h=s.call(u,u.__data__,a,t)+"",c.has(h)?i[a]=u:c.set(h,u));for(a=0;a<d;++a)h=s.call(e,o[a],a,o)+"",(u=c.get(h))?(r[a]=u,u.__data__=o[a],c.delete(h)):n[a]=new Bn(e,o[a]);for(a=0;a<l;++a)(u=t[a])&&c.get(f[a])===u&&(i[a]=u)}function Jd(e){return e.__data__}function Qd(e,t){if(!arguments.length)return Array.from(this,Jd);var n=t?Zd:jd,r=this._parents,i=this._groups;typeof e!="function"&&(e=Xd(e));for(var o=i.length,s=new Array(o),a=new Array(o),u=new Array(o),c=0;c<o;++c){var l=r[c],d=i[c],f=d.length,h=ef(e.call(l,l&&l.__data__,c,r)),p=h.length,g=a[c]=new Array(p),v=s[c]=new Array(p),m=u[c]=new Array(f);n(l,d,g,v,m,h,t);for(var N=0,$=0,x,k;N<p;++N)if(x=g[N]){for(N>=$&&($=N+1);!(k=v[$])&&++$<p;);x._next=k||null}}return s=new Ce(s,r),s._enter=a,s._exit=u,s}function ef(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function tf(){return new Ce(this._exit||this._groups.map(Ms),this._parents)}function nf(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function rf(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),u=0;u<s;++u)for(var c=n[u],l=r[u],d=c.length,f=a[u]=new Array(d),h,p=0;p<d;++p)(h=c[p]||l[p])&&(f[p]=h);for(;u<i;++u)a[u]=n[u];return new Ce(a,this._parents)}function of(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function sf(e){e||(e=af);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,u=i[o]=new Array(a),c,l=0;l<a;++l)(c=s[l])&&(u[l]=c);u.sort(t)}return new Ce(i,this._parents).order()}function af(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function cf(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function uf(){return Array.from(this)}function lf(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function df(){let e=0;for(const t of this)++e;return e}function ff(){return!this.node()}function hf(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this}function pf(e){return function(){this.removeAttribute(e)}}function gf(e){return function(){this.removeAttributeNS(e.space,e.local)}}function yf(e,t){return function(){this.setAttribute(e,t)}}function mf(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function wf(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function bf(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function vf(e,t){var n=or(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?gf:pf:typeof t=="function"?n.local?bf:wf:n.local?mf:yf)(n,t))}function Ts(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function xf(e){return function(){this.style.removeProperty(e)}}function _f(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Nf(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Ef(e,t,n){return arguments.length>1?this.each((t==null?xf:typeof t=="function"?Nf:_f)(e,t,n??"")):Bt(this.node(),e)}function Bt(e,t){return e.style.getPropertyValue(t)||Ts(e).getComputedStyle(e,null).getPropertyValue(t)}function Sf(e){return function(){delete this[e]}}function $f(e,t){return function(){this[e]=t}}function Cf(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Af(e,t){return arguments.length>1?this.each((t==null?Sf:typeof t=="function"?Cf:$f)(e,t)):this.node()[e]}function Is(e){return e.trim().split(/^|\s+/)}function gi(e){return e.classList||new Ps(e)}function Ps(e){this._node=e,this._names=Is(e.getAttribute("class")||"")}Ps.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Gs(e,t){for(var n=gi(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function zs(e,t){for(var n=gi(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function kf(e){return function(){Gs(this,e)}}function Df(e){return function(){zs(this,e)}}function Mf(e,t){return function(){(t.apply(this,arguments)?Gs:zs)(this,e)}}function Tf(e,t){var n=Is(e+"");if(arguments.length<2){for(var r=gi(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Mf:t?kf:Df)(n,t))}function If(){this.textContent=""}function Pf(e){return function(){this.textContent=e}}function Gf(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function zf(e){return arguments.length?this.each(e==null?If:(typeof e=="function"?Gf:Pf)(e)):this.node().textContent}function Rf(){this.innerHTML=""}function Of(e){return function(){this.innerHTML=e}}function Lf(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Vf(e){return arguments.length?this.each(e==null?Rf:(typeof e=="function"?Lf:Of)(e)):this.node().innerHTML}function Hf(){this.nextSibling&&this.parentNode.appendChild(this)}function Bf(){return this.each(Hf)}function Ff(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Uf(){return this.each(Ff)}function qf(e){var t=typeof e=="function"?e:Cs(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Wf(){return null}function Yf(e,t){var n=typeof e=="function"?e:Cs(e),r=t==null?Wf:typeof t=="function"?t:pi(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Kf(){var e=this.parentNode;e&&e.removeChild(this)}function Xf(){return this.each(Kf)}function jf(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Zf(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Jf(e){return this.select(e?Zf:jf)}function Qf(e){return arguments.length?this.property("__data__",e):this.node().__data__}function eh(e){return function(t){e.call(this,t,this.__data__)}}function th(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function nh(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function rh(e,t,n){return function(){var r=this.__on,i,o=eh(t);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function ih(e,t,n){var r=th(e+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,c=a.length,l;u<c;++u)for(i=0,l=a[u];i<o;++i)if((s=r[i]).type===l.type&&s.name===l.name)return l.value}return}for(a=t?rh:nh,i=0;i<o;++i)this.each(a(r[i],t,n));return this}function Rs(e,t,n){var r=Ts(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function oh(e,t){return function(){return Rs(this,e,t)}}function sh(e,t){return function(){return Rs(this,e,t.apply(this,arguments))}}function ah(e,t){return this.each((typeof t=="function"?sh:oh)(e,t))}function*ch(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var Os=[null];function Ce(e,t){this._groups=e,this._parents=t}function wn(){return new Ce([[document.documentElement]],Os)}function uh(){return this}Ce.prototype=wn.prototype={constructor:Ce,select:Pd,selectAll:Od,selectChild:Bd,selectChildren:Wd,filter:Yd,data:Qd,enter:Kd,exit:tf,join:nf,merge:rf,selection:uh,order:of,sort:sf,call:cf,nodes:uf,node:lf,size:df,empty:ff,each:hf,attr:vf,style:Ef,property:Af,classed:Tf,text:zf,html:Vf,raise:Bf,lower:Uf,append:qf,insert:Yf,remove:Xf,clone:Jf,datum:Qf,on:ih,dispatch:ah,[Symbol.iterator]:ch};function Re(e){return typeof e=="string"?new Ce([[document.querySelector(e)]],[document.documentElement]):new Ce([[e]],Os)}function lh(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Fe(e,t){if(e=lh(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const dh={passive:!1},ln={capture:!0,passive:!1};function mr(e){e.stopImmediatePropagation()}function Ot(e){e.preventDefault(),e.stopImmediatePropagation()}function Ls(e){var t=e.document.documentElement,n=Re(e).on("dragstart.drag",Ot,ln);"onselectstart"in t?n.on("selectstart.drag",Ot,ln):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Vs(e,t){var n=e.document.documentElement,r=Re(e).on("dragstart.drag",null);t&&(r.on("click.drag",Ot,ln),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Sn=e=>()=>e;function Ir(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:o,x:s,y:a,dx:u,dy:c,dispatch:l}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:l}})}Ir.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function fh(e){return!e.ctrlKey&&!e.button}function hh(){return this.parentNode}function ph(e,t){return t??{x:e.x,y:e.y}}function gh(){return navigator.maxTouchPoints||"ontouchstart"in this}function yh(){var e=fh,t=hh,n=ph,r=gh,i={},o=ir("start","drag","end"),s=0,a,u,c,l,d=0;function f(x){x.on("mousedown.drag",h).filter(r).on("touchstart.drag",v).on("touchmove.drag",m,dh).on("touchend.drag touchcancel.drag",N).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(x,k){if(!(l||!e.call(this,x,k))){var E=$(this,t.call(this,x,k),x,k,"mouse");E&&(Re(x.view).on("mousemove.drag",p,ln).on("mouseup.drag",g,ln),Ls(x.view),mr(x),c=!1,a=x.clientX,u=x.clientY,E("start",x))}}function p(x){if(Ot(x),!c){var k=x.clientX-a,E=x.clientY-u;c=k*k+E*E>d}i.mouse("drag",x)}function g(x){Re(x.view).on("mousemove.drag mouseup.drag",null),Vs(x.view,c),Ot(x),i.mouse("end",x)}function v(x,k){if(e.call(this,x,k)){var E=x.changedTouches,C=t.call(this,x,k),I=E.length,G,H;for(G=0;G<I;++G)(H=$(this,C,x,k,E[G].identifier,E[G]))&&(mr(x),H("start",x,E[G]))}}function m(x){var k=x.changedTouches,E=k.length,C,I;for(C=0;C<E;++C)(I=i[k[C].identifier])&&(Ot(x),I("drag",x,k[C]))}function N(x){var k=x.changedTouches,E=k.length,C,I;for(l&&clearTimeout(l),l=setTimeout(function(){l=null},500),C=0;C<E;++C)(I=i[k[C].identifier])&&(mr(x),I("end",x,k[C]))}function $(x,k,E,C,I,G){var H=o.copy(),z=Fe(G||E,k),V,M,b;if((b=n.call(x,new Ir("beforestart",{sourceEvent:E,target:f,identifier:I,active:s,x:z[0],y:z[1],dx:0,dy:0,dispatch:H}),C))!=null)return V=b.x-z[0]||0,M=b.y-z[1]||0,function D(S,P,R){var _=z,T;switch(S){case"start":i[I]=D,T=s++;break;case"end":delete i[I],--s;case"drag":z=Fe(R||P,k),T=s;break}H.call(S,x,new Ir(S,{sourceEvent:P,subject:b,target:f,identifier:I,active:T,x:z[0]+V,y:z[1]+M,dx:z[0]-_[0],dy:z[1]-_[1],dispatch:H}),C)}}return f.filter=function(x){return arguments.length?(e=typeof x=="function"?x:Sn(!!x),f):e},f.container=function(x){return arguments.length?(t=typeof x=="function"?x:Sn(x),f):t},f.subject=function(x){return arguments.length?(n=typeof x=="function"?x:Sn(x),f):n},f.touchable=function(x){return arguments.length?(r=typeof x=="function"?x:Sn(!!x),f):r},f.on=function(){var x=o.on.apply(o,arguments);return x===o?f:x},f.clickDistance=function(x){return arguments.length?(d=(x=+x)*x,f):Math.sqrt(d)},f}function yi(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Hs(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function bn(){}var dn=.7,Fn=1/dn,Lt="\\s*([+-]?\\d+)\\s*",fn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ue="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",mh=/^#([0-9a-f]{3,8})$/,wh=new RegExp(`^rgb\\(${Lt},${Lt},${Lt}\\)$`),bh=new RegExp(`^rgb\\(${Ue},${Ue},${Ue}\\)$`),vh=new RegExp(`^rgba\\(${Lt},${Lt},${Lt},${fn}\\)$`),xh=new RegExp(`^rgba\\(${Ue},${Ue},${Ue},${fn}\\)$`),_h=new RegExp(`^hsl\\(${fn},${Ue},${Ue}\\)$`),Nh=new RegExp(`^hsla\\(${fn},${Ue},${Ue},${fn}\\)$`),ji={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};yi(bn,hn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Zi,formatHex:Zi,formatHex8:Eh,formatHsl:Sh,formatRgb:Ji,toString:Ji});function Zi(){return this.rgb().formatHex()}function Eh(){return this.rgb().formatHex8()}function Sh(){return Bs(this).formatHsl()}function Ji(){return this.rgb().formatRgb()}function hn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=mh.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Qi(t):n===3?new Ee(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?$n(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?$n(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=wh.exec(e))?new Ee(t[1],t[2],t[3],1):(t=bh.exec(e))?new Ee(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=vh.exec(e))?$n(t[1],t[2],t[3],t[4]):(t=xh.exec(e))?$n(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=_h.exec(e))?no(t[1],t[2]/100,t[3]/100,1):(t=Nh.exec(e))?no(t[1],t[2]/100,t[3]/100,t[4]):ji.hasOwnProperty(e)?Qi(ji[e]):e==="transparent"?new Ee(NaN,NaN,NaN,0):null}function Qi(e){return new Ee(e>>16&255,e>>8&255,e&255,1)}function $n(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ee(e,t,n,r)}function $h(e){return e instanceof bn||(e=hn(e)),e?(e=e.rgb(),new Ee(e.r,e.g,e.b,e.opacity)):new Ee}function Pr(e,t,n,r){return arguments.length===1?$h(e):new Ee(e,t,n,r??1)}function Ee(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}yi(Ee,Pr,Hs(bn,{brighter(e){return e=e==null?Fn:Math.pow(Fn,e),new Ee(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?dn:Math.pow(dn,e),new Ee(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ee(_t(this.r),_t(this.g),_t(this.b),Un(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:eo,formatHex:eo,formatHex8:Ch,formatRgb:to,toString:to}));function eo(){return`#${vt(this.r)}${vt(this.g)}${vt(this.b)}`}function Ch(){return`#${vt(this.r)}${vt(this.g)}${vt(this.b)}${vt((isNaN(this.opacity)?1:this.opacity)*255)}`}function to(){const e=Un(this.opacity);return`${e===1?"rgb(":"rgba("}${_t(this.r)}, ${_t(this.g)}, ${_t(this.b)}${e===1?")":`, ${e})`}`}function Un(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function _t(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function vt(e){return e=_t(e),(e<16?"0":"")+e.toString(16)}function no(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Oe(e,t,n,r)}function Bs(e){if(e instanceof Oe)return new Oe(e.h,e.s,e.l,e.opacity);if(e instanceof bn||(e=hn(e)),!e)return new Oe;if(e instanceof Oe)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,u=(o+i)/2;return a?(t===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-t)/a+2:s=(t-n)/a+4,a/=u<.5?o+i:2-o-i,s*=60):a=u>0&&u<1?0:s,new Oe(s,a,u,e.opacity)}function Ah(e,t,n,r){return arguments.length===1?Bs(e):new Oe(e,t,n,r??1)}function Oe(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}yi(Oe,Ah,Hs(bn,{brighter(e){return e=e==null?Fn:Math.pow(Fn,e),new Oe(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?dn:Math.pow(dn,e),new Oe(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Ee(wr(e>=240?e-240:e+120,i,r),wr(e,i,r),wr(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Oe(ro(this.h),Cn(this.s),Cn(this.l),Un(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Un(this.opacity);return`${e===1?"hsl(":"hsla("}${ro(this.h)}, ${Cn(this.s)*100}%, ${Cn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ro(e){return e=(e||0)%360,e<0?e+360:e}function Cn(e){return Math.max(0,Math.min(1,e||0))}function wr(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Fs=e=>()=>e;function kh(e,t){return function(n){return e+n*t}}function Dh(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Mh(e){return(e=+e)==1?Us:function(t,n){return n-t?Dh(t,n,e):Fs(isNaN(t)?n:t)}}function Us(e,t){var n=t-e;return n?kh(e,n):Fs(isNaN(e)?t:e)}const io=function e(t){var n=Mh(t);function r(i,o){var s=n((i=Pr(i)).r,(o=Pr(o)).r),a=n(i.g,o.g),u=n(i.b,o.b),c=Us(i.opacity,o.opacity);return function(l){return i.r=s(l),i.g=a(l),i.b=u(l),i.opacity=c(l),i+""}}return r.gamma=e,r}(1);function rt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Gr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,br=new RegExp(Gr.source,"g");function Th(e){return function(){return e}}function Ih(e){return function(t){return e(t)+""}}function Ph(e,t){var n=Gr.lastIndex=br.lastIndex=0,r,i,o,s=-1,a=[],u=[];for(e=e+"",t=t+"";(r=Gr.exec(e))&&(i=br.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,u.push({i:s,x:rt(r,i)})),n=br.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?u[0]?Ih(u[0].x):Th(t):(t=u.length,function(c){for(var l=0,d;l<t;++l)a[(d=u[l]).i]=d.x(c);return a.join("")})}var oo=180/Math.PI,zr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function qs(e,t,n,r,i,o){var s,a,u;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*oo,skewX:Math.atan(u)*oo,scaleX:s,scaleY:a}}var An;function Gh(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?zr:qs(t.a,t.b,t.c,t.d,t.e,t.f)}function zh(e){return e==null||(An||(An=document.createElementNS("http://www.w3.org/2000/svg","g")),An.setAttribute("transform",e),!(e=An.transform.baseVal.consolidate()))?zr:(e=e.matrix,qs(e.a,e.b,e.c,e.d,e.e,e.f))}function Ws(e,t,n,r){function i(c){return c.length?c.pop()+" ":""}function o(c,l,d,f,h,p){if(c!==d||l!==f){var g=h.push("translate(",null,t,null,n);p.push({i:g-4,x:rt(c,d)},{i:g-2,x:rt(l,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function s(c,l,d,f){c!==l?(c-l>180?l+=360:l-c>180&&(c+=360),f.push({i:d.push(i(d)+"rotate(",null,r)-2,x:rt(c,l)})):l&&d.push(i(d)+"rotate("+l+r)}function a(c,l,d,f){c!==l?f.push({i:d.push(i(d)+"skewX(",null,r)-2,x:rt(c,l)}):l&&d.push(i(d)+"skewX("+l+r)}function u(c,l,d,f,h,p){if(c!==d||l!==f){var g=h.push(i(h)+"scale(",null,",",null,")");p.push({i:g-4,x:rt(c,d)},{i:g-2,x:rt(l,f)})}else(d!==1||f!==1)&&h.push(i(h)+"scale("+d+","+f+")")}return function(c,l){var d=[],f=[];return c=e(c),l=e(l),o(c.translateX,c.translateY,l.translateX,l.translateY,d,f),s(c.rotate,l.rotate,d,f),a(c.skewX,l.skewX,d,f),u(c.scaleX,c.scaleY,l.scaleX,l.scaleY,d,f),c=l=null,function(h){for(var p=-1,g=f.length,v;++p<g;)d[(v=f[p]).i]=v.x(h);return d.join("")}}}var Rh=Ws(Gh,"px, ","px)","deg)"),Oh=Ws(zh,", ",")",")"),Lh=1e-12;function so(e){return((e=Math.exp(e))+1/e)/2}function Vh(e){return((e=Math.exp(e))-1/e)/2}function Hh(e){return((e=Math.exp(2*e))-1)/(e+1)}const Bh=function e(t,n,r){function i(o,s){var a=o[0],u=o[1],c=o[2],l=s[0],d=s[1],f=s[2],h=l-a,p=d-u,g=h*h+p*p,v,m;if(g<Lh)m=Math.log(f/c)/t,v=function(C){return[a+C*h,u+C*p,c*Math.exp(t*C*m)]};else{var N=Math.sqrt(g),$=(f*f-c*c+r*g)/(2*c*n*N),x=(f*f-c*c-r*g)/(2*f*n*N),k=Math.log(Math.sqrt($*$+1)-$),E=Math.log(Math.sqrt(x*x+1)-x);m=(E-k)/t,v=function(C){var I=C*m,G=so(k),H=c/(n*N)*(G*Hh(t*I+k)-Vh(k));return[a+H*h,u+H*p,c*G/so(t*I+k)]}}return v.duration=m*1e3*t/Math.SQRT2,v}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,u=a*a;return e(s,a,u)},i}(Math.SQRT2,2,4);var Ft=0,on=0,Qt=0,Ys=1e3,qn,sn,Wn=0,Et=0,sr=0,pn=typeof performance=="object"&&performance.now?performance:Date,Ks=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function mi(){return Et||(Ks(Fh),Et=pn.now()+sr)}function Fh(){Et=0}function Yn(){this._call=this._time=this._next=null}Yn.prototype=Xs.prototype={constructor:Yn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?mi():+n)+(t==null?0:+t),!this._next&&sn!==this&&(sn?sn._next=this:qn=this,sn=this),this._call=e,this._time=n,Rr()},stop:function(){this._call&&(this._call=null,this._time=1/0,Rr())}};function Xs(e,t,n){var r=new Yn;return r.restart(e,t,n),r}function Uh(){mi(),++Ft;for(var e=qn,t;e;)(t=Et-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ft}function ao(){Et=(Wn=pn.now())+sr,Ft=on=0;try{Uh()}finally{Ft=0,Wh(),Et=0}}function qh(){var e=pn.now(),t=e-Wn;t>Ys&&(sr-=t,Wn=e)}function Wh(){for(var e,t=qn,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:qn=n);sn=e,Rr(r)}function Rr(e){if(!Ft){on&&(on=clearTimeout(on));var t=e-Et;t>24?(e<1/0&&(on=setTimeout(ao,e-pn.now()-sr)),Qt&&(Qt=clearInterval(Qt))):(Qt||(Wn=pn.now(),Qt=setInterval(qh,Ys)),Ft=1,Ks(ao))}}function co(e,t,n){var r=new Yn;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Yh=ir("start","end","cancel","interrupt"),Kh=[],js=0,uo=1,Or=2,Rn=3,lo=4,Lr=5,On=6;function ar(e,t,n,r,i,o){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;Xh(e,n,{name:t,index:r,group:i,on:Yh,tween:Kh,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:js})}function wi(e,t){var n=He(e,t);if(n.state>js)throw new Error("too late; already scheduled");return n}function We(e,t){var n=He(e,t);if(n.state>Rn)throw new Error("too late; already running");return n}function He(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Xh(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Xs(o,0,n.time);function o(c){n.state=uo,n.timer.restart(s,n.delay,n.time),n.delay<=c&&s(c-n.delay)}function s(c){var l,d,f,h;if(n.state!==uo)return u();for(l in r)if(h=r[l],h.name===n.name){if(h.state===Rn)return co(s);h.state===lo?(h.state=On,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[l]):+l<t&&(h.state=On,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[l])}if(co(function(){n.state===Rn&&(n.state=lo,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=Or,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Or){for(n.state=Rn,i=new Array(f=n.tween.length),l=0,d=-1;l<f;++l)(h=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=h);i.length=d+1}}function a(c){for(var l=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(u),n.state=Lr,1),d=-1,f=i.length;++d<f;)i[d].call(e,l);n.state===Lr&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=On,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function Ln(e,t){var n=e.__transition,r,i,o=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){o=!1;continue}i=r.state>Or&&r.state<Lr,r.state=On,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}o&&delete e.__transition}}function jh(e){return this.each(function(){Ln(this,e)})}function Zh(e,t){var n,r;return function(){var i=We(this,e),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function Jh(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=We(this,e),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:t,value:n},u=0,c=i.length;u<c;++u)if(i[u].name===t){i[u]=a;break}u===c&&i.push(a)}o.tween=i}}function Qh(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=He(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===e)return s.value;return null}return this.each((t==null?Zh:Jh)(n,e,t))}function bi(e,t,n){var r=e._id;return e.each(function(){var i=We(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return He(i,r).value[t]}}function Zs(e,t){var n;return(typeof t=="number"?rt:t instanceof hn?io:(n=hn(t))?(t=n,io):Ph)(e,t)}function ep(e){return function(){this.removeAttribute(e)}}function tp(e){return function(){this.removeAttributeNS(e.space,e.local)}}function np(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttribute(e);return s===i?null:s===r?o:o=t(r=s,n)}}function rp(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===r?o:o=t(r=s,n)}}function ip(e,t,n){var r,i,o;return function(){var s,a=n(this),u;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),u=a+"",s===u?null:s===r&&u===i?o:(i=u,o=t(r=s,a)))}}function op(e,t,n){var r,i,o;return function(){var s,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),u=a+"",s===u?null:s===r&&u===i?o:(i=u,o=t(r=s,a)))}}function sp(e,t){var n=or(e),r=n==="transform"?Oh:Zs;return this.attrTween(e,typeof t=="function"?(n.local?op:ip)(n,r,bi(this,"attr."+e,t)):t==null?(n.local?tp:ep)(n):(n.local?rp:np)(n,r,t))}function ap(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function cp(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function up(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&cp(e,o)),n}return i._value=t,i}function lp(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&ap(e,o)),n}return i._value=t,i}function dp(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=or(e);return this.tween(n,(r.local?up:lp)(r,t))}function fp(e,t){return function(){wi(this,e).delay=+t.apply(this,arguments)}}function hp(e,t){return t=+t,function(){wi(this,e).delay=t}}function pp(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?fp:hp)(t,e)):He(this.node(),t).delay}function gp(e,t){return function(){We(this,e).duration=+t.apply(this,arguments)}}function yp(e,t){return t=+t,function(){We(this,e).duration=t}}function mp(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?gp:yp)(t,e)):He(this.node(),t).duration}function wp(e,t){if(typeof t!="function")throw new Error;return function(){We(this,e).ease=t}}function bp(e){var t=this._id;return arguments.length?this.each(wp(t,e)):He(this.node(),t).ease}function vp(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;We(this,e).ease=n}}function xp(e){if(typeof e!="function")throw new Error;return this.each(vp(this._id,e))}function _p(e){typeof e!="function"&&(e=ks(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],u,c=0;c<s;++c)(u=o[c])&&e.call(u,u.__data__,c,o)&&a.push(u);return new je(r,this._parents,this._name,this._id)}function Np(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var u=t[a],c=n[a],l=u.length,d=s[a]=new Array(l),f,h=0;h<l;++h)(f=u[h]||c[h])&&(d[h]=f);for(;a<r;++a)s[a]=t[a];return new je(s,this._parents,this._name,this._id)}function Ep(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Sp(e,t,n){var r,i,o=Ep(t)?wi:We;return function(){var s=o(this,e),a=s.on;a!==r&&(i=(r=a).copy()).on(t,n),s.on=i}}function $p(e,t){var n=this._id;return arguments.length<2?He(this.node(),n).on.on(e):this.each(Sp(n,e,t))}function Cp(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Ap(){return this.on("end.remove",Cp(this._id))}function kp(e){var t=this._name,n=this._id;typeof e!="function"&&(e=pi(e));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],u=a.length,c=o[s]=new Array(u),l,d,f=0;f<u;++f)(l=a[f])&&(d=e.call(l,l.__data__,f,a))&&("__data__"in l&&(d.__data__=l.__data__),c[f]=d,ar(c[f],t,n,f,c,He(l,n)));return new je(o,this._parents,t,n)}function Dp(e){var t=this._name,n=this._id;typeof e!="function"&&(e=As(e));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var u=r[a],c=u.length,l,d=0;d<c;++d)if(l=u[d]){for(var f=e.call(l,l.__data__,d,u),h,p=He(l,n),g=0,v=f.length;g<v;++g)(h=f[g])&&ar(h,t,n,g,f,p);o.push(f),s.push(l)}return new je(o,s,t,n)}var Mp=wn.prototype.constructor;function Tp(){return new Mp(this._groups,this._parents)}function Ip(e,t){var n,r,i;return function(){var o=Bt(this,e),s=(this.style.removeProperty(e),Bt(this,e));return o===s?null:o===n&&s===r?i:i=t(n=o,r=s)}}function Js(e){return function(){this.style.removeProperty(e)}}function Pp(e,t,n){var r,i=n+"",o;return function(){var s=Bt(this,e);return s===i?null:s===r?o:o=t(r=s,n)}}function Gp(e,t,n){var r,i,o;return function(){var s=Bt(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),Bt(this,e))),s===u?null:s===r&&u===i?o:(i=u,o=t(r=s,a))}}function zp(e,t){var n,r,i,o="style."+t,s="end."+o,a;return function(){var u=We(this,e),c=u.on,l=u.value[o]==null?a||(a=Js(t)):void 0;(c!==n||i!==l)&&(r=(n=c).copy()).on(s,i=l),u.on=r}}function Rp(e,t,n){var r=(e+="")=="transform"?Rh:Zs;return t==null?this.styleTween(e,Ip(e,r)).on("end.style."+e,Js(e)):typeof t=="function"?this.styleTween(e,Gp(e,r,bi(this,"style."+e,t))).each(zp(this._id,e)):this.styleTween(e,Pp(e,r,t),n).on("end.style."+e,null)}function Op(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Lp(e,t,n){var r,i;function o(){var s=t.apply(this,arguments);return s!==i&&(r=(i=s)&&Op(e,s,n)),r}return o._value=t,o}function Vp(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Lp(e,t,n??""))}function Hp(e){return function(){this.textContent=e}}function Bp(e){return function(){var t=e(this);this.textContent=t??""}}function Fp(e){return this.tween("text",typeof e=="function"?Bp(bi(this,"text",e)):Hp(e==null?"":e+""))}function Up(e){return function(t){this.textContent=e.call(this,t)}}function qp(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Up(i)),t}return r._value=e,r}function Wp(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,qp(e))}function Yp(){for(var e=this._name,t=this._id,n=Qs(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,u,c=0;c<a;++c)if(u=s[c]){var l=He(u,t);ar(u,e,n,c,s,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new je(r,this._parents,e,n)}function Kp(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},u={value:function(){--i===0&&o()}};n.each(function(){var c=We(this,r),l=c.on;l!==e&&(t=(e=l).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),c.on=t}),i===0&&o()})}var Xp=0;function je(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Qs(){return++Xp}var Ye=wn.prototype;je.prototype={constructor:je,select:kp,selectAll:Dp,selectChild:Ye.selectChild,selectChildren:Ye.selectChildren,filter:_p,merge:Np,selection:Tp,transition:Yp,call:Ye.call,nodes:Ye.nodes,node:Ye.node,size:Ye.size,empty:Ye.empty,each:Ye.each,on:$p,attr:sp,attrTween:dp,style:Rp,styleTween:Vp,text:Fp,textTween:Wp,remove:Ap,tween:Qh,delay:pp,duration:mp,ease:bp,easeVarying:xp,end:Kp,[Symbol.iterator]:Ye[Symbol.iterator]};function jp(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Zp={time:null,delay:0,duration:250,ease:jp};function Jp(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Qp(e){var t,n;e instanceof je?(t=e._id,e=e._name):(t=Qs(),(n=Zp).time=mi(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,u,c=0;c<a;++c)(u=s[c])&&ar(u,e,t,c,s,n||Jp(u,t));return new je(r,this._parents,e,t)}wn.prototype.interrupt=jh;wn.prototype.transition=Qp;const kn=e=>()=>e;function eg(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Ke(e,t,n){this.k=e,this.x=t,this.y=n}Ke.prototype={constructor:Ke,scale:function(e){return e===1?this:new Ke(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ke(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ct=new Ke(1,0,0);Ke.prototype;function vr(e){e.stopImmediatePropagation()}function en(e){e.preventDefault(),e.stopImmediatePropagation()}function tg(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function ng(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function fo(){return this.__zoom||ct}function rg(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function ig(){return navigator.maxTouchPoints||"ontouchstart"in this}function og(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function sg(){var e=tg,t=ng,n=og,r=rg,i=ig,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,u=Bh,c=ir("start","zoom","end"),l,d,f,h=500,p=150,g=0,v=10;function m(b){b.property("__zoom",fo).on("wheel.zoom",I,{passive:!1}).on("mousedown.zoom",G).on("dblclick.zoom",H).filter(i).on("touchstart.zoom",z).on("touchmove.zoom",V).on("touchend.zoom touchcancel.zoom",M).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(b,D,S,P){var R=b.selection?b.selection():b;R.property("__zoom",fo),b!==R?k(b,D,S,P):R.interrupt().each(function(){E(this,arguments).event(P).start().zoom(null,typeof D=="function"?D.apply(this,arguments):D).end()})},m.scaleBy=function(b,D,S,P){m.scaleTo(b,function(){var R=this.__zoom.k,_=typeof D=="function"?D.apply(this,arguments):D;return R*_},S,P)},m.scaleTo=function(b,D,S,P){m.transform(b,function(){var R=t.apply(this,arguments),_=this.__zoom,T=S==null?x(R):typeof S=="function"?S.apply(this,arguments):S,O=_.invert(T),U=typeof D=="function"?D.apply(this,arguments):D;return n($(N(_,U),T,O),R,s)},S,P)},m.translateBy=function(b,D,S,P){m.transform(b,function(){return n(this.__zoom.translate(typeof D=="function"?D.apply(this,arguments):D,typeof S=="function"?S.apply(this,arguments):S),t.apply(this,arguments),s)},null,P)},m.translateTo=function(b,D,S,P,R){m.transform(b,function(){var _=t.apply(this,arguments),T=this.__zoom,O=P==null?x(_):typeof P=="function"?P.apply(this,arguments):P;return n(ct.translate(O[0],O[1]).scale(T.k).translate(typeof D=="function"?-D.apply(this,arguments):-D,typeof S=="function"?-S.apply(this,arguments):-S),_,s)},P,R)};function N(b,D){return D=Math.max(o[0],Math.min(o[1],D)),D===b.k?b:new Ke(D,b.x,b.y)}function $(b,D,S){var P=D[0]-S[0]*b.k,R=D[1]-S[1]*b.k;return P===b.x&&R===b.y?b:new Ke(b.k,P,R)}function x(b){return[(+b[0][0]+ +b[1][0])/2,(+b[0][1]+ +b[1][1])/2]}function k(b,D,S,P){b.on("start.zoom",function(){E(this,arguments).event(P).start()}).on("interrupt.zoom end.zoom",function(){E(this,arguments).event(P).end()}).tween("zoom",function(){var R=this,_=arguments,T=E(R,_).event(P),O=t.apply(R,_),U=S==null?x(O):typeof S=="function"?S.apply(R,_):S,K=Math.max(O[1][0]-O[0][0],O[1][1]-O[0][1]),j=R.__zoom,ee=typeof D=="function"?D.apply(R,_):D,re=u(j.invert(U).concat(K/j.k),ee.invert(U).concat(K/ee.k));return function(ie){if(ie===1)ie=ee;else{var oe=re(ie),ae=K/oe[2];ie=new Ke(ae,U[0]-oe[0]*ae,U[1]-oe[1]*ae)}T.zoom(null,ie)}})}function E(b,D,S){return!S&&b.__zooming||new C(b,D)}function C(b,D){this.that=b,this.args=D,this.active=0,this.sourceEvent=null,this.extent=t.apply(b,D),this.taps=0}C.prototype={event:function(b){return b&&(this.sourceEvent=b),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(b,D){return this.mouse&&b!=="mouse"&&(this.mouse[1]=D.invert(this.mouse[0])),this.touch0&&b!=="touch"&&(this.touch0[1]=D.invert(this.touch0[0])),this.touch1&&b!=="touch"&&(this.touch1[1]=D.invert(this.touch1[0])),this.that.__zoom=D,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(b){var D=Re(this.that).datum();c.call(b,this.that,new eg(b,{sourceEvent:this.sourceEvent,target:m,type:b,transform:this.that.__zoom,dispatch:c}),D)}};function I(b,...D){if(!e.apply(this,arguments))return;var S=E(this,D).event(b),P=this.__zoom,R=Math.max(o[0],Math.min(o[1],P.k*Math.pow(2,r.apply(this,arguments)))),_=Fe(b);if(S.wheel)(S.mouse[0][0]!==_[0]||S.mouse[0][1]!==_[1])&&(S.mouse[1]=P.invert(S.mouse[0]=_)),clearTimeout(S.wheel);else{if(P.k===R)return;S.mouse=[_,P.invert(_)],Ln(this),S.start()}en(b),S.wheel=setTimeout(T,p),S.zoom("mouse",n($(N(P,R),S.mouse[0],S.mouse[1]),S.extent,s));function T(){S.wheel=null,S.end()}}function G(b,...D){if(f||!e.apply(this,arguments))return;var S=b.currentTarget,P=E(this,D,!0).event(b),R=Re(b.view).on("mousemove.zoom",U,!0).on("mouseup.zoom",K,!0),_=Fe(b,S),T=b.clientX,O=b.clientY;Ls(b.view),vr(b),P.mouse=[_,this.__zoom.invert(_)],Ln(this),P.start();function U(j){if(en(j),!P.moved){var ee=j.clientX-T,re=j.clientY-O;P.moved=ee*ee+re*re>g}P.event(j).zoom("mouse",n($(P.that.__zoom,P.mouse[0]=Fe(j,S),P.mouse[1]),P.extent,s))}function K(j){R.on("mousemove.zoom mouseup.zoom",null),Vs(j.view,P.moved),en(j),P.event(j).end()}}function H(b,...D){if(e.apply(this,arguments)){var S=this.__zoom,P=Fe(b.changedTouches?b.changedTouches[0]:b,this),R=S.invert(P),_=S.k*(b.shiftKey?.5:2),T=n($(N(S,_),P,R),t.apply(this,D),s);en(b),a>0?Re(this).transition().duration(a).call(k,T,P,b):Re(this).call(m.transform,T,P,b)}}function z(b,...D){if(e.apply(this,arguments)){var S=b.touches,P=S.length,R=E(this,D,b.changedTouches.length===P).event(b),_,T,O,U;for(vr(b),T=0;T<P;++T)O=S[T],U=Fe(O,this),U=[U,this.__zoom.invert(U),O.identifier],R.touch0?!R.touch1&&R.touch0[2]!==U[2]&&(R.touch1=U,R.taps=0):(R.touch0=U,_=!0,R.taps=1+!!l);l&&(l=clearTimeout(l)),_&&(R.taps<2&&(d=U[0],l=setTimeout(function(){l=null},h)),Ln(this),R.start())}}function V(b,...D){if(this.__zooming){var S=E(this,D).event(b),P=b.changedTouches,R=P.length,_,T,O,U;for(en(b),_=0;_<R;++_)T=P[_],O=Fe(T,this),S.touch0&&S.touch0[2]===T.identifier?S.touch0[0]=O:S.touch1&&S.touch1[2]===T.identifier&&(S.touch1[0]=O);if(T=S.that.__zoom,S.touch1){var K=S.touch0[0],j=S.touch0[1],ee=S.touch1[0],re=S.touch1[1],ie=(ie=ee[0]-K[0])*ie+(ie=ee[1]-K[1])*ie,oe=(oe=re[0]-j[0])*oe+(oe=re[1]-j[1])*oe;T=N(T,Math.sqrt(ie/oe)),O=[(K[0]+ee[0])/2,(K[1]+ee[1])/2],U=[(j[0]+re[0])/2,(j[1]+re[1])/2]}else if(S.touch0)O=S.touch0[0],U=S.touch0[1];else return;S.zoom("touch",n($(T,O,U),S.extent,s))}}function M(b,...D){if(this.__zooming){var S=E(this,D).event(b),P=b.changedTouches,R=P.length,_,T;for(vr(b),f&&clearTimeout(f),f=setTimeout(function(){f=null},h),_=0;_<R;++_)T=P[_],S.touch0&&S.touch0[2]===T.identifier?delete S.touch0:S.touch1&&S.touch1[2]===T.identifier&&delete S.touch1;if(S.touch1&&!S.touch0&&(S.touch0=S.touch1,delete S.touch1),S.touch0)S.touch0[1]=this.__zoom.invert(S.touch0[0]);else if(S.end(),S.taps===2&&(T=Fe(T,this),Math.hypot(d[0]-T[0],d[1]-T[1])<v)){var O=Re(this).on("dblclick.zoom");O&&O.apply(this,arguments)}}}return m.wheelDelta=function(b){return arguments.length?(r=typeof b=="function"?b:kn(+b),m):r},m.filter=function(b){return arguments.length?(e=typeof b=="function"?b:kn(!!b),m):e},m.touchable=function(b){return arguments.length?(i=typeof b=="function"?b:kn(!!b),m):i},m.extent=function(b){return arguments.length?(t=typeof b=="function"?b:kn([[+b[0][0],+b[0][1]],[+b[1][0],+b[1][1]]]),m):t},m.scaleExtent=function(b){return arguments.length?(o[0]=+b[0],o[1]=+b[1],m):[o[0],o[1]]},m.translateExtent=function(b){return arguments.length?(s[0][0]=+b[0][0],s[1][0]=+b[1][0],s[0][1]=+b[0][1],s[1][1]=+b[1][1],m):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},m.constrain=function(b){return arguments.length?(n=b,m):n},m.duration=function(b){return arguments.length?(a=+b,m):a},m.interpolate=function(b){return arguments.length?(u=b,m):u},m.on=function(){var b=c.on.apply(c,arguments);return b===c?m:b},m.clickDistance=function(b){return arguments.length?(g=(b=+b)*b,m):Math.sqrt(g)},m.tapDistance=function(b){return arguments.length?(v=+b,m):v},m}const cr=y.createContext(null),ag=cr.Provider,Ze={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},ea=Ze.error001();function le(e,t){const n=y.useContext(cr);if(n===null)throw new Error(ea);return $s(n,e,t)}const ge=()=>{const e=y.useContext(cr);if(e===null)throw new Error(ea);return y.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},cg=e=>e.userSelectionActive?"none":"all";function ta({position:e,children:t,className:n,style:r,...i}){const o=le(cg),s=`${e}`.split("-");return w("div",{className:xe(["react-flow__panel",n,...s]),style:{...r,pointerEvents:o},...i,children:t})}function ug({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:w(ta,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:w("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const lg=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:i=!0,labelBgStyle:o={},labelBgPadding:s=[2,4],labelBgBorderRadius:a=2,children:u,className:c,...l})=>{const d=y.useRef(null),[f,h]=y.useState({x:0,y:0,width:0,height:0}),p=xe(["react-flow__edge-textwrapper",c]);return y.useEffect(()=>{if(d.current){const g=d.current.getBBox();h({x:g.x,y:g.y,width:g.width,height:g.height})}},[n]),typeof n>"u"||!n?null:X("g",{transform:`translate(${e-f.width/2} ${t-f.height/2})`,className:p,visibility:f.width?"visible":"hidden",...l,children:[i&&w("rect",{width:f.width+2*s[0],x:-s[0],y:-s[1],height:f.height+2*s[1],className:"react-flow__edge-textbg",style:o,rx:a,ry:a}),w("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:d,style:r,children:n}),u]})};var dg=y.memo(lg);const vi=e=>({width:e.offsetWidth,height:e.offsetHeight}),Ut=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),xi=(e={x:0,y:0},t)=>({x:Ut(e.x,t[0][0],t[1][0]),y:Ut(e.y,t[0][1],t[1][1])}),ho=(e,t,n)=>e<t?Ut(Math.abs(e-t),1,50)/50:e>n?-Ut(Math.abs(e-n),1,50)/50:0,na=(e,t)=>{const n=ho(e.x,35,t.width-35)*20,r=ho(e.y,35,t.height-35)*20;return[n,r]},ra=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},fg=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),_i=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),hg=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),po=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),Vr=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},pg=e=>Te(e.width)&&Te(e.height)&&Te(e.x)&&Te(e.y),Te=e=>!isNaN(e)&&isFinite(e),pe=Symbol.for("internals"),ia=["Enter"," ","Escape"],gg=(e,t)=>{},yg=e=>"nativeEvent"in e;function Hr(e){var i,o;const t=yg(e)?e.nativeEvent:e,n=((o=(i=t.composedPath)==null?void 0:i.call(t))==null?void 0:o[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const oa=e=>"clientX"in e,ut=(e,t)=>{var o,s;const n=oa(e),r=n?e.clientX:(o=e.touches)==null?void 0:o[0].clientX,i=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}},Kn=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},vn=({id:e,path:t,labelX:n,labelY:r,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:u,labelBgBorderRadius:c,style:l,markerEnd:d,markerStart:f,interactionWidth:h=20})=>X(Se,{children:[w("path",{id:e,style:l,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:d,markerStart:f}),h&&w("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}),i&&Te(n)&&Te(r)?w(dg,{x:n,y:r,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:u,labelBgBorderRadius:c}):null]});vn.displayName="BaseEdge";function tn(e,t,n){return n===void 0?n:r=>{const i=t().edges.find(o=>o.id===e);i&&n(r,{...i})}}function sa({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,o=n<e?n+i:n-i,s=Math.abs(r-t)/2,a=r<t?r+s:r-s;return[o,a,i,s]}function aa({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:o,targetControlX:s,targetControlY:a}){const u=e*.125+i*.375+s*.375+n*.125,c=t*.125+o*.375+a*.375+r*.125,l=Math.abs(u-e),d=Math.abs(c-t);return[u,c,l,d]}var St;(function(e){e.Strict="strict",e.Loose="loose"})(St||(St={}));var xt;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(xt||(xt={}));var gn;(function(e){e.Partial="partial",e.Full="full"})(gn||(gn={}));var at;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(at||(at={}));var Xn;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Xn||(Xn={}));var Y;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Y||(Y={}));function go({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===Y.Left||e===Y.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function ca({sourceX:e,sourceY:t,sourcePosition:n=Y.Bottom,targetX:r,targetY:i,targetPosition:o=Y.Top}){const[s,a]=go({pos:n,x1:e,y1:t,x2:r,y2:i}),[u,c]=go({pos:o,x1:r,y1:i,x2:e,y2:t}),[l,d,f,h]=aa({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:s,sourceControlY:a,targetControlX:u,targetControlY:c});return[`M${e},${t} C${s},${a} ${u},${c} ${r},${i}`,l,d,f,h]}const Ni=y.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=Y.Bottom,targetPosition:o=Y.Top,label:s,labelStyle:a,labelShowBg:u,labelBgStyle:c,labelBgPadding:l,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:p,interactionWidth:g})=>{const[v,m,N]=ca({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:o});return w(vn,{path:v,labelX:m,labelY:N,label:s,labelStyle:a,labelShowBg:u,labelBgStyle:c,labelBgPadding:l,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:p,interactionWidth:g})});Ni.displayName="SimpleBezierEdge";const yo={[Y.Left]:{x:-1,y:0},[Y.Right]:{x:1,y:0},[Y.Top]:{x:0,y:-1},[Y.Bottom]:{x:0,y:1}},mg=({source:e,sourcePosition:t=Y.Bottom,target:n})=>t===Y.Left||t===Y.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},mo=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function wg({source:e,sourcePosition:t=Y.Bottom,target:n,targetPosition:r=Y.Top,center:i,offset:o}){const s=yo[t],a=yo[r],u={x:e.x+s.x*o,y:e.y+s.y*o},c={x:n.x+a.x*o,y:n.y+a.y*o},l=mg({source:u,sourcePosition:t,target:c}),d=l.x!==0?"x":"y",f=l[d];let h=[],p,g;const v={x:0,y:0},m={x:0,y:0},[N,$,x,k]=sa({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[d]*a[d]===-1){p=i.x||N,g=i.y||$;const C=[{x:p,y:u.y},{x:p,y:c.y}],I=[{x:u.x,y:g},{x:c.x,y:g}];s[d]===f?h=d==="x"?C:I:h=d==="x"?I:C}else{const C=[{x:u.x,y:c.y}],I=[{x:c.x,y:u.y}];if(d==="x"?h=s.x===f?I:C:h=s.y===f?C:I,t===r){const M=Math.abs(e[d]-n[d]);if(M<=o){const b=Math.min(o-1,o-M);s[d]===f?v[d]=(u[d]>e[d]?-1:1)*b:m[d]=(c[d]>n[d]?-1:1)*b}}if(t!==r){const M=d==="x"?"y":"x",b=s[d]===a[M],D=u[M]>c[M],S=u[M]<c[M];(s[d]===1&&(!b&&D||b&&S)||s[d]!==1&&(!b&&S||b&&D))&&(h=d==="x"?C:I)}const G={x:u.x+v.x,y:u.y+v.y},H={x:c.x+m.x,y:c.y+m.y},z=Math.max(Math.abs(G.x-h[0].x),Math.abs(H.x-h[0].x)),V=Math.max(Math.abs(G.y-h[0].y),Math.abs(H.y-h[0].y));z>=V?(p=(G.x+H.x)/2,g=h[0].y):(p=h[0].x,g=(G.y+H.y)/2)}return[[e,{x:u.x+v.x,y:u.y+v.y},...h,{x:c.x+m.x,y:c.y+m.y},n],p,g,x,k]}function bg(e,t,n,r){const i=Math.min(mo(e,t)/2,mo(t,n)/2,r),{x:o,y:s}=t;if(e.x===o&&o===n.x||e.y===s&&s===n.y)return`L${o} ${s}`;if(e.y===s){const c=e.x<n.x?-1:1,l=e.y<n.y?1:-1;return`L ${o+i*c},${s}Q ${o},${s} ${o},${s+i*l}`}const a=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return`L ${o},${s+i*u}Q ${o},${s} ${o+i*a},${s}`}function Br({sourceX:e,sourceY:t,sourcePosition:n=Y.Bottom,targetX:r,targetY:i,targetPosition:o=Y.Top,borderRadius:s=5,centerX:a,centerY:u,offset:c=20}){const[l,d,f,h,p]=wg({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:o,center:{x:a,y:u},offset:c});return[l.reduce((v,m,N)=>{let $="";return N>0&&N<l.length-1?$=bg(l[N-1],m,l[N+1],s):$=`${N===0?"M":"L"}${m.x} ${m.y}`,v+=$,v},""),d,f,h,p]}const ur=y.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:u,labelBgBorderRadius:c,style:l,sourcePosition:d=Y.Bottom,targetPosition:f=Y.Top,markerEnd:h,markerStart:p,pathOptions:g,interactionWidth:v})=>{const[m,N,$]=Br({sourceX:e,sourceY:t,sourcePosition:d,targetX:n,targetY:r,targetPosition:f,borderRadius:g==null?void 0:g.borderRadius,offset:g==null?void 0:g.offset});return w(vn,{path:m,labelX:N,labelY:$,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:u,labelBgBorderRadius:c,style:l,markerEnd:h,markerStart:p,interactionWidth:v})});ur.displayName="SmoothStepEdge";const Ei=y.memo(e=>{var t;return w(ur,{...e,pathOptions:y.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});Ei.displayName="StepEdge";function vg({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,o,s,a]=sa({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,o,s,a]}const Si=y.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:u,labelBgBorderRadius:c,style:l,markerEnd:d,markerStart:f,interactionWidth:h})=>{const[p,g,v]=vg({sourceX:e,sourceY:t,targetX:n,targetY:r});return w(vn,{path:p,labelX:g,labelY:v,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:u,labelBgBorderRadius:c,style:l,markerEnd:d,markerStart:f,interactionWidth:h})});Si.displayName="StraightEdge";function Dn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function wo({pos:e,x1:t,y1:n,x2:r,y2:i,c:o}){switch(e){case Y.Left:return[t-Dn(t-r,o),n];case Y.Right:return[t+Dn(r-t,o),n];case Y.Top:return[t,n-Dn(n-i,o)];case Y.Bottom:return[t,n+Dn(i-n,o)]}}function $i({sourceX:e,sourceY:t,sourcePosition:n=Y.Bottom,targetX:r,targetY:i,targetPosition:o=Y.Top,curvature:s=.25}){const[a,u]=wo({pos:n,x1:e,y1:t,x2:r,y2:i,c:s}),[c,l]=wo({pos:o,x1:r,y1:i,x2:e,y2:t,c:s}),[d,f,h,p]=aa({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:a,sourceControlY:u,targetControlX:c,targetControlY:l});return[`M${e},${t} C${a},${u} ${c},${l} ${r},${i}`,d,f,h,p]}const jn=y.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=Y.Bottom,targetPosition:o=Y.Top,label:s,labelStyle:a,labelShowBg:u,labelBgStyle:c,labelBgPadding:l,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:p,pathOptions:g,interactionWidth:v})=>{const[m,N,$]=$i({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:o,curvature:g==null?void 0:g.curvature});return w(vn,{path:m,labelX:N,labelY:$,label:s,labelStyle:a,labelShowBg:u,labelBgStyle:c,labelBgPadding:l,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:p,interactionWidth:v})});jn.displayName="BezierEdge";const Ci=y.createContext(null),xg=Ci.Provider;Ci.Consumer;const _g=()=>y.useContext(Ci),Ng=e=>"id"in e&&"source"in e&&"target"in e,Eg=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,Fr=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,Sg=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),ua=(e,t)=>{if(!e.source||!e.target)return t;let n;return Ng(e)?n={...e}:n={...e,id:Eg(e)},Sg(n,t)?t:t.concat(n)},la=({x:e,y:t},[n,r,i],o,[s,a])=>{const u={x:(e-n)/i,y:(t-r)/i};return o?{x:s*Math.round(u.x/s),y:a*Math.round(u.y/a)}:u},$g=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r}),Vt=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],i={x:e.position.x-n,y:e.position.y-r};return{...i,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:i}},Ai=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const{x:o,y:s}=Vt(i,t).positionAbsolute;return fg(r,_i({x:o,y:s,width:i.width||0,height:i.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return hg(n)},da=(e,t,[n,r,i]=[0,0,1],o=!1,s=!1,a=[0,0])=>{const u={x:(t.x-n)/i,y:(t.y-r)/i,width:t.width/i,height:t.height/i},c=[];return e.forEach(l=>{const{width:d,height:f,selectable:h=!0,hidden:p=!1}=l;if(s&&!h||p)return!1;const{positionAbsolute:g}=Vt(l,a),v={x:g.x,y:g.y,width:d||0,height:f||0},m=Vr(u,v),N=typeof d>"u"||typeof f>"u"||d===null||f===null,$=o&&m>0,x=(d||0)*(f||0);(N||$||m>=x||l.dragging)&&c.push(l)}),c},fa=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},ha=(e,t,n,r,i,o=.1)=>{const s=t/(e.width*(1+o)),a=n/(e.height*(1+o)),u=Math.min(s,a),c=Ut(u,r,i),l=e.x+e.width/2,d=e.y+e.height/2,f=t/2-l*c,h=n/2-d*c;return[f,h,c]},wt=(e,t=0)=>e.transition().duration(t);function bo(e,t,n,r){return(t[n]||[]).reduce((i,o)=>{var s,a;return`${e.id}-${o.id}-${n}`!==r&&i.push({id:o.id||null,type:n,nodeId:e.id,x:(((s=e.positionAbsolute)==null?void 0:s.x)??0)+o.x+o.width/2,y:(((a=e.positionAbsolute)==null?void 0:a.y)??0)+o.y+o.height/2}),i},[])}function Cg(e,t,n,r,i,o){const{x:s,y:a}=ut(e),c=t.elementsFromPoint(s,a).find(p=>p.classList.contains("react-flow__handle"));if(c){const p=c.getAttribute("data-nodeid");if(p){const g=ki(void 0,c),v=c.getAttribute("data-handleid"),m=o({nodeId:p,id:v,type:g});if(m)return{handle:{id:v,type:g,nodeId:p,x:n.x,y:n.y},validHandleResult:m}}}let l=[],d=1/0;if(i.forEach(p=>{const g=Math.sqrt((p.x-n.x)**2+(p.y-n.y)**2);if(g<=r){const v=o(p);g<=d&&(g<d?l=[{handle:p,validHandleResult:v}]:g===d&&l.push({handle:p,validHandleResult:v}),d=g)}}),!l.length)return{handle:null,validHandleResult:pa()};if(l.length===1)return l[0];const f=l.some(({validHandleResult:p})=>p.isValid),h=l.some(({handle:p})=>p.type==="target");return l.find(({handle:p,validHandleResult:g})=>h?p.type==="target":f?g.isValid:!0)||l[0]}const Ag={source:null,target:null,sourceHandle:null,targetHandle:null},pa=()=>({handleDomNode:null,isValid:!1,connection:Ag,endHandle:null});function ga(e,t,n,r,i,o,s){const a=i==="target",u=s.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),c={...pa(),handleDomNode:u};if(u){const l=ki(void 0,u),d=u.getAttribute("data-nodeid"),f=u.getAttribute("data-handleid"),h=u.classList.contains("connectable"),p=u.classList.contains("connectableend"),g={source:a?d:n,sourceHandle:a?f:r,target:a?n:d,targetHandle:a?r:f};c.connection=g,h&&p&&(t===St.Strict?a&&l==="source"||!a&&l==="target":d!==n||f!==r)&&(c.endHandle={nodeId:d,handleId:f,type:l},c.isValid=o(g))}return c}function kg({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((i,o)=>{if(o[pe]){const{handleBounds:s}=o[pe];let a=[],u=[];s&&(a=bo(o,s,"source",`${t}-${n}-${r}`),u=bo(o,s,"target",`${t}-${n}-${r}`)),i.push(...a,...u)}return i},[])}function ki(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function xr(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function Dg(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function ya({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:i,getState:o,setState:s,isValidConnection:a,edgeUpdaterType:u,onEdgeUpdateEnd:c}){const l=ra(e.target),{connectionMode:d,domNode:f,autoPanOnConnect:h,connectionRadius:p,onConnectStart:g,panBy:v,getNodes:m,cancelConnection:N}=o();let $=0,x;const{x:k,y:E}=ut(e),C=l==null?void 0:l.elementFromPoint(k,E),I=ki(u,C),G=f==null?void 0:f.getBoundingClientRect();if(!G||!I)return;let H,z=ut(e,G),V=!1,M=null,b=!1,D=null;const S=kg({nodes:m(),nodeId:n,handleId:t,handleType:I}),P=()=>{if(!h)return;const[T,O]=na(z,G);v({x:T,y:O}),$=requestAnimationFrame(P)};s({connectionPosition:z,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:I,connectionStartHandle:{nodeId:n,handleId:t,type:I},connectionEndHandle:null}),g==null||g(e,{nodeId:n,handleId:t,handleType:I});function R(T){const{transform:O}=o();z=ut(T,G);const{handle:U,validHandleResult:K}=Cg(T,l,la(z,O,!1,[1,1]),p,S,j=>ga(j,d,n,t,i?"target":"source",a,l));if(x=U,V||(P(),V=!0),D=K.handleDomNode,M=K.connection,b=K.isValid,s({connectionPosition:x&&b?$g({x:x.x,y:x.y},O):z,connectionStatus:Dg(!!x,b),connectionEndHandle:K.endHandle}),!x&&!b&&!D)return xr(H);M.source!==M.target&&D&&(xr(H),H=D,D.classList.add("connecting","react-flow__handle-connecting"),D.classList.toggle("valid",b),D.classList.toggle("react-flow__handle-valid",b))}function _(T){var O,U;(x||D)&&M&&b&&(r==null||r(M)),(U=(O=o()).onConnectEnd)==null||U.call(O,T),u&&(c==null||c(T)),xr(H),N(),cancelAnimationFrame($),V=!1,b=!1,M=null,D=null,l.removeEventListener("mousemove",R),l.removeEventListener("mouseup",_),l.removeEventListener("touchmove",R),l.removeEventListener("touchend",_)}l.addEventListener("mousemove",R),l.addEventListener("mouseup",_),l.addEventListener("touchmove",R),l.addEventListener("touchend",_)}const vo=()=>!0,Mg=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),Tg=(e,t,n)=>r=>{const{connectionStartHandle:i,connectionEndHandle:o,connectionClickStartHandle:s}=r;return{connecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n||(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===n,clickConnecting:(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===n}},ma=y.forwardRef(({type:e="source",position:t=Y.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:o=!0,id:s,onConnect:a,children:u,className:c,onMouseDown:l,onTouchStart:d,...f},h)=>{var G,H;const p=s||null,g=e==="target",v=ge(),m=_g(),{connectOnClick:N,noPanClassName:$}=le(Mg,be),{connecting:x,clickConnecting:k}=le(Tg(m,p,e),be);m||(H=(G=v.getState()).onError)==null||H.call(G,"010",Ze.error010());const E=z=>{const{defaultEdgeOptions:V,onConnect:M,hasDefaultEdges:b}=v.getState(),D={...V,...z};if(b){const{edges:S,setEdges:P}=v.getState();P(ua(D,S))}M==null||M(D),a==null||a(D)},C=z=>{if(!m)return;const V=oa(z);i&&(V&&z.button===0||!V)&&ya({event:z,handleId:p,nodeId:m,onConnect:E,isTarget:g,getState:v.getState,setState:v.setState,isValidConnection:n||v.getState().isValidConnection||vo}),V?l==null||l(z):d==null||d(z)},I=z=>{const{onClickConnectStart:V,onClickConnectEnd:M,connectionClickStartHandle:b,connectionMode:D,isValidConnection:S}=v.getState();if(!m||!b&&!i)return;if(!b){V==null||V(z,{nodeId:m,handleId:p,handleType:e}),v.setState({connectionClickStartHandle:{nodeId:m,type:e,handleId:p}});return}const P=ra(z.target),R=n||S||vo,{connection:_,isValid:T}=ga({nodeId:m,id:p,type:e},D,b.nodeId,b.handleId||null,b.type,R,P);T&&E(_),M==null||M(z),v.setState({connectionClickStartHandle:null})};return w("div",{"data-handleid":p,"data-nodeid":m,"data-handlepos":t,"data-id":`${m}-${p}-${e}`,className:xe(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",$,c,{source:!g,target:g,connectable:r,connectablestart:i,connectableend:o,connecting:k,connectionindicator:r&&(i&&!x||o&&x)}]),onMouseDown:C,onTouchStart:C,onClick:N?I:void 0,ref:h,...f,children:u})});ma.displayName="Handle";var lt=y.memo(ma);const wa=({data:e,isConnectable:t,targetPosition:n=Y.Top,sourcePosition:r=Y.Bottom})=>X(Se,{children:[w(lt,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,w(lt,{type:"source",position:r,isConnectable:t})]});wa.displayName="DefaultNode";var Ur=y.memo(wa);const ba=({data:e,isConnectable:t,sourcePosition:n=Y.Bottom})=>X(Se,{children:[e==null?void 0:e.label,w(lt,{type:"source",position:n,isConnectable:t})]});ba.displayName="InputNode";var va=y.memo(ba);const xa=({data:e,isConnectable:t,targetPosition:n=Y.Top})=>X(Se,{children:[w(lt,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]});xa.displayName="OutputNode";var _a=y.memo(xa);const Di=()=>null;Di.displayName="GroupNode";const Ig=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected)}),Mn=e=>e.id;function Pg(e,t){return be(e.selectedNodes.map(Mn),t.selectedNodes.map(Mn))&&be(e.selectedEdges.map(Mn),t.selectedEdges.map(Mn))}const Na=y.memo(({onSelectionChange:e})=>{const t=ge(),{selectedNodes:n,selectedEdges:r}=le(Ig,Pg);return y.useEffect(()=>{var o,s;const i={nodes:n,edges:r};e==null||e(i),(s=(o=t.getState()).onSelectionChange)==null||s.call(o,i)},[n,r,e]),null});Na.displayName="SelectionListener";const Gg=e=>!!e.onSelectionChange;function zg({onSelectionChange:e}){const t=le(Gg);return e||t?w(Na,{onSelectionChange:e}):null}const Rg=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Mt(e,t){y.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function ne(e,t,n){y.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const Og=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:i,onConnectStart:o,onConnectEnd:s,onClickConnectStart:a,onClickConnectEnd:u,nodesDraggable:c,nodesConnectable:l,nodesFocusable:d,edgesFocusable:f,edgesUpdatable:h,elevateNodesOnSelect:p,minZoom:g,maxZoom:v,nodeExtent:m,onNodesChange:N,onEdgesChange:$,elementsSelectable:x,connectionMode:k,snapGrid:E,snapToGrid:C,translateExtent:I,connectOnClick:G,defaultEdgeOptions:H,fitView:z,fitViewOptions:V,onNodesDelete:M,onEdgesDelete:b,onNodeDrag:D,onNodeDragStart:S,onNodeDragStop:P,onSelectionDrag:R,onSelectionDragStart:_,onSelectionDragStop:T,noPanClassName:O,nodeOrigin:U,rfId:K,autoPanOnConnect:j,autoPanOnNodeDrag:ee,onError:re,connectionRadius:ie,isValidConnection:oe})=>{const{setNodes:ae,setEdges:A,setDefaultNodesAndEdges:q,setMinZoom:W,setMaxZoom:Q,setTranslateExtent:te,setNodeExtent:Z,reset:ue}=le(Rg,be),F=ge();return y.useEffect(()=>{const me=r==null?void 0:r.map(Be=>({...Be,...H}));return q(n,me),()=>{ue()}},[]),ne("defaultEdgeOptions",H,F.setState),ne("connectionMode",k,F.setState),ne("onConnect",i,F.setState),ne("onConnectStart",o,F.setState),ne("onConnectEnd",s,F.setState),ne("onClickConnectStart",a,F.setState),ne("onClickConnectEnd",u,F.setState),ne("nodesDraggable",c,F.setState),ne("nodesConnectable",l,F.setState),ne("nodesFocusable",d,F.setState),ne("edgesFocusable",f,F.setState),ne("edgesUpdatable",h,F.setState),ne("elementsSelectable",x,F.setState),ne("elevateNodesOnSelect",p,F.setState),ne("snapToGrid",C,F.setState),ne("snapGrid",E,F.setState),ne("onNodesChange",N,F.setState),ne("onEdgesChange",$,F.setState),ne("connectOnClick",G,F.setState),ne("fitViewOnInit",z,F.setState),ne("fitViewOnInitOptions",V,F.setState),ne("onNodesDelete",M,F.setState),ne("onEdgesDelete",b,F.setState),ne("onNodeDrag",D,F.setState),ne("onNodeDragStart",S,F.setState),ne("onNodeDragStop",P,F.setState),ne("onSelectionDrag",R,F.setState),ne("onSelectionDragStart",_,F.setState),ne("onSelectionDragStop",T,F.setState),ne("noPanClassName",O,F.setState),ne("nodeOrigin",U,F.setState),ne("rfId",K,F.setState),ne("autoPanOnConnect",j,F.setState),ne("autoPanOnNodeDrag",ee,F.setState),ne("onError",re,F.setState),ne("connectionRadius",ie,F.setState),ne("isValidConnection",oe,F.setState),Mt(e,ae),Mt(t,A),Mt(g,W),Mt(v,Q),Mt(I,te),Mt(m,Z),null},xo={display:"none"},Lg={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Ea="react-flow__node-desc",Sa="react-flow__edge-desc",Vg="react-flow__aria-live",Hg=e=>e.ariaLiveMessage;function Bg({rfId:e}){const t=le(Hg);return w("div",{id:`${Vg}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Lg,children:t})}function Fg({rfId:e,disableKeyboardA11y:t}){return X(Se,{children:[X("div",{id:`${Ea}-${e}`,style:xo,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),w("div",{id:`${Sa}-${e}`,style:xo,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&w(Bg,{rfId:e})]})}const Ug=typeof document<"u"?document:null;var yn=(e=null,t={target:Ug})=>{const[n,r]=y.useState(!1),i=y.useRef(!1),o=y.useRef(new Set([])),[s,a]=y.useMemo(()=>{if(e!==null){const c=(Array.isArray(e)?e:[e]).filter(d=>typeof d=="string").map(d=>d.split("+")),l=c.reduce((d,f)=>d.concat(...f),[]);return[c,l]}return[[],[]]},[e]);return y.useEffect(()=>{var u,c;if(e!==null){const l=h=>{if(i.current=h.ctrlKey||h.metaKey||h.shiftKey,!i.current&&Hr(h))return!1;const p=No(h.code,a);o.current.add(h[p]),_o(s,o.current,!1)&&(h.preventDefault(),r(!0))},d=h=>{if(!i.current&&Hr(h))return!1;const p=No(h.code,a);_o(s,o.current,!0)?(r(!1),o.current.clear()):o.current.delete(h[p]),h.key==="Meta"&&o.current.clear(),i.current=!1},f=()=>{o.current.clear(),r(!1)};return(u=t==null?void 0:t.target)==null||u.addEventListener("keydown",l),(c=t==null?void 0:t.target)==null||c.addEventListener("keyup",d),window.addEventListener("blur",f),()=>{var h,p;(h=t==null?void 0:t.target)==null||h.removeEventListener("keydown",l),(p=t==null?void 0:t.target)==null||p.removeEventListener("keyup",d),window.removeEventListener("blur",f)}}},[e,r]),n};function _o(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(i=>t.has(i)))}function No(e,t){return t.includes(e)?"code":"key"}function $a(e,t,n,r){var s,a;if(!e.parentNode)return n;const i=t.get(e.parentNode),o=Vt(i,r);return $a(i,t,{x:(n.x??0)+o.x,y:(n.y??0)+o.y,z:(((s=i[pe])==null?void 0:s.z)??0)>(n.z??0)?((a=i[pe])==null?void 0:a.z)??0:n.z??0},r)}function Ca(e,t,n){e.forEach(r=>{var i;if(r.parentNode&&!e.has(r.parentNode))throw new Error(`Parent node ${r.parentNode} not found`);if(r.parentNode||n!=null&&n[r.id]){const{x:o,y:s,z:a}=$a(r,e,{...r.position,z:((i=r[pe])==null?void 0:i.z)??0},t);r.positionAbsolute={x:o,y:s},r[pe].z=a,n!=null&&n[r.id]&&(r[pe].isParent=!0)}})}function _r(e,t,n,r){const i=new Map,o={},s=r?1e3:0;return e.forEach(a=>{var d;const u=(Te(a.zIndex)?a.zIndex:0)+(a.selected?s:0),c=t.get(a.id),l={width:c==null?void 0:c.width,height:c==null?void 0:c.height,...a,positionAbsolute:{x:a.position.x,y:a.position.y}};a.parentNode&&(l.parentNode=a.parentNode,o[a.parentNode]=!0),Object.defineProperty(l,pe,{enumerable:!1,value:{handleBounds:(d=c==null?void 0:c[pe])==null?void 0:d.handleBounds,z:u}}),i.set(a.id,l)}),Ca(i,n,o),i}function Aa(e,t={}){const{getNodes:n,width:r,height:i,minZoom:o,maxZoom:s,d3Zoom:a,d3Selection:u,fitViewOnInitDone:c,fitViewOnInit:l,nodeOrigin:d}=e(),f=t.initial&&!c&&l;if(a&&u&&(f||!t.initial)){const p=n().filter(v=>{var N;const m=t.includeHiddenNodes?v.width&&v.height:!v.hidden;return(N=t.nodes)!=null&&N.length?m&&t.nodes.some($=>$.id===v.id):m}),g=p.every(v=>v.width&&v.height);if(p.length>0&&g){const v=Ai(p,d),[m,N,$]=ha(v,r,i,t.minZoom??o,t.maxZoom??s,t.padding??.1),x=ct.translate(m,N).scale($);return typeof t.duration=="number"&&t.duration>0?a.transform(wt(u,t.duration),x):a.transform(u,x),!0}}return!1}function qg(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[pe]:r[pe],selected:n.selected})}),new Map(t)}function Wg(e,t){return t.map(n=>{const r=e.find(i=>i.id===n.id);return r&&(n.selected=r.selected),n})}function Tn({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:i,edges:o,onNodesChange:s,onEdgesChange:a,hasDefaultNodes:u,hasDefaultEdges:c}=n();e!=null&&e.length&&(u&&r({nodeInternals:qg(e,i)}),s==null||s(e)),t!=null&&t.length&&(c&&r({edges:Wg(t,o)}),a==null||a(t))}const Tt=()=>{},Yg={zoomIn:Tt,zoomOut:Tt,zoomTo:Tt,getZoom:()=>1,setViewport:Tt,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Tt,fitBounds:Tt,project:e=>e,viewportInitialized:!1},Kg=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),Xg=()=>{const e=ge(),{d3Zoom:t,d3Selection:n}=le(Kg,be);return y.useMemo(()=>n&&t?{zoomIn:i=>t.scaleBy(wt(n,i==null?void 0:i.duration),1.2),zoomOut:i=>t.scaleBy(wt(n,i==null?void 0:i.duration),1/1.2),zoomTo:(i,o)=>t.scaleTo(wt(n,o==null?void 0:o.duration),i),getZoom:()=>e.getState().transform[2],setViewport:(i,o)=>{const[s,a,u]=e.getState().transform,c=ct.translate(i.x??s,i.y??a).scale(i.zoom??u);t.transform(wt(n,o==null?void 0:o.duration),c)},getViewport:()=>{const[i,o,s]=e.getState().transform;return{x:i,y:o,zoom:s}},fitView:i=>Aa(e.getState,i),setCenter:(i,o,s)=>{const{width:a,height:u,maxZoom:c}=e.getState(),l=typeof(s==null?void 0:s.zoom)<"u"?s.zoom:c,d=a/2-i*l,f=u/2-o*l,h=ct.translate(d,f).scale(l);t.transform(wt(n,s==null?void 0:s.duration),h)},fitBounds:(i,o)=>{const{width:s,height:a,minZoom:u,maxZoom:c}=e.getState(),[l,d,f]=ha(i,s,a,u,c,(o==null?void 0:o.padding)??.1),h=ct.translate(l,d).scale(f);t.transform(wt(n,o==null?void 0:o.duration),h)},project:i=>{const{transform:o,snapToGrid:s,snapGrid:a}=e.getState();return la(i,o,s,a)},viewportInitialized:!0}:Yg,[t,n])};function Mi(){const e=Xg(),t=ge(),n=y.useCallback(()=>t.getState().getNodes().map(g=>({...g})),[]),r=y.useCallback(g=>t.getState().nodeInternals.get(g),[]),i=y.useCallback(()=>{const{edges:g=[]}=t.getState();return g.map(v=>({...v}))},[]),o=y.useCallback(g=>{const{edges:v=[]}=t.getState();return v.find(m=>m.id===g)},[]),s=y.useCallback(g=>{const{getNodes:v,setNodes:m,hasDefaultNodes:N,onNodesChange:$}=t.getState(),x=v(),k=typeof g=="function"?g(x):g;if(N)m(k);else if($){const E=k.length===0?x.map(C=>({type:"remove",id:C.id})):k.map(C=>({item:C,type:"reset"}));$(E)}},[]),a=y.useCallback(g=>{const{edges:v=[],setEdges:m,hasDefaultEdges:N,onEdgesChange:$}=t.getState(),x=typeof g=="function"?g(v):g;if(N)m(x);else if($){const k=x.length===0?v.map(E=>({type:"remove",id:E.id})):x.map(E=>({item:E,type:"reset"}));$(k)}},[]),u=y.useCallback(g=>{const v=Array.isArray(g)?g:[g],{getNodes:m,setNodes:N,hasDefaultNodes:$,onNodesChange:x}=t.getState();if($){const E=[...m(),...v];N(E)}else if(x){const k=v.map(E=>({item:E,type:"add"}));x(k)}},[]),c=y.useCallback(g=>{const v=Array.isArray(g)?g:[g],{edges:m=[],setEdges:N,hasDefaultEdges:$,onEdgesChange:x}=t.getState();if($)N([...m,...v]);else if(x){const k=v.map(E=>({item:E,type:"add"}));x(k)}},[]),l=y.useCallback(()=>{const{getNodes:g,edges:v=[],transform:m}=t.getState(),[N,$,x]=m;return{nodes:g().map(k=>({...k})),edges:v.map(k=>({...k})),viewport:{x:N,y:$,zoom:x}}},[]),d=y.useCallback(({nodes:g,edges:v})=>{const{nodeInternals:m,getNodes:N,edges:$,hasDefaultNodes:x,hasDefaultEdges:k,onNodesDelete:E,onEdgesDelete:C,onNodesChange:I,onEdgesChange:G}=t.getState(),H=(g||[]).map(D=>D.id),z=(v||[]).map(D=>D.id),V=N().reduce((D,S)=>{const P=!H.includes(S.id)&&S.parentNode&&D.find(_=>_.id===S.parentNode);return(typeof S.deletable=="boolean"?S.deletable:!0)&&(H.includes(S.id)||P)&&D.push(S),D},[]),M=$.filter(D=>typeof D.deletable=="boolean"?D.deletable:!0),b=M.filter(D=>z.includes(D.id));if(V||b){const D=fa(V,M),S=[...b,...D],P=S.reduce((R,_)=>(R.includes(_.id)||R.push(_.id),R),[]);if((k||x)&&(k&&t.setState({edges:$.filter(R=>!P.includes(R.id))}),x&&(V.forEach(R=>{m.delete(R.id)}),t.setState({nodeInternals:new Map(m)}))),P.length>0&&(C==null||C(S),G&&G(P.map(R=>({id:R,type:"remove"})))),V.length>0&&(E==null||E(V),I)){const R=V.map(_=>({id:_.id,type:"remove"}));I(R)}}},[]),f=y.useCallback(g=>{const v=pg(g),m=v?null:t.getState().nodeInternals.get(g.id);return[v?g:po(m),m,v]},[]),h=y.useCallback((g,v=!0,m)=>{const[N,$,x]=f(g);return N?(m||t.getState().getNodes()).filter(k=>{if(!x&&(k.id===$.id||!k.positionAbsolute))return!1;const E=po(k),C=Vr(E,N);return v&&C>0||C>=g.width*g.height}):[]},[]),p=y.useCallback((g,v,m=!0)=>{const[N]=f(g);if(!N)return!1;const $=Vr(N,v);return m&&$>0||$>=g.width*g.height},[]);return y.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:i,getEdge:o,setNodes:s,setEdges:a,addNodes:u,addEdges:c,toObject:l,deleteElements:d,getIntersectingNodes:h,isNodeIntersecting:p}),[e,n,r,i,o,s,a,u,c,l,d,h,p])}var jg=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=ge(),{deleteElements:r}=Mi(),i=yn(e),o=yn(t);y.useEffect(()=>{if(i){const{edges:s,getNodes:a}=n.getState(),u=a().filter(l=>l.selected),c=s.filter(l=>l.selected);r({nodes:u,edges:c}),n.setState({nodesSelectionActive:!1})}},[i]),y.useEffect(()=>{n.setState({multiSelectionActive:o})},[o])};function Zg(e){const t=ge();y.useEffect(()=>{let n;const r=()=>{var o,s;if(!e.current)return;const i=vi(e.current);(i.height===0||i.width===0)&&((s=(o=t.getState()).onError)==null||s.call(o,"004",Ze.error004())),t.setState({width:i.width||500,height:i.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const Ti={position:"absolute",width:"100%",height:"100%",top:0,left:0},Jg=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,In=e=>({x:e.x,y:e.y,zoom:e.k}),It=(e,t)=>e.target.closest(`.${t}`),Eo=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),So=e=>{const t=e.ctrlKey&&Kn()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},Qg=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),ey=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:i=!0,zoomOnPinch:o=!0,panOnScroll:s=!1,panOnScrollSpeed:a=.5,panOnScrollMode:u=xt.Free,zoomOnDoubleClick:c=!0,elementsSelectable:l,panOnDrag:d=!0,defaultViewport:f,translateExtent:h,minZoom:p,maxZoom:g,zoomActivationKeyCode:v,preventScrolling:m=!0,children:N,noWheelClassName:$,noPanClassName:x})=>{const k=y.useRef(),E=ge(),C=y.useRef(!1),I=y.useRef(!1),G=y.useRef(null),H=y.useRef({x:0,y:0,zoom:0}),{d3Zoom:z,d3Selection:V,d3ZoomHandler:M,userSelectionActive:b}=le(Qg,be),D=yn(v),S=y.useRef(0),P=y.useRef(!1),R=y.useRef();return Zg(G),y.useEffect(()=>{if(G.current){const _=G.current.getBoundingClientRect(),T=sg().scaleExtent([p,g]).translateExtent(h),O=Re(G.current).call(T),U=ct.translate(f.x,f.y).scale(Ut(f.zoom,p,g)),K=[[0,0],[_.width,_.height]],j=T.constrain()(U,K,h);T.transform(O,j),T.wheelDelta(So),E.setState({d3Zoom:T,d3Selection:O,d3ZoomHandler:O.on("wheel.zoom"),transform:[j.x,j.y,j.k],domNode:G.current.closest(".react-flow")})}},[]),y.useEffect(()=>{V&&z&&(s&&!D&&!b?V.on("wheel.zoom",_=>{if(It(_,$))return!1;_.preventDefault(),_.stopImmediatePropagation();const T=V.property("__zoom").k||1,O=Kn();if(_.ctrlKey&&o&&O){const ae=Fe(_),A=So(_),q=T*Math.pow(2,A);z.scaleTo(V,q,ae,_);return}const U=_.deltaMode===1?20:1;let K=u===xt.Vertical?0:_.deltaX*U,j=u===xt.Horizontal?0:_.deltaY*U;!O&&_.shiftKey&&u!==xt.Vertical&&(K=_.deltaY*U,j=0),z.translateBy(V,-(K/T)*a,-(j/T)*a,{internal:!0});const ee=In(V.property("__zoom")),{onViewportChangeStart:re,onViewportChange:ie,onViewportChangeEnd:oe}=E.getState();clearTimeout(R.current),P.current||(P.current=!0,t==null||t(_,ee),re==null||re(ee)),P.current&&(e==null||e(_,ee),ie==null||ie(ee),R.current=setTimeout(()=>{n==null||n(_,ee),oe==null||oe(ee),P.current=!1},150))},{passive:!1}):typeof M<"u"&&V.on("wheel.zoom",function(_,T){if(!m||It(_,$))return null;_.preventDefault(),M.call(this,_,T)},{passive:!1}))},[b,s,u,V,z,M,D,o,m,$,t,e,n]),y.useEffect(()=>{z&&z.on("start",_=>{var U,K;if(!_.sourceEvent||_.sourceEvent.internal)return null;S.current=(U=_.sourceEvent)==null?void 0:U.button;const{onViewportChangeStart:T}=E.getState(),O=In(_.transform);C.current=!0,H.current=O,((K=_.sourceEvent)==null?void 0:K.type)==="mousedown"&&E.setState({paneDragging:!0}),T==null||T(O),t==null||t(_.sourceEvent,O)})},[z,t]),y.useEffect(()=>{z&&(b&&!C.current?z.on("zoom",null):b||z.on("zoom",_=>{var O;const{onViewportChange:T}=E.getState();if(E.setState({transform:[_.transform.x,_.transform.y,_.transform.k]}),I.current=!!(r&&Eo(d,S.current??0)),(e||T)&&!((O=_.sourceEvent)!=null&&O.internal)){const U=In(_.transform);T==null||T(U),e==null||e(_.sourceEvent,U)}}))},[b,z,e,d,r]),y.useEffect(()=>{z&&z.on("end",_=>{if(!_.sourceEvent||_.sourceEvent.internal)return null;const{onViewportChangeEnd:T}=E.getState();if(C.current=!1,E.setState({paneDragging:!1}),r&&Eo(d,S.current??0)&&!I.current&&r(_.sourceEvent),I.current=!1,(n||T)&&Jg(H.current,_.transform)){const O=In(_.transform);H.current=O,clearTimeout(k.current),k.current=setTimeout(()=>{T==null||T(O),n==null||n(_.sourceEvent,O)},s?150:0)}})},[z,s,d,n,r]),y.useEffect(()=>{z&&z.filter(_=>{const T=D||i,O=o&&_.ctrlKey;if(_.button===1&&_.type==="mousedown"&&(It(_,"react-flow__node")||It(_,"react-flow__edge")))return!0;if(!d&&!T&&!s&&!c&&!o||b||!c&&_.type==="dblclick"||It(_,$)&&_.type==="wheel"||It(_,x)&&_.type!=="wheel"||!o&&_.ctrlKey&&_.type==="wheel"||!T&&!s&&!O&&_.type==="wheel"||!d&&(_.type==="mousedown"||_.type==="touchstart")||Array.isArray(d)&&!d.includes(_.button)&&(_.type==="mousedown"||_.type==="touchstart"))return!1;const U=Array.isArray(d)&&d.includes(_.button)||!_.button||_.button<=1;return(!_.ctrlKey||_.type==="wheel")&&U})},[b,z,i,o,s,c,d,l,D]),w("div",{className:"react-flow__renderer",ref:G,style:Ti,children:N})},ty=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function ny(){const{userSelectionActive:e,userSelectionRect:t}=le(ty,be);return e&&t?w("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function $o(e,t){const n=e.find(r=>r.id===t.parentNode);if(n){const r=t.position.x+t.width-n.width,i=t.position.y+t.height-n.height;if(r>0||i>0||t.position.x<0||t.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,r>0&&(n.style.width+=r),i>0&&(n.style.height+=i),t.position.x<0){const o=Math.abs(t.position.x);n.position.x=n.position.x-o,n.style.width+=o,t.position.x=0}if(t.position.y<0){const o=Math.abs(t.position.y);n.position.y=n.position.y-o,n.style.height+=o,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function ka(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,i)=>{const o=e.filter(a=>a.id===i.id);if(o.length===0)return r.push(i),r;const s={...i};for(const a of o)if(a)switch(a.type){case"select":{s.selected=a.selected;break}case"position":{typeof a.position<"u"&&(s.position=a.position),typeof a.positionAbsolute<"u"&&(s.positionAbsolute=a.positionAbsolute),typeof a.dragging<"u"&&(s.dragging=a.dragging),s.expandParent&&$o(r,s);break}case"dimensions":{typeof a.dimensions<"u"&&(s.width=a.dimensions.width,s.height=a.dimensions.height),typeof a.updateStyle<"u"&&(s.style={...s.style||{},...a.dimensions}),typeof a.resizing=="boolean"&&(s.resizing=a.resizing),s.expandParent&&$o(r,s);break}case"remove":return r}return r.push(s),r},n)}function Da(e,t){return ka(e,t)}function ry(e,t){return ka(e,t)}const it=(e,t)=>({id:e,type:"select",selected:t});function zt(e,t){return e.reduce((n,r)=>{const i=t.includes(r.id);return!r.selected&&i?(r.selected=!0,n.push(it(r.id,!0))):r.selected&&!i&&(r.selected=!1,n.push(it(r.id,!1))),n},[])}const Nr=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},iy=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),Ma=y.memo(({isSelecting:e,selectionMode:t=gn.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:i,onPaneClick:o,onPaneContextMenu:s,onPaneScroll:a,onPaneMouseEnter:u,onPaneMouseMove:c,onPaneMouseLeave:l,children:d})=>{const f=y.useRef(null),h=ge(),p=y.useRef(0),g=y.useRef(0),v=y.useRef(),{userSelectionActive:m,elementsSelectable:N,dragging:$}=le(iy,be),x=()=>{h.setState({userSelectionActive:!1,userSelectionRect:null}),p.current=0,g.current=0},k=M=>{o==null||o(M),h.getState().resetSelectedElements(),h.setState({nodesSelectionActive:!1})},E=M=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){M.preventDefault();return}s==null||s(M)},C=a?M=>a(M):void 0,I=M=>{const{resetSelectedElements:b,domNode:D}=h.getState();if(v.current=D==null?void 0:D.getBoundingClientRect(),!N||!e||M.button!==0||M.target!==f.current||!v.current)return;const{x:S,y:P}=ut(M,v.current);b(),h.setState({userSelectionRect:{width:0,height:0,startX:S,startY:P,x:S,y:P}}),r==null||r(M)},G=M=>{const{userSelectionRect:b,nodeInternals:D,edges:S,transform:P,onNodesChange:R,onEdgesChange:_,nodeOrigin:T,getNodes:O}=h.getState();if(!e||!v.current||!b)return;h.setState({userSelectionActive:!0,nodesSelectionActive:!1});const U=ut(M,v.current),K=b.startX??0,j=b.startY??0,ee={...b,x:U.x<K?U.x:K,y:U.y<j?U.y:j,width:Math.abs(U.x-K),height:Math.abs(U.y-j)},re=O(),ie=da(D,ee,P,t===gn.Partial,!0,T),oe=fa(ie,S).map(A=>A.id),ae=ie.map(A=>A.id);if(p.current!==ae.length){p.current=ae.length;const A=zt(re,ae);A.length&&(R==null||R(A))}if(g.current!==oe.length){g.current=oe.length;const A=zt(S,oe);A.length&&(_==null||_(A))}h.setState({userSelectionRect:ee})},H=M=>{if(M.button!==0)return;const{userSelectionRect:b}=h.getState();!m&&b&&M.target===f.current&&(k==null||k(M)),h.setState({nodesSelectionActive:p.current>0}),x(),i==null||i(M)},z=M=>{m&&(h.setState({nodesSelectionActive:p.current>0}),i==null||i(M)),x()},V=N&&(e||m);return X("div",{className:xe(["react-flow__pane",{dragging:$,selection:e}]),onClick:V?void 0:Nr(k,f),onContextMenu:Nr(E,f),onWheel:Nr(C,f),onMouseEnter:V?void 0:u,onMouseDown:V?I:void 0,onMouseMove:V?G:c,onMouseUp:V?H:void 0,onMouseLeave:V?z:l,ref:f,style:Ti,children:[d,w(ny,{})]})});Ma.displayName="Pane";function Ta(e,t){if(!e.parentNode)return!1;const n=t.get(e.parentNode);return n?n.selected?!0:Ta(n,t):!1}function Co(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function oy(e,t,n,r){return Array.from(e.values()).filter(i=>(i.selected||i.id===r)&&(!i.parentNode||!Ta(i,e))&&(i.draggable||t&&typeof i.draggable>"u")).map(i=>{var o,s;return{id:i.id,position:i.position||{x:0,y:0},positionAbsolute:i.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((o=i.positionAbsolute)==null?void 0:o.x)??0),y:n.y-(((s=i.positionAbsolute)==null?void 0:s.y)??0)},delta:{x:0,y:0},extent:i.extent,parentNode:i.parentNode,width:i.width,height:i.height}})}function sy(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function Ia(e,t,n,r,i=[0,0],o){const s=sy(e,e.extent||r);let a=s;if(e.extent==="parent")if(e.parentNode&&e.width&&e.height){const l=n.get(e.parentNode),{x:d,y:f}=Vt(l,i).positionAbsolute;a=l&&Te(d)&&Te(f)&&Te(l.width)&&Te(l.height)?[[d+e.width*i[0],f+e.height*i[1]],[d+l.width-e.width+e.width*i[0],f+l.height-e.height+e.height*i[1]]]:a}else o==null||o("005",Ze.error005()),a=s;else if(e.extent&&e.parentNode){const l=n.get(e.parentNode),{x:d,y:f}=Vt(l,i).positionAbsolute;a=[[e.extent[0][0]+d,e.extent[0][1]+f],[e.extent[1][0]+d,e.extent[1][1]+f]]}let u={x:0,y:0};if(e.parentNode){const l=n.get(e.parentNode);u=Vt(l,i).positionAbsolute}const c=a&&a!=="parent"?xi(t,a):t;return{position:{x:c.x-u.x,y:c.y-u.y},positionAbsolute:c}}function Er({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(i=>({...n.get(i.id),position:i.position,positionAbsolute:i.positionAbsolute}));return[e?r.find(i=>i.id===e):r[0],r]}const Ao=(e,t,n,r)=>{const i=t.querySelectorAll(e);if(!i||!i.length)return null;const o=Array.from(i),s=t.getBoundingClientRect(),a={x:s.width*r[0],y:s.height*r[1]};return o.map(u=>{const c=u.getBoundingClientRect();return{id:u.getAttribute("data-handleid"),position:u.getAttribute("data-handlepos"),x:(c.left-s.left-a.x)/n,y:(c.top-s.top-a.y)/n,...vi(u)}})};function nn(e,t,n){return n===void 0?n:r=>{const i=t().nodeInternals.get(e);i&&n(r,{...i})}}function qr({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:o,multiSelectionActive:s,nodeInternals:a,onError:u}=t.getState(),c=a.get(e);if(!c){u==null||u("012",Ze.error012(e));return}t.setState({nodesSelectionActive:!1}),c.selected?(n||c.selected&&s)&&(o({nodes:[c]}),requestAnimationFrame(()=>{var l;return(l=r==null?void 0:r.current)==null?void 0:l.blur()})):i([e])}function ay(){const e=ge();return y.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:i,snapToGrid:o}=e.getState(),s=n.touches?n.touches[0].clientX:n.clientX,a=n.touches?n.touches[0].clientY:n.clientY,u={x:(s-r[0])/r[2],y:(a-r[1])/r[2]};return{xSnapped:o?i[0]*Math.round(u.x/i[0]):u.x,ySnapped:o?i[1]*Math.round(u.y/i[1]):u.y,...u}},[])}function Sr(e){return(t,n,r)=>e==null?void 0:e(t,r)}function Pa({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:o,selectNodesOnDrag:s}){const a=ge(),[u,c]=y.useState(!1),l=y.useRef([]),d=y.useRef({x:null,y:null}),f=y.useRef(0),h=y.useRef(null),p=y.useRef({x:0,y:0}),g=y.useRef(null),v=y.useRef(!1),m=ay();return y.useEffect(()=>{if(e!=null&&e.current){const N=Re(e.current),$=({x:k,y:E})=>{const{nodeInternals:C,onNodeDrag:I,onSelectionDrag:G,updateNodePositions:H,nodeExtent:z,snapGrid:V,snapToGrid:M,nodeOrigin:b,onError:D}=a.getState();d.current={x:k,y:E};let S=!1,P={x:0,y:0,x2:0,y2:0};if(l.current.length>1&&z){const _=Ai(l.current,b);P=_i(_)}if(l.current=l.current.map(_=>{const T={x:k-_.distance.x,y:E-_.distance.y};M&&(T.x=V[0]*Math.round(T.x/V[0]),T.y=V[1]*Math.round(T.y/V[1]));const O=[[z[0][0],z[0][1]],[z[1][0],z[1][1]]];l.current.length>1&&z&&!_.extent&&(O[0][0]=_.positionAbsolute.x-P.x+z[0][0],O[1][0]=_.positionAbsolute.x+(_.width??0)-P.x2+z[1][0],O[0][1]=_.positionAbsolute.y-P.y+z[0][1],O[1][1]=_.positionAbsolute.y+(_.height??0)-P.y2+z[1][1]);const U=Ia(_,T,C,O,b,D);return S=S||_.position.x!==U.position.x||_.position.y!==U.position.y,_.position=U.position,_.positionAbsolute=U.positionAbsolute,_}),!S)return;H(l.current,!0,!0),c(!0);const R=i?I:Sr(G);if(R&&g.current){const[_,T]=Er({nodeId:i,dragItems:l.current,nodeInternals:C});R(g.current,_,T)}},x=()=>{if(!h.current)return;const[k,E]=na(p.current,h.current);if(k!==0||E!==0){const{transform:C,panBy:I}=a.getState();d.current.x=(d.current.x??0)-k/C[2],d.current.y=(d.current.y??0)-E/C[2],I({x:k,y:E})&&$(d.current)}f.current=requestAnimationFrame(x)};if(t)N.on(".drag",null);else{const k=yh().on("start",E=>{var S;const{nodeInternals:C,multiSelectionActive:I,domNode:G,nodesDraggable:H,unselectNodesAndEdges:z,onNodeDragStart:V,onSelectionDragStart:M}=a.getState(),b=i?V:Sr(M);!s&&!I&&i&&((S=C.get(i))!=null&&S.selected||z()),i&&o&&s&&qr({id:i,store:a,nodeRef:e});const D=m(E);if(d.current=D,l.current=oy(C,H,D,i),b&&l.current){const[P,R]=Er({nodeId:i,dragItems:l.current,nodeInternals:C});b(E.sourceEvent,P,R)}h.current=(G==null?void 0:G.getBoundingClientRect())||null,p.current=ut(E.sourceEvent,h.current)}).on("drag",E=>{const C=m(E),{autoPanOnNodeDrag:I}=a.getState();!v.current&&I&&(v.current=!0,x()),(d.current.x!==C.xSnapped||d.current.y!==C.ySnapped)&&l.current&&(g.current=E.sourceEvent,p.current=ut(E.sourceEvent,h.current),$(C))}).on("end",E=>{if(c(!1),v.current=!1,cancelAnimationFrame(f.current),l.current){const{updateNodePositions:C,nodeInternals:I,onNodeDragStop:G,onSelectionDragStop:H}=a.getState(),z=i?G:Sr(H);if(C(l.current,!1,!1),z){const[V,M]=Er({nodeId:i,dragItems:l.current,nodeInternals:I});z(E.sourceEvent,V,M)}}}).filter(E=>{const C=E.target;return!E.button&&(!n||!Co(C,`.${n}`,e))&&(!r||Co(C,r,e))});return N.call(k),()=>{N.on(".drag",null)}}}},[e,t,n,r,o,a,i,s,m]),u}function Ga(){const e=ge();return y.useCallback(n=>{const{nodeInternals:r,nodeExtent:i,updateNodePositions:o,getNodes:s,snapToGrid:a,snapGrid:u,onError:c,nodesDraggable:l}=e.getState(),d=s().filter(N=>N.selected&&(N.draggable||l&&typeof N.draggable>"u")),f=a?u[0]:5,h=a?u[1]:5,p=n.isShiftPressed?4:1,g=n.x*f*p,v=n.y*h*p,m=d.map(N=>{if(N.positionAbsolute){const $={x:N.positionAbsolute.x+g,y:N.positionAbsolute.y+v};a&&($.x=u[0]*Math.round($.x/u[0]),$.y=u[1]*Math.round($.y/u[1]));const{positionAbsolute:x,position:k}=Ia(N,$,r,i,void 0,c);N.position=k,N.positionAbsolute=x}return N});o(m,!0,!1)},[])}const Ht={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var rn=e=>{const t=({id:n,type:r,data:i,xPos:o,yPos:s,xPosOrigin:a,yPosOrigin:u,selected:c,onClick:l,onMouseEnter:d,onMouseMove:f,onMouseLeave:h,onContextMenu:p,onDoubleClick:g,style:v,className:m,isDraggable:N,isSelectable:$,isConnectable:x,isFocusable:k,selectNodesOnDrag:E,sourcePosition:C,targetPosition:I,hidden:G,resizeObserver:H,dragHandle:z,zIndex:V,isParent:M,noDragClassName:b,noPanClassName:D,initialized:S,disableKeyboardA11y:P,ariaLabel:R,rfId:_})=>{const T=ge(),O=y.useRef(null),U=y.useRef(C),K=y.useRef(I),j=y.useRef(r),ee=$||N||l||d||f||h,re=Ga(),ie=nn(n,T.getState,d),oe=nn(n,T.getState,f),ae=nn(n,T.getState,h),A=nn(n,T.getState,p),q=nn(n,T.getState,g),W=Z=>{if($&&(!E||!N)&&qr({id:n,store:T,nodeRef:O}),l){const ue=T.getState().nodeInternals.get(n);ue&&l(Z,{...ue})}},Q=Z=>{if(!Hr(Z))if(ia.includes(Z.key)&&$){const ue=Z.key==="Escape";qr({id:n,store:T,unselect:ue,nodeRef:O})}else!P&&N&&c&&Object.prototype.hasOwnProperty.call(Ht,Z.key)&&(T.setState({ariaLiveMessage:`Moved selected node ${Z.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~o}, y: ${~~s}`}),re({x:Ht[Z.key].x,y:Ht[Z.key].y,isShiftPressed:Z.shiftKey}))};y.useEffect(()=>{if(O.current&&!G){const Z=O.current;return H==null||H.observe(Z),()=>H==null?void 0:H.unobserve(Z)}},[G]),y.useEffect(()=>{const Z=j.current!==r,ue=U.current!==C,F=K.current!==I;O.current&&(Z||ue||F)&&(Z&&(j.current=r),ue&&(U.current=C),F&&(K.current=I),T.getState().updateNodeDimensions([{id:n,nodeElement:O.current,forceUpdate:!0}]))},[n,r,C,I]);const te=Pa({nodeRef:O,disabled:G||!N,noDragClassName:b,handleSelector:z,nodeId:n,isSelectable:$,selectNodesOnDrag:E});return G?null:w("div",{className:xe(["react-flow__node",`react-flow__node-${r}`,{[D]:N},m,{selected:c,selectable:$,parent:M,dragging:te}]),ref:O,style:{zIndex:V,transform:`translate(${a}px,${u}px)`,pointerEvents:ee?"all":"none",visibility:S?"visible":"hidden",...v},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:ie,onMouseMove:oe,onMouseLeave:ae,onContextMenu:A,onClick:W,onDoubleClick:q,onKeyDown:k?Q:void 0,tabIndex:k?0:void 0,role:k?"button":void 0,"aria-describedby":P?void 0:`${Ea}-${_}`,"aria-label":R,children:w(xg,{value:n,children:w(e,{id:n,data:i,type:r,xPos:o,yPos:s,selected:c,isConnectable:x,sourcePosition:C,targetPosition:I,dragging:te,dragHandle:z,zIndex:V})})})};return t.displayName="NodeWrapper",y.memo(t)};const cy=e=>{const t=e.getNodes().filter(n=>n.selected);return{...Ai(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function uy({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=ge(),{width:i,height:o,x:s,y:a,transformString:u,userSelectionActive:c}=le(cy,be),l=Ga(),d=y.useRef(null);if(y.useEffect(()=>{var p;n||(p=d.current)==null||p.focus({preventScroll:!0})},[n]),Pa({nodeRef:d}),c||!i||!o)return null;const f=e?p=>{const g=r.getState().getNodes().filter(v=>v.selected);e(p,g)}:void 0,h=p=>{Object.prototype.hasOwnProperty.call(Ht,p.key)&&l({x:Ht[p.key].x,y:Ht[p.key].y,isShiftPressed:p.shiftKey})};return w("div",{className:xe(["react-flow__nodesselection","react-flow__container",t]),style:{transform:u},children:w("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:n?void 0:-1,onKeyDown:n?void 0:h,style:{width:i,height:o,top:a,left:s}})})}var ly=y.memo(uy);const dy=e=>e.nodesSelectionActive,za=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:o,onPaneScroll:s,deleteKeyCode:a,onMove:u,onMoveStart:c,onMoveEnd:l,selectionKeyCode:d,selectionOnDrag:f,selectionMode:h,onSelectionStart:p,onSelectionEnd:g,multiSelectionKeyCode:v,panActivationKeyCode:m,zoomActivationKeyCode:N,elementsSelectable:$,zoomOnScroll:x,zoomOnPinch:k,panOnScroll:E,panOnScrollSpeed:C,panOnScrollMode:I,zoomOnDoubleClick:G,panOnDrag:H,defaultViewport:z,translateExtent:V,minZoom:M,maxZoom:b,preventScrolling:D,onSelectionContextMenu:S,noWheelClassName:P,noPanClassName:R,disableKeyboardA11y:_})=>{const T=le(dy),O=yn(d),K=yn(m)||H,j=O||f&&K!==!0;return jg({deleteKeyCode:a,multiSelectionKeyCode:v}),w(ey,{onMove:u,onMoveStart:c,onMoveEnd:l,onPaneContextMenu:o,elementsSelectable:$,zoomOnScroll:x,zoomOnPinch:k,panOnScroll:E,panOnScrollSpeed:C,panOnScrollMode:I,zoomOnDoubleClick:G,panOnDrag:!O&&K,defaultViewport:z,translateExtent:V,minZoom:M,maxZoom:b,zoomActivationKeyCode:N,preventScrolling:D,noWheelClassName:P,noPanClassName:R,children:X(Ma,{onSelectionStart:p,onSelectionEnd:g,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:o,onPaneScroll:s,panOnDrag:K,isSelecting:!!j,selectionMode:h,children:[e,T&&w(ly,{onSelectionContextMenu:S,noPanClassName:R,disableKeyboardA11y:_})]})})};za.displayName="FlowRenderer";var fy=y.memo(za);function hy(e){return le(y.useCallback(n=>e?da(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function py(e){const t={input:rn(e.input||va),default:rn(e.default||Ur),output:rn(e.output||_a),group:rn(e.group||Di)},n={},r=Object.keys(e).filter(i=>!["input","default","output","group"].includes(i)).reduce((i,o)=>(i[o]=rn(e[o]||Ur),i),n);return{...t,...r}}const gy=({x:e,y:t,width:n,height:r,origin:i})=>!n||!r?{x:e,y:t}:i[0]<0||i[1]<0||i[0]>1||i[1]>1?{x:e,y:t}:{x:e-n*i[0],y:t-r*i[1]},yy=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Ra=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,updateNodeDimensions:o,onError:s}=le(yy,be),a=hy(e.onlyRenderVisibleElements),u=y.useRef(),c=y.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const l=new ResizeObserver(d=>{const f=d.map(h=>({id:h.target.getAttribute("data-id"),nodeElement:h.target,forceUpdate:!0}));o(f)});return u.current=l,l},[]);return y.useEffect(()=>()=>{var l;(l=u==null?void 0:u.current)==null||l.disconnect()},[]),w("div",{className:"react-flow__nodes",style:Ti,children:a.map(l=>{var k,E;let d=l.type||"default";e.nodeTypes[d]||(s==null||s("003",Ze.error003(d)),d="default");const f=e.nodeTypes[d]||e.nodeTypes.default,h=!!(l.draggable||t&&typeof l.draggable>"u"),p=!!(l.selectable||i&&typeof l.selectable>"u"),g=!!(l.connectable||n&&typeof l.connectable>"u"),v=!!(l.focusable||r&&typeof l.focusable>"u"),m=e.nodeExtent?xi(l.positionAbsolute,e.nodeExtent):l.positionAbsolute,N=(m==null?void 0:m.x)??0,$=(m==null?void 0:m.y)??0,x=gy({x:N,y:$,width:l.width??0,height:l.height??0,origin:e.nodeOrigin});return w(f,{id:l.id,className:l.className,style:l.style,type:d,data:l.data,sourcePosition:l.sourcePosition||Y.Bottom,targetPosition:l.targetPosition||Y.Top,hidden:l.hidden,xPos:N,yPos:$,xPosOrigin:x.x,yPosOrigin:x.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!l.selected,isDraggable:h,isSelectable:p,isConnectable:g,isFocusable:v,resizeObserver:c,dragHandle:l.dragHandle,zIndex:((k=l[pe])==null?void 0:k.z)??0,isParent:!!((E=l[pe])!=null&&E.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!l.width&&!!l.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:l.ariaLabel},l.id)})})};Ra.displayName="NodeRenderer";var my=y.memo(Ra);const wy=(e,t,n)=>n===Y.Left?e-t:n===Y.Right?e+t:e,by=(e,t,n)=>n===Y.Top?e-t:n===Y.Bottom?e+t:e,ko="react-flow__edgeupdater",Do=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:o,onMouseOut:s,type:a})=>w("circle",{onMouseDown:i,onMouseEnter:o,onMouseOut:s,className:xe([ko,`${ko}-${a}`]),cx:wy(t,r,e),cy:by(n,r,e),r,stroke:"transparent",fill:"transparent"}),vy=()=>!0;var Pt=e=>{const t=({id:n,className:r,type:i,data:o,onClick:s,onEdgeDoubleClick:a,selected:u,animated:c,label:l,labelStyle:d,labelShowBg:f,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:g,style:v,source:m,target:N,sourceX:$,sourceY:x,targetX:k,targetY:E,sourcePosition:C,targetPosition:I,elementsSelectable:G,hidden:H,sourceHandleId:z,targetHandleId:V,onContextMenu:M,onMouseEnter:b,onMouseMove:D,onMouseLeave:S,edgeUpdaterRadius:P,onEdgeUpdate:R,onEdgeUpdateStart:_,onEdgeUpdateEnd:T,markerEnd:O,markerStart:U,rfId:K,ariaLabel:j,isFocusable:ee,isUpdatable:re,pathOptions:ie,interactionWidth:oe})=>{const ae=y.useRef(null),[A,q]=y.useState(!1),[W,Q]=y.useState(!1),te=ge(),Z=y.useMemo(()=>`url(#${Fr(U,K)})`,[U,K]),ue=y.useMemo(()=>`url(#${Fr(O,K)})`,[O,K]);if(H)return null;const F=we=>{const{edges:$e,addSelectedEdges:ht}=te.getState();if(G&&(te.setState({nodesSelectionActive:!1}),ht([n])),s){const pt=$e.find(gt=>gt.id===n);s(we,pt)}},me=tn(n,te.getState,a),Be=tn(n,te.getState,M),Qe=tn(n,te.getState,b),_e=tn(n,te.getState,D),$t=tn(n,te.getState,S),dt=(we,$e)=>{if(we.button!==0)return;const{edges:ht,isValidConnection:pt}=te.getState(),gt=$e?N:m,xn=($e?V:z)||null,yt=$e?"target":"source",lr=pt||vy,dr=$e,jt=ht.find(mt=>mt.id===n);Q(!0),_==null||_(we,jt,yt);const fr=mt=>{Q(!1),T==null||T(mt,jt,yt)};ya({event:we,handleId:xn,nodeId:gt,onConnect:mt=>R==null?void 0:R(jt,mt),isTarget:dr,getState:te.getState,setState:te.setState,isValidConnection:lr,edgeUpdaterType:yt,onEdgeUpdateEnd:fr})},et=we=>dt(we,!0),Ct=we=>dt(we,!1),tt=()=>q(!0),ft=()=>q(!1),Xt=!G&&!s,At=we=>{var $e;if(ia.includes(we.key)&&G){const{unselectNodesAndEdges:ht,addSelectedEdges:pt,edges:gt}=te.getState();we.key==="Escape"?(($e=ae.current)==null||$e.blur(),ht({edges:[gt.find(yt=>yt.id===n)]})):pt([n])}};return X("g",{className:xe(["react-flow__edge",`react-flow__edge-${i}`,r,{selected:u,animated:c,inactive:Xt,updating:A}]),onClick:F,onDoubleClick:me,onContextMenu:Be,onMouseEnter:Qe,onMouseMove:_e,onMouseLeave:$t,onKeyDown:ee?At:void 0,tabIndex:ee?0:void 0,role:ee?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":j===null?void 0:j||`Edge from ${m} to ${N}`,"aria-describedby":ee?`${Sa}-${K}`:void 0,ref:ae,children:[!W&&w(e,{id:n,source:m,target:N,selected:u,animated:c,label:l,labelStyle:d,labelShowBg:f,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:g,data:o,style:v,sourceX:$,sourceY:x,targetX:k,targetY:E,sourcePosition:C,targetPosition:I,sourceHandleId:z,targetHandleId:V,markerStart:Z,markerEnd:ue,pathOptions:ie,interactionWidth:oe}),re&&X(Se,{children:[(re==="source"||re===!0)&&w(Do,{position:C,centerX:$,centerY:x,radius:P,onMouseDown:et,onMouseEnter:tt,onMouseOut:ft,type:"source"}),(re==="target"||re===!0)&&w(Do,{position:I,centerX:k,centerY:E,radius:P,onMouseDown:Ct,onMouseEnter:tt,onMouseOut:ft,type:"target"})]})]})};return t.displayName="EdgeWrapper",y.memo(t)};function xy(e){const t={default:Pt(e.default||jn),straight:Pt(e.bezier||Si),step:Pt(e.step||Ei),smoothstep:Pt(e.step||ur),simplebezier:Pt(e.simplebezier||Ni)},n={},r=Object.keys(e).filter(i=>!["default","bezier"].includes(i)).reduce((i,o)=>(i[o]=Pt(e[o]||jn),i),n);return{...t,...r}}function Mo(e,t,n=null){const r=((n==null?void 0:n.x)||0)+t.x,i=((n==null?void 0:n.y)||0)+t.y,o=(n==null?void 0:n.width)||t.width,s=(n==null?void 0:n.height)||t.height;switch(e){case Y.Top:return{x:r+o/2,y:i};case Y.Right:return{x:r+o,y:i+s/2};case Y.Bottom:return{x:r+o/2,y:i+s};case Y.Left:return{x:r,y:i+s/2}}}function To(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const _y=(e,t,n,r,i,o)=>{const s=Mo(n,e,t),a=Mo(o,r,i);return{sourceX:s.x,sourceY:s.y,targetX:a.x,targetY:a.y}};function Ny({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:i,targetHeight:o,width:s,height:a,transform:u}){const c={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+r,t.y+o)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const l=_i({x:(0-u[0])/u[2],y:(0-u[1])/u[2],width:s/u[2],height:a/u[2]}),d=Math.max(0,Math.min(l.x2,c.x2)-Math.max(l.x,c.x)),f=Math.max(0,Math.min(l.y2,c.y2)-Math.max(l.y,c.y));return Math.ceil(d*f)>0}function Io(e){var r,i,o,s,a;const t=((r=e==null?void 0:e[pe])==null?void 0:r.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)<"u"&&typeof((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.y)<"u";return[{x:((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.x)||0,y:((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const Ey=[{level:0,isMaxLevel:!0,edges:[]}];function Sy(e,t,n=!1){let r=-1;const i=e.reduce((s,a)=>{var l,d;const u=Te(a.zIndex);let c=u?a.zIndex:0;if(n){const f=t.get(a.target),h=t.get(a.source),p=a.selected||(f==null?void 0:f.selected)||(h==null?void 0:h.selected),g=Math.max(((l=h==null?void 0:h[pe])==null?void 0:l.z)||0,((d=f==null?void 0:f[pe])==null?void 0:d.z)||0,1e3);c=(u?a.zIndex:0)+(p?g:0)}return s[c]?s[c].push(a):s[c]=[a],r=c>r?c:r,s},{}),o=Object.entries(i).map(([s,a])=>{const u=+s;return{edges:a,level:u,isMaxLevel:u===r}});return o.length===0?Ey:o}function $y(e,t,n){const r=le(y.useCallback(i=>e?i.edges.filter(o=>{const s=t.get(o.source),a=t.get(o.target);return(s==null?void 0:s.width)&&(s==null?void 0:s.height)&&(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&Ny({sourcePos:s.positionAbsolute||{x:0,y:0},targetPos:a.positionAbsolute||{x:0,y:0},sourceWidth:s.width,sourceHeight:s.height,targetWidth:a.width,targetHeight:a.height,width:i.width,height:i.height,transform:i.transform})}):i.edges,[e,t]));return Sy(r,t,n)}const Cy=({color:e="none",strokeWidth:t=1})=>w("polyline",{stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:t,fill:"none",points:"-5,-4 0,0 -5,4"}),Ay=({color:e="none",strokeWidth:t=1})=>w("polyline",{stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:t,fill:e,points:"-5,-4 0,0 -5,4 -5,-4"}),Po={[Xn.Arrow]:Cy,[Xn.ArrowClosed]:Ay};function ky(e){const t=ge();return y.useMemo(()=>{var i,o;return Object.prototype.hasOwnProperty.call(Po,e)?Po[e]:((o=(i=t.getState()).onError)==null||o.call(i,"009",Ze.error009(e)),null)},[e])}const Dy=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:o="strokeWidth",strokeWidth:s,orient:a="auto-start-reverse"})=>{const u=ky(t);return u?w("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:o,orient:a,refX:"0",refY:"0",children:w(u,{color:n,strokeWidth:s})}):null},My=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((i,o)=>([o.markerStart,o.markerEnd].forEach(s=>{if(s&&typeof s=="object"){const a=Fr(s,t);r.includes(a)||(i.push({id:a,color:s.color||e,...s}),r.push(a))}}),i),[]).sort((i,o)=>i.id.localeCompare(o.id))},Oa=({defaultColor:e,rfId:t})=>{const n=le(y.useCallback(My({defaultColor:e,rfId:t}),[e,t]),(r,i)=>!(r.length!==i.length||r.some((o,s)=>o.id!==i[s].id)));return w("defs",{children:n.map(r=>w(Dy,{id:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient},r.id))})};Oa.displayName="MarkerDefinitions";var Ty=y.memo(Oa);const Iy=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),La=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:i,noPanClassName:o,onEdgeUpdate:s,onEdgeContextMenu:a,onEdgeMouseEnter:u,onEdgeMouseMove:c,onEdgeMouseLeave:l,onEdgeClick:d,edgeUpdaterRadius:f,onEdgeDoubleClick:h,onEdgeUpdateStart:p,onEdgeUpdateEnd:g,children:v})=>{const{edgesFocusable:m,edgesUpdatable:N,elementsSelectable:$,width:x,height:k,connectionMode:E,nodeInternals:C,onError:I}=le(Iy,be),G=$y(t,C,n);return x?X(Se,{children:[G.map(({level:H,edges:z,isMaxLevel:V})=>X("svg",{style:{zIndex:H},width:x,height:k,className:"react-flow__edges react-flow__container",children:[V&&w(Ty,{defaultColor:e,rfId:r}),w("g",{children:z.map(M=>{const[b,D,S]=Io(C.get(M.source)),[P,R,_]=Io(C.get(M.target));if(!S||!_)return null;let T=M.type||"default";i[T]||(I==null||I("011",Ze.error011(T)),T="default");const O=i[T]||i.default,U=E===St.Strict?R.target:(R.target??[]).concat(R.source??[]),K=To(D.source,M.sourceHandle),j=To(U,M.targetHandle),ee=(K==null?void 0:K.position)||Y.Bottom,re=(j==null?void 0:j.position)||Y.Top,ie=!!(M.focusable||m&&typeof M.focusable>"u"),oe=typeof s<"u"&&(M.updatable||N&&typeof M.updatable>"u");if(!K||!j)return I==null||I("008",Ze.error008(K,M)),null;const{sourceX:ae,sourceY:A,targetX:q,targetY:W}=_y(b,K,ee,P,j,re);return w(O,{id:M.id,className:xe([M.className,o]),type:T,data:M.data,selected:!!M.selected,animated:!!M.animated,hidden:!!M.hidden,label:M.label,labelStyle:M.labelStyle,labelShowBg:M.labelShowBg,labelBgStyle:M.labelBgStyle,labelBgPadding:M.labelBgPadding,labelBgBorderRadius:M.labelBgBorderRadius,style:M.style,source:M.source,target:M.target,sourceHandleId:M.sourceHandle,targetHandleId:M.targetHandle,markerEnd:M.markerEnd,markerStart:M.markerStart,sourceX:ae,sourceY:A,targetX:q,targetY:W,sourcePosition:ee,targetPosition:re,elementsSelectable:$,onEdgeUpdate:s,onContextMenu:a,onMouseEnter:u,onMouseMove:c,onMouseLeave:l,onClick:d,edgeUpdaterRadius:f,onEdgeDoubleClick:h,onEdgeUpdateStart:p,onEdgeUpdateEnd:g,rfId:r,ariaLabel:M.ariaLabel,isFocusable:ie,isUpdatable:oe,pathOptions:"pathOptions"in M?M.pathOptions:void 0,interactionWidth:M.interactionWidth},M.id)})})]},H)),v]}):null};La.displayName="EdgeRenderer";var Py=y.memo(La);const Gy=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function zy({children:e}){const t=le(Gy);return w("div",{className:"react-flow__viewport react-flow__container",style:{transform:t},children:e})}function Ry(e){const t=Mi(),n=y.useRef(!1);y.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const Oy={[Y.Left]:Y.Right,[Y.Right]:Y.Left,[Y.Top]:Y.Bottom,[Y.Bottom]:Y.Top},Va=({nodeId:e,handleType:t,style:n,type:r=at.Bezier,CustomComponent:i,connectionStatus:o})=>{var E,C,I;const{fromNode:s,handleId:a,toX:u,toY:c,connectionMode:l}=le(y.useCallback(G=>({fromNode:G.nodeInternals.get(e),handleId:G.connectionHandleId,toX:(G.connectionPosition.x-G.transform[0])/G.transform[2],toY:(G.connectionPosition.y-G.transform[1])/G.transform[2],connectionMode:G.connectionMode}),[e]),be),d=(E=s==null?void 0:s[pe])==null?void 0:E.handleBounds;let f=d==null?void 0:d[t];if(l===St.Loose&&(f=f||(d==null?void 0:d[t==="source"?"target":"source"])),!s||!f)return null;const h=a?f.find(G=>G.id===a):f[0],p=h?h.x+h.width/2:(s.width??0)/2,g=h?h.y+h.height/2:s.height??0,v=(((C=s.positionAbsolute)==null?void 0:C.x)??0)+p,m=(((I=s.positionAbsolute)==null?void 0:I.y)??0)+g,N=h==null?void 0:h.position,$=N?Oy[N]:null;if(!N||!$)return null;if(i)return w(i,{connectionLineType:r,connectionLineStyle:n,fromNode:s,fromHandle:h,fromX:v,fromY:m,toX:u,toY:c,fromPosition:N,toPosition:$,connectionStatus:o});let x="";const k={sourceX:v,sourceY:m,sourcePosition:N,targetX:u,targetY:c,targetPosition:$};return r===at.Bezier?[x]=$i(k):r===at.Step?[x]=Br({...k,borderRadius:0}):r===at.SmoothStep?[x]=Br(k):r===at.SimpleBezier?[x]=ca(k):x=`M${v},${m} ${u},${c}`,w("path",{d:x,fill:"none",className:"react-flow__connection-path",style:n})};Va.displayName="ConnectionLine";const Ly=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function Vy({containerStyle:e,style:t,type:n,component:r}){const{nodeId:i,handleType:o,nodesConnectable:s,width:a,height:u,connectionStatus:c}=le(Ly,be);return!(i&&o&&a&&s)?null:w("svg",{style:e,width:a,height:u,className:"react-flow__edges react-flow__connectionline react-flow__container",children:w("g",{className:xe(["react-flow__connection",c]),children:w(Va,{nodeId:i,handleType:o,style:t,type:n,CustomComponent:r,connectionStatus:c})})})}function Go(e,t){return y.useRef(null),ge(),y.useMemo(()=>t(e),[e])}const Ha=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:i,onInit:o,onNodeClick:s,onEdgeClick:a,onNodeDoubleClick:u,onEdgeDoubleClick:c,onNodeMouseEnter:l,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:h,onSelectionContextMenu:p,onSelectionStart:g,onSelectionEnd:v,connectionLineType:m,connectionLineStyle:N,connectionLineComponent:$,connectionLineContainerStyle:x,selectionKeyCode:k,selectionOnDrag:E,selectionMode:C,multiSelectionKeyCode:I,panActivationKeyCode:G,zoomActivationKeyCode:H,deleteKeyCode:z,onlyRenderVisibleElements:V,elementsSelectable:M,selectNodesOnDrag:b,defaultViewport:D,translateExtent:S,minZoom:P,maxZoom:R,preventScrolling:_,defaultMarkerColor:T,zoomOnScroll:O,zoomOnPinch:U,panOnScroll:K,panOnScrollSpeed:j,panOnScrollMode:ee,zoomOnDoubleClick:re,panOnDrag:ie,onPaneClick:oe,onPaneMouseEnter:ae,onPaneMouseMove:A,onPaneMouseLeave:q,onPaneScroll:W,onPaneContextMenu:Q,onEdgeUpdate:te,onEdgeContextMenu:Z,onEdgeMouseEnter:ue,onEdgeMouseMove:F,onEdgeMouseLeave:me,edgeUpdaterRadius:Be,onEdgeUpdateStart:Qe,onEdgeUpdateEnd:_e,noDragClassName:$t,noWheelClassName:dt,noPanClassName:et,elevateEdgesOnSelect:Ct,disableKeyboardA11y:tt,nodeOrigin:ft,nodeExtent:Xt,rfId:At})=>{const we=Go(e,py),$e=Go(t,xy);return Ry(o),w(fy,{onPaneClick:oe,onPaneMouseEnter:ae,onPaneMouseMove:A,onPaneMouseLeave:q,onPaneContextMenu:Q,onPaneScroll:W,deleteKeyCode:z,selectionKeyCode:k,selectionOnDrag:E,selectionMode:C,onSelectionStart:g,onSelectionEnd:v,multiSelectionKeyCode:I,panActivationKeyCode:G,zoomActivationKeyCode:H,elementsSelectable:M,onMove:n,onMoveStart:r,onMoveEnd:i,zoomOnScroll:O,zoomOnPinch:U,zoomOnDoubleClick:re,panOnScroll:K,panOnScrollSpeed:j,panOnScrollMode:ee,panOnDrag:ie,defaultViewport:D,translateExtent:S,minZoom:P,maxZoom:R,onSelectionContextMenu:p,preventScrolling:_,noDragClassName:$t,noWheelClassName:dt,noPanClassName:et,disableKeyboardA11y:tt,children:X(zy,{children:[w(Py,{edgeTypes:$e,onEdgeClick:a,onEdgeDoubleClick:c,onEdgeUpdate:te,onlyRenderVisibleElements:V,onEdgeContextMenu:Z,onEdgeMouseEnter:ue,onEdgeMouseMove:F,onEdgeMouseLeave:me,onEdgeUpdateStart:Qe,onEdgeUpdateEnd:_e,edgeUpdaterRadius:Be,defaultMarkerColor:T,noPanClassName:et,elevateEdgesOnSelect:!!Ct,disableKeyboardA11y:tt,rfId:At,children:w(Vy,{style:N,type:m,component:$,containerStyle:x})}),w("div",{className:"react-flow__edgelabel-renderer"}),w(my,{nodeTypes:we,onNodeClick:s,onNodeDoubleClick:u,onNodeMouseEnter:l,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:h,selectNodesOnDrag:b,onlyRenderVisibleElements:V,noPanClassName:et,noDragClassName:$t,disableKeyboardA11y:tt,nodeOrigin:ft,nodeExtent:Xt,rfId:At})]})})};Ha.displayName="GraphView";var Hy=y.memo(Ha);const Wr=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nt={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Wr,nodeExtent:Wr,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:St.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:gg,isValidConnection:void 0},By=()=>Cd((e,t)=>({...nt,setNodes:n=>{const{nodeInternals:r,nodeOrigin:i,elevateNodesOnSelect:o}=t();e({nodeInternals:_r(n,r,i,o)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(i=>({...r,...i}))})},setDefaultNodesAndEdges:(n,r)=>{const i=typeof n<"u",o=typeof r<"u",s=i?_r(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:s,edges:o?r:[],hasDefaultNodes:i,hasDefaultEdges:o})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:i,fitViewOnInit:o,fitViewOnInitDone:s,fitViewOnInitOptions:a,domNode:u,nodeOrigin:c}=t(),l=u==null?void 0:u.querySelector(".react-flow__viewport");if(!l)return;const d=window.getComputedStyle(l),{m22:f}=new window.DOMMatrixReadOnly(d.transform),h=n.reduce((g,v)=>{const m=i.get(v.id);if(m){const N=vi(v.nodeElement);!!(N.width&&N.height&&(m.width!==N.width||m.height!==N.height||v.forceUpdate))&&(i.set(m.id,{...m,[pe]:{...m[pe],handleBounds:{source:Ao(".source",v.nodeElement,f,c),target:Ao(".target",v.nodeElement,f,c)}},...N}),g.push({id:m.id,type:"dimensions",dimensions:N}))}return g},[]);Ca(i,c);const p=s||o&&!s&&Aa(t,{initial:!0,...a});e({nodeInternals:new Map(i),fitViewOnInitDone:p}),(h==null?void 0:h.length)>0&&(r==null||r(h))},updateNodePositions:(n,r=!0,i=!1)=>{const{triggerNodeChanges:o}=t(),s=n.map(a=>{const u={id:a.id,type:"position",dragging:i};return r&&(u.positionAbsolute=a.positionAbsolute,u.position=a.position),u});o(s)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:i,hasDefaultNodes:o,nodeOrigin:s,getNodes:a,elevateNodesOnSelect:u}=t();if(n!=null&&n.length){if(o){const c=Da(n,a()),l=_r(c,i,s,u);e({nodeInternals:l})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:i,getNodes:o}=t();let s,a=null;r?s=n.map(u=>it(u,!0)):(s=zt(o(),n),a=zt(i,[])),Tn({changedNodes:s,changedEdges:a,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:i,getNodes:o}=t();let s,a=null;r?s=n.map(u=>it(u,!0)):(s=zt(i,n),a=zt(o(),[])),Tn({changedNodes:a,changedEdges:s,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:i,getNodes:o}=t(),s=n||o(),a=r||i,u=s.map(l=>(l.selected=!1,it(l.id,!1))),c=a.map(l=>it(l.id,!1));Tn({changedNodes:u,changedEdges:c,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:i}=t();r==null||r.scaleExtent([n,i]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:i}=t();r==null||r.scaleExtent([i,n]),e({maxZoom:n})},setTranslateExtent:n=>{var r;(r=t().d3Zoom)==null||r.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),o=r().filter(a=>a.selected).map(a=>it(a.id,!1)),s=n.filter(a=>a.selected).map(a=>it(a.id,!1));Tn({changedNodes:o,changedEdges:s,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(i=>{i.positionAbsolute=xi(i.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:i,height:o,d3Zoom:s,d3Selection:a,translateExtent:u}=t();if(!s||!a||!n.x&&!n.y)return!1;const c=ct.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),l=[[0,0],[i,o]],d=s==null?void 0:s.constrain()(c,l,u);return s.transform(a,d),r[0]!==d.x||r[1]!==d.y||r[2]!==d.k},cancelConnection:()=>e({connectionNodeId:nt.connectionNodeId,connectionHandleId:nt.connectionHandleId,connectionHandleType:nt.connectionHandleType,connectionStatus:nt.connectionStatus,connectionStartHandle:nt.connectionStartHandle,connectionEndHandle:nt.connectionEndHandle}),reset:()=>e({...nt})}),Object.is),Ba=({children:e})=>{const t=y.useRef(null);return t.current||(t.current=By()),w(ag,{value:t.current,children:e})};Ba.displayName="ReactFlowProvider";const Fa=({children:e})=>y.useContext(cr)?w(Se,{children:e}):w(Ba,{children:e});Fa.displayName="ReactFlowWrapper";const Fy={input:va,default:Ur,output:_a,group:Di},Uy={default:jn,straight:Si,step:Ei,smoothstep:ur,simplebezier:Ni},qy=[0,0],Wy=[15,15],Yy={x:0,y:0,zoom:1},Ky={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Ua=y.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:o=Fy,edgeTypes:s=Uy,onNodeClick:a,onEdgeClick:u,onInit:c,onMove:l,onMoveStart:d,onMoveEnd:f,onConnect:h,onConnectStart:p,onConnectEnd:g,onClickConnectStart:v,onClickConnectEnd:m,onNodeMouseEnter:N,onNodeMouseMove:$,onNodeMouseLeave:x,onNodeContextMenu:k,onNodeDoubleClick:E,onNodeDragStart:C,onNodeDrag:I,onNodeDragStop:G,onNodesDelete:H,onEdgesDelete:z,onSelectionChange:V,onSelectionDragStart:M,onSelectionDrag:b,onSelectionDragStop:D,onSelectionContextMenu:S,onSelectionStart:P,onSelectionEnd:R,connectionMode:_=St.Strict,connectionLineType:T=at.Bezier,connectionLineStyle:O,connectionLineComponent:U,connectionLineContainerStyle:K,deleteKeyCode:j="Backspace",selectionKeyCode:ee="Shift",selectionOnDrag:re=!1,selectionMode:ie=gn.Full,panActivationKeyCode:oe="Space",multiSelectionKeyCode:ae=Kn()?"Meta":"Control",zoomActivationKeyCode:A=Kn()?"Meta":"Control",snapToGrid:q=!1,snapGrid:W=Wy,onlyRenderVisibleElements:Q=!1,selectNodesOnDrag:te=!0,nodesDraggable:Z,nodesConnectable:ue,nodesFocusable:F,nodeOrigin:me=qy,edgesFocusable:Be,edgesUpdatable:Qe,elementsSelectable:_e,defaultViewport:$t=Yy,minZoom:dt=.5,maxZoom:et=2,translateExtent:Ct=Wr,preventScrolling:tt=!0,nodeExtent:ft,defaultMarkerColor:Xt="#b1b1b7",zoomOnScroll:At=!0,zoomOnPinch:we=!0,panOnScroll:$e=!1,panOnScrollSpeed:ht=.5,panOnScrollMode:pt=xt.Free,zoomOnDoubleClick:gt=!0,panOnDrag:xn=!0,onPaneClick:yt,onPaneMouseEnter:lr,onPaneMouseMove:dr,onPaneMouseLeave:jt,onPaneScroll:fr,onPaneContextMenu:Ii,children:mt,onEdgeUpdate:ja,onEdgeContextMenu:Za,onEdgeDoubleClick:Ja,onEdgeMouseEnter:Qa,onEdgeMouseMove:ec,onEdgeMouseLeave:tc,onEdgeUpdateStart:nc,onEdgeUpdateEnd:rc,edgeUpdaterRadius:ic=10,onNodesChange:oc,onEdgesChange:sc,noDragClassName:ac="nodrag",noWheelClassName:cc="nowheel",noPanClassName:Pi="nopan",fitView:uc=!1,fitViewOptions:lc,connectOnClick:dc=!0,attributionPosition:fc,proOptions:hc,defaultEdgeOptions:pc,elevateNodesOnSelect:gc=!0,elevateEdgesOnSelect:yc=!1,disableKeyboardA11y:Gi=!1,autoPanOnConnect:mc=!0,autoPanOnNodeDrag:wc=!0,connectionRadius:bc=20,isValidConnection:vc,onError:xc,style:_c,id:zi,...Nc},Ec)=>{const hr=zi||"1";return w("div",{...Nc,style:{..._c,...Ky},ref:Ec,className:xe(["react-flow",i]),"data-testid":"rf__wrapper",id:zi,children:X(Fa,{children:[w(Hy,{onInit:c,onMove:l,onMoveStart:d,onMoveEnd:f,onNodeClick:a,onEdgeClick:u,onNodeMouseEnter:N,onNodeMouseMove:$,onNodeMouseLeave:x,onNodeContextMenu:k,onNodeDoubleClick:E,nodeTypes:o,edgeTypes:s,connectionLineType:T,connectionLineStyle:O,connectionLineComponent:U,connectionLineContainerStyle:K,selectionKeyCode:ee,selectionOnDrag:re,selectionMode:ie,deleteKeyCode:j,multiSelectionKeyCode:ae,panActivationKeyCode:oe,zoomActivationKeyCode:A,onlyRenderVisibleElements:Q,selectNodesOnDrag:te,defaultViewport:$t,translateExtent:Ct,minZoom:dt,maxZoom:et,preventScrolling:tt,zoomOnScroll:At,zoomOnPinch:we,zoomOnDoubleClick:gt,panOnScroll:$e,panOnScrollSpeed:ht,panOnScrollMode:pt,panOnDrag:xn,onPaneClick:yt,onPaneMouseEnter:lr,onPaneMouseMove:dr,onPaneMouseLeave:jt,onPaneScroll:fr,onPaneContextMenu:Ii,onSelectionContextMenu:S,onSelectionStart:P,onSelectionEnd:R,onEdgeUpdate:ja,onEdgeContextMenu:Za,onEdgeDoubleClick:Ja,onEdgeMouseEnter:Qa,onEdgeMouseMove:ec,onEdgeMouseLeave:tc,onEdgeUpdateStart:nc,onEdgeUpdateEnd:rc,edgeUpdaterRadius:ic,defaultMarkerColor:Xt,noDragClassName:ac,noWheelClassName:cc,noPanClassName:Pi,elevateEdgesOnSelect:yc,rfId:hr,disableKeyboardA11y:Gi,nodeOrigin:me,nodeExtent:ft}),w(Og,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:h,onConnectStart:p,onConnectEnd:g,onClickConnectStart:v,onClickConnectEnd:m,nodesDraggable:Z,nodesConnectable:ue,nodesFocusable:F,edgesFocusable:Be,edgesUpdatable:Qe,elementsSelectable:_e,elevateNodesOnSelect:gc,minZoom:dt,maxZoom:et,nodeExtent:ft,onNodesChange:oc,onEdgesChange:sc,snapToGrid:q,snapGrid:W,connectionMode:_,translateExtent:Ct,connectOnClick:dc,defaultEdgeOptions:pc,fitView:uc,fitViewOptions:lc,onNodesDelete:H,onEdgesDelete:z,onNodeDragStart:C,onNodeDrag:I,onNodeDragStop:G,onSelectionDrag:b,onSelectionDragStart:M,onSelectionDragStop:D,noPanClassName:Pi,nodeOrigin:me,rfId:hr,autoPanOnConnect:mc,autoPanOnNodeDrag:wc,onError:xc,connectionRadius:bc,isValidConnection:vc}),w(zg,{onSelectionChange:V}),mt,w(ug,{proOptions:hc,position:fc}),w(Fg,{rfId:hr,disableKeyboardA11y:Gi})]})})});Ua.displayName="ReactFlow";function qa(e){return t=>{const[n,r]=y.useState(t),i=y.useCallback(o=>r(s=>e(o,s)),[]);return[n,r,i]}}const Xy=qa(Da),jy=qa(ry);function Zy(){return w("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:w("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function Jy(){return w("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:w("path",{d:"M0 0h32v4.2H0z"})})}function Qy(){return w("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:w("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function em(){return w("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:w("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function tm(){return w("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:w("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}const an=({children:e,className:t,...n})=>w("button",{type:"button",className:xe(["react-flow__controls-button",t]),...n,children:e});an.displayName="ControlButton";const nm=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),Wa=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:o,onZoomOut:s,onFitView:a,onInteractiveChange:u,className:c,children:l,position:d="bottom-left"})=>{const f=ge(),[h,p]=y.useState(!1),{isInteractive:g,minZoomReached:v,maxZoomReached:m}=le(nm,be),{zoomIn:N,zoomOut:$,fitView:x}=Mi();if(y.useEffect(()=>{p(!0)},[]),!h)return null;const k=()=>{N(),o==null||o()},E=()=>{$(),s==null||s()},C=()=>{x(i),a==null||a()},I=()=>{f.setState({nodesDraggable:!g,nodesConnectable:!g,elementsSelectable:!g}),u==null||u(!g)};return X(ta,{className:xe(["react-flow__controls",c]),position:d,style:e,"data-testid":"rf__controls",children:[t&&X(Se,{children:[w(an,{onClick:k,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:m,children:w(Zy,{})}),w(an,{onClick:E,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:v,children:w(Jy,{})})]}),n&&w(an,{className:"react-flow__controls-fitview",onClick:C,title:"fit view","aria-label":"fit view",children:w(Qy,{})}),r&&w(an,{className:"react-flow__controls-interactive",onClick:I,title:"toggle interactivity","aria-label":"toggle interactivity",children:g?w(tm,{}):w(em,{})}),l]})};Wa.displayName="Controls";var rm=y.memo(Wa),Le;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Le||(Le={}));function im({color:e,dimensions:t,lineWidth:n}){return w("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function om({color:e,radius:t}){return w("circle",{cx:t,cy:t,r:t,fill:e})}const sm={[Le.Dots]:"#91919a",[Le.Lines]:"#eee",[Le.Cross]:"#e2e2e2"},am={[Le.Dots]:1,[Le.Lines]:1,[Le.Cross]:6},cm=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Ya({id:e,variant:t=Le.Dots,gap:n=20,size:r,lineWidth:i=1,offset:o=2,color:s,style:a,className:u}){const c=y.useRef(null),{transform:l,patternId:d}=le(cm,be),f=s||sm[t],h=r||am[t],p=t===Le.Dots,g=t===Le.Cross,v=Array.isArray(n)?n:[n,n],m=[v[0]*l[2]||1,v[1]*l[2]||1],N=h*l[2],$=g?[N,N]:m,x=p?[N/o,N/o]:[$[0]/o,$[1]/o];return X("svg",{className:xe(["react-flow__background",u]),style:{...a,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:c,"data-testid":"rf__background",children:[w("pattern",{id:d+e,x:l[0]%m[0],y:l[1]%m[1],width:m[0],height:m[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${x[0]},-${x[1]})`,children:p?w(om,{color:f,radius:N/o}):w(im,{dimensions:$,color:f,lineWidth:i})}),w("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${d+e})`})]})}Ya.displayName="Background";var um=y.memo(Ya);const Yr=e=>{const{sourceX:t,sourceY:n,targetX:r,targetY:i,sourcePosition:o,targetPosition:s,style:a={},markerEnd:u}=e,[c]=$i({sourceX:t,sourceY:n,sourcePosition:o,targetX:r,targetY:i,targetPosition:s});return X(Se,{children:[w("path",{style:a,className:Ne(["react-flow__edge-path-selector"]),d:c,markerEnd:u,fillRule:"evenodd"}),w("path",{style:a,className:Ne(["react-flow__edge-path"]),d:c,markerEnd:u,fillRule:"evenodd"})]})},Kr=e=>t=>w(Yr,{...t,...e});try{Yr.displayName="CustomEdge",Yr.__docgenInfo={description:"",displayName:"CustomEdge",props:{}}}catch{}try{Kr.displayName="edgeFunction",Kr.__docgenInfo={description:"",displayName:"edgeFunction",props:{}}}catch{}const Ka=e=>{var t,n,r;return{id:e.id,type:e.type,position:e.position,name:(t=e==null?void 0:e.data)==null?void 0:t.name,description:(n=e==null?void 0:e.data)==null?void 0:n.description,content:(r=e==null?void 0:e.data)==null?void 0:r.content}},lm=e=>e.map(Ka),dm=e=>e.map(t=>({id:t==null?void 0:t.id,sourceId:t==null?void 0:t.source,type:t==null?void 0:t.type,targetId:t==null?void 0:t.target,name:t==null?void 0:t.label})),Xa=e=>({id:e.id,type:e.type,position:e.position,data:{name:e.name,description:e.description,content:e==null?void 0:e.content}}),$r=e=>e.map(Xa),Cr=e=>e.filter(t=>t.sourceId&&t.targetId).map(t=>({id:t.id,source:t.sourceId,type:(t==null?void 0:t.type)||"edge",target:t.targetId,label:t.name})),fm=e=>{const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.focus(),t.select();try{document.execCommand("copy")}catch(n){console.error("Unable to copy to clipboard",n)}document.body.removeChild(t)},zo=async e=>{window.isSecureContext&&navigator.clipboard?await navigator.clipboard.writeText(e):fm(e)},hm=async()=>{try{return navigator.clipboard.readText()}catch{return""}},pm=e=>typeof e!="object"?!1:Array.isArray(e==null?void 0:e.nodes),gm=(e,t)=>{const n=y.useCallback(async o=>{try{if(!e)return;const s=o.map(l=>({id:l.id,type:l.type,data:l.data,position:l.position,width:l.width,height:l.height})),a=s.map(l=>l.id),u=[];s.length>0&&e.getEdges().forEach(d=>{a.includes(d.source)&&a.includes(d.target)&&u.push({type:d.type,source:d.source,target:d.target})}),await zo(JSON.stringify({nodes:s,edges:u}))}catch(s){De.error(s.message)}},[e]),r=y.useCallback(async()=>{if(!e)return;const o=await hm();if(!o)return;const s=JSON.parse(o);if(!pm(s))throw new Error("invalid clipboard");if(!Array.isArray(s==null?void 0:s.nodes))throw new Error("invalid clipboard");const a=s.nodes.reduce((p,g)=>({...p,[g.id]:Gt()}),{}),u=Object.keys(a),c=e.getNodes().find(p=>u.includes(p.id)),l=s.nodes.find(p=>p.id===(c==null?void 0:c.id)),d={x:s.nodes.reduce((p,g)=>p+g.position.x,0)/s.nodes.length,y:s.nodes.reduce((p,g)=>p+g.position.y,0)/s.nodes.length},f=s.nodes.map(p=>{const g={x:p.position.x,y:p.position.y};if(c&&l)p.id===c.id?(g.x=c.position.x,g.y=c.position.y-20):(g.x=c.position.x-l.position.x+p.position.x,g.y=c.position.y-l.position.y+p.position.y-20);else if(t){const v=t.getBoundingClientRect(),m={x:v.width/2,y:v.height/2},N=e.project(m);g.x=p.position.x+N.x-d.x-(p.width||0)/2,g.y=p.position.y+N.y-d.y-(p.height||0)/2}return{...p,position:g,id:a[p.id]}}),h=s.edges.map(p=>({id:Gt(),type:p.type,source:a[p.source],target:a[p.target]}));if(e.addNodes(f),e.addEdges(h),c)try{await zo(JSON.stringify({nodes:f,edges:h}))}catch{}},[e]),i=y.useCallback(o=>{if(!o)return;const s=async a=>{if(a.code==="KeyC"&&(a.ctrlKey||a.metaKey)&&o.length>0)await n(o),De.success("Copied to clipboard!");else if(a.code==="KeyV"&&(a.ctrlKey||a.metaKey))try{await r(),De.success("Pasted from clipboard!")}catch{De.error("Invalid clipboard data.")}};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[n,r]);return{copyNodes:n,pasteNodes:r,register:i}},Xr=({inputDisabled:e,outputDisabled:t,onPaste:n})=>{const r=Ve(o=>o.components||[],Pe),i=y.useCallback((o,s)=>{const a=o.target;if(!a)return;const{offsetX:u,offsetY:c}=o.nativeEvent,{height:l,width:d}=a.getBoundingClientRect(),f={x:u/d,y:c/l};o.dataTransfer.effectAllowed="move",o.dataTransfer.setData("application/reactflow",s),o.dataTransfer.setData("relativePosition",JSON.stringify(f))},[]);return X("div",{className:"wrapper",children:[w(de.Text,{style:{marginBottom:"1rem"},children:"Drag and Drop components"}),X("div",{className:"list",children:[w("div",{className:Ne(["component",e&&"disabled"]),onDragStart:o=>i(o,"inputNode"),draggable:!e,children:w(de.Text,{strong:!0,type:e?"secondary":void 0,children:"Input"})}),w("div",{className:Ne(["component",t&&"disabled"]),onDragStart:o=>i(o,"outputNode"),draggable:!t,children:w(de.Text,{strong:!0,type:t?"secondary":void 0,children:"Output"})}),w("div",{className:Ne(["component"]),onDragStart:o=>i(o,"decisionTableNode"),draggable:!0,children:w(de.Text,{strong:!0,children:"Decision Table"})}),w("div",{className:Ne(["component"]),onDragStart:o=>i(o,"functionNode"),draggable:!0,children:w(de.Text,{strong:!0,children:"Function"})}),w("div",{className:Ne(["component"]),onDragStart:o=>i(o,"expressionNode"),draggable:!0,children:w(de.Text,{strong:!0,children:"Expression"})}),r.map(o=>w("div",{className:Ne(["component"]),onDragStart:s=>i(s,o.type),draggable:!0,children:w(de.Text,{strong:!0,children:o.name})},o.type))]}),w(Me,{onClick:n,type:"default",style:{marginTop:"auto"},children:"Paste from clipboard"})]})};try{Xr.displayName="GraphComponents",Xr.__docgenInfo={description:"",displayName:"GraphComponents",props:{inputDisabled:{defaultValue:null,description:"",name:"inputDisabled",required:!1,type:{name:"boolean"}},outputDisabled:{defaultValue:null,description:"",name:"outputDisabled",required:!1,type:{name:"boolean"}},onPaste:{defaultValue:null,description:"",name:"onPaste",required:!1,type:{name:"(() => void)"}},components:{defaultValue:null,description:"",name:"components",required:!1,type:{name:"ReactNode[]"}}}}}catch{}const jr=({nodes:e,edges:t,removeEdges:n,removeNodes:r,onClose:i,onCopy:o})=>X("div",{className:"node-form",children:[w(Me,{className:"button",type:"text",onClick:i,icon:w(Jn,{})}),(e==null?void 0:e.length)>0&&X(Se,{children:[w(de.Text,{style:{display:"block"},children:"Nodes selected:"}),w("ul",{style:{padding:"0 1rem 0"},children:e.map(s=>w("li",{children:w(de.Text,{strong:!0,children:s.data.name})},s.id))})]}),(t==null?void 0:t.length)>0&&X(Se,{children:[w(de.Text,{style:{display:"block",margin:"0.5rem 0 0"},children:"Edges selected:"}),w("ul",{style:{padding:"0 1rem 0"},children:t.map(s=>w("li",{children:w(de.Text,{strong:!0,children:s.id})},s.id))})]}),X(Bo,{gap:8,horizontal:!0,children:[(t==null?void 0:t.length)===0&&w(Me,{onClick:()=>o==null?void 0:o(e),children:"Copy"}),w(Me,{danger:!0,onClick:()=>{(t==null?void 0:t.length)>0&&(n==null||n(t)),(e==null?void 0:e.length)>0&&(r==null||r(e))},children:"Remove"})]})]});try{jr.displayName="MultiNodeForm",jr.__docgenInfo={description:"",displayName:"MultiNodeForm",props:{nodes:{defaultValue:null,description:"",name:"nodes",required:!0,type:{name:"Node[]"}},edges:{defaultValue:null,description:"",name:"edges",required:!0,type:{name:"Edge[]"}},onCopy:{defaultValue:null,description:"",name:"onCopy",required:!1,type:{name:"((node: Node[]) => void)"}},removeNodes:{defaultValue:null,description:"",name:"removeNodes",required:!1,type:{name:"((nodes: Node[]) => void)"}},removeEdges:{defaultValue:null,description:"",name:"removeEdges",required:!1,type:{name:"((edges: Edge[]) => void)"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!1,type:{name:"(() => void)"}}}}}catch{}const Zr=({node:e,onChange:t,removeNode:n,onClose:r,onCopy:i})=>{var l,d,f,h,p;const[o]=kt.useForm();y.useEffect(()=>{var g,v,m;o.setFieldsValue({name:(g=e==null?void 0:e.data)==null?void 0:g.name,description:(v=e==null?void 0:e.data)==null?void 0:v.description,content:(m=e==null?void 0:e.data)==null?void 0:m.content})},[e==null?void 0:e.id]),y.useEffect(()=>{var g,v,m;o.setFieldsValue({name:(g=e==null?void 0:e.data)==null?void 0:g.name,description:(v=e==null?void 0:e.data)==null?void 0:v.description,content:(m=e==null?void 0:e.data)==null?void 0:m.content})},[e==null?void 0:e.data]);const s=Ve(g=>g.components||[],Pe),a=y.useMemo(()=>s.find(g=>g.type===e.type),[s,e==null?void 0:e.type]),u=y.useMemo(()=>{switch(e.type){case"inputNode":return"Input";case"outputNode":return"Output";case"decisionTableNode":return"Decision Table";case"decisionNode":return"Decision";case"functionNode":return"Function";case"expressionNode":return"Expression"}return"Unknown"},[e==null?void 0:e.type]),c=g=>{t==null||t(Ho(e,v=>{v.data.content=g}))};return w("div",{className:"node-form",children:X(kt,{form:o,layout:"vertical",className:"form",initialValues:{name:(l=e==null?void 0:e.data)==null?void 0:l.name,description:(d=e==null?void 0:e.data)==null?void 0:d.description,content:(f=e==null?void 0:e.data)==null?void 0:f.content},onValuesChange:(g,v)=>{t==null||t({id:e==null?void 0:e.id,data:v})},children:[w(Me,{className:"button",type:"text",onClick:r,icon:w(Jn,{})}),w(kt.Item,{noStyle:!0,children:X(ve,{direction:"vertical",children:[w(de.Text,{children:"Type"}),w(de.Text,{strong:!0,children:(a==null?void 0:a.type)||u})]})}),(e==null?void 0:e.type)!=="inputNode"&&(e==null?void 0:e.type)!=="outputNode"&&X(Se,{children:[w(kt.Item,{name:["name"],label:"Name",children:w(Oi,{placeholder:"Name"})}),w(kt.Item,{name:["description"],label:"Description",children:w(Oi.TextArea,{placeholder:"Description",rows:3,style:{resize:"none"}})})]}),a&&(a==null?void 0:a.renderForm)&&((p=a==null?void 0:a.renderForm)==null?void 0:p.call(a,{value:(h=e==null?void 0:e.data)==null?void 0:h.content,onChange:c})),w(kt.Item,{children:X(Bo,{gap:8,horizontal:!0,children:[w(Me,{onClick:()=>i==null?void 0:i(e),children:"Copy"}),w(Me,{danger:!0,onClick:()=>n==null?void 0:n(e),children:"Remove"})]})})]})})};try{Zr.displayName="NodeForm",Zr.__docgenInfo={description:"",displayName:"NodeForm",props:{node:{defaultValue:null,description:"",name:"node",required:!0,type:{name:"Node"}},onCopy:{defaultValue:null,description:"",name:"onCopy",required:!1,type:{name:"((node: Node) => void)"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((data: any) => void)"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!1,type:{name:"(() => void)"}},removeNode:{defaultValue:null,description:"",name:"removeNode",required:!1,type:{name:"((node: Node) => void)"}}}}}catch{}const ym=(e,t)=>{var n,r,i;return((r=(n=t==null?void 0:t.error)==null?void 0:n.data)==null?void 0:r.nodeId)===e?(i=t==null?void 0:t.error)==null?void 0:i.data:null},ot=e=>{var h;const{id:t,data:n,isConnectable:r,type:i}=e,o=y.useRef(),{openTab:s,simulate:a,customComponents:u}=Ve(({simulate:p,openTab:g,components:v})=>({openTab:g,simulate:p,customComponents:v??[]}),Pe),c=y.useMemo(()=>u.find(p=>p.type===i),[u,i]),l=y.useMemo(()=>{var p,g;return(g=(p=a==null?void 0:a.result)==null?void 0:p.trace)==null?void 0:g[t]},[a]),d=ym(t,a),f=()=>{var p;c?(p=c==null?void 0:c.onOpen)==null||p.call(c,Ka(e)):s==null||s(t)};return X("div",{className:Ne(["node",l&&"simulated",d&&"error",i==="outputNode"&&"output",i==="inputNode"&&"input"]),onClick:()=>{o.current&&performance.now()-o.current<250&&i!=="inputNode"&&i!=="outputNode"&&f(),o.current=performance.now()},children:[l&&(i==="decisionNode"||i==="expressionNode"||i==="decisionTableNode"||i==="functionNode")&&w("div",{className:"performance",children:w(de.Text,{style:{fontSize:10},children:(l==null?void 0:l.performance)||null})}),(i==="decisionTableNode"||i==="decisionNode"||i==="functionNode"||i==="expressionNode"||i==="outputNode")&&w(lt,{type:"target",position:Y.Left,isConnectable:r}),X(ve,{direction:"vertical",size:0,className:"full-width",style:{textAlign:"center"},children:[w("div",{className:"text-ellipsis",children:w(de.Text,{strong:!0,children:n==null?void 0:n.name})}),w("div",{className:"text-ellipsis",children:X(de.Text,{style:{fontSize:12},children:[i==="decisionTableNode"&&X(ve,{size:4,style:{maxWidth:"100%"},children:[w(qo,{}),w("span",{children:"Decision Table"})]}),i==="functionNode"&&X(ve,{size:4,style:{maxWidth:"100%"},children:[w(Uo,{}),w("span",{children:"Function"})]}),i==="expressionNode"&&X(ve,{size:4,style:{maxWidth:"100%"},children:[w(Fo,{}),w("span",{children:"Expression"})]}),i==="inputNode"&&X(ve,{size:4,style:{maxWidth:"100%"},children:[w(Vn,{}),w("span",{children:"Input"})]}),i==="outputNode"&&X(ve,{size:4,style:{maxWidth:"100%"},children:[w(Vn,{}),w("span",{children:"Output"})]}),c&&X(ve,{size:4,style:{maxWidth:"100%"},children:[(h=c==null?void 0:c.renderIcon)==null?void 0:h.call(c),w("span",{children:c.name})]})]})}),c&&(c==null?void 0:c.onOpen)&&w(de.Link,{onClick:()=>{f()},children:"Open"}),!c&&i!=="inputNode"&&i!=="outputNode"&&w(de.Link,{onClick:()=>{f()},children:"Open"})]}),(i==="decisionTableNode"||i==="decisionNode"||i==="functionNode"||i==="expressionNode"||i==="inputNode")&&w(lt,{type:"source",position:Y.Right,isConnectable:r})]})},st=e=>{const{data:t,isConnectable:n,type:r,selected:i}=e,o=Ve(a=>a.components||[],Pe),s=y.useMemo(()=>o.find(a=>a.type===r),[o,r]);return X("div",{className:Ne(["node",i&&"selected",r==="outputNode"&&"output",r==="inputNode"&&"input"]),children:[(r==="decisionTableNode"||r==="decisionNode"||r==="functionNode"||r==="expressionNode"||r==="outputNode"||s)&&w(lt,{type:"target",position:Y.Left,isConnectable:n}),X(ve,{direction:"vertical",size:0,className:"full-width",style:{textAlign:"center"},children:[w("div",{className:"text-ellipsis",children:w(de.Text,{strong:!0,children:t==null?void 0:t.name})}),w("div",{className:"text-ellipsis",children:X(de.Text,{style:{fontSize:12},children:[r==="decisionTableNode"&&X(ve,{size:4,style:{maxWidth:"100%"},children:[w(qo,{}),w("span",{children:"Decision Table"}),(t==null?void 0:t.hitPolicy)==="COLLECT"&&w("span",{children:"(c)"})]}),r==="functionNode"&&X(ve,{size:4,style:{maxWidth:"100%"},children:[w(Uo,{}),w("span",{children:"Function"})]}),r==="expressionNode"&&X(ve,{size:4,style:{maxWidth:"100%"},children:[w(Fo,{}),w("span",{children:"Expression"})]}),r==="inputNode"&&X(ve,{size:4,style:{maxWidth:"100%"},children:[w(Vn,{}),w("span",{children:"Input"})]}),r==="outputNode"&&X(ve,{size:4,style:{maxWidth:"100%"},children:[w(Vn,{}),w("span",{children:"Output"})]}),s&&X(ve,{size:4,style:{maxWidth:"100%"},children:[w(su,{}),w("span",{children:s==null?void 0:s.name})]})]})})]}),(r==="decisionTableNode"||r==="decisionNode"||r==="functionNode"||r==="expressionNode"||r==="inputNode"||s)&&w(lt,{type:"source",position:Y.Right,isConnectable:n})]})};try{ot.displayName="GraphNode",ot.__docgenInfo={description:"",displayName:"GraphNode",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"any"}},dragHandle:{defaultValue:null,description:"",name:"dragHandle",required:!1,type:{name:"string"}},selected:{defaultValue:null,description:"",name:"selected",required:!1,type:{name:"boolean"}},type:{defaultValue:null,description:"",name:"type",required:!1,type:{name:"string"}},zIndex:{defaultValue:null,description:"",name:"zIndex",required:!1,type:{name:"number"}},isConnectable:{defaultValue:null,description:"",name:"isConnectable",required:!0,type:{name:"boolean"}},xPos:{defaultValue:null,description:"",name:"xPos",required:!0,type:{name:"number"}},yPos:{defaultValue:null,description:"",name:"yPos",required:!0,type:{name:"number"}},dragging:{defaultValue:null,description:"",name:"dragging",required:!0,type:{name:"boolean"}},targetPosition:{defaultValue:null,description:"",name:"targetPosition",required:!1,type:{name:"enum",value:[{value:'"left"'},{value:'"top"'},{value:'"right"'},{value:'"bottom"'}]}},sourcePosition:{defaultValue:null,description:"",name:"sourcePosition",required:!1,type:{name:"enum",value:[{value:'"left"'},{value:'"top"'},{value:'"right"'},{value:'"bottom"'}]}}}}}catch{}try{st.displayName="GraphNodeEdit",st.__docgenInfo={description:"",displayName:"GraphNodeEdit",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"any"}},dragHandle:{defaultValue:null,description:"",name:"dragHandle",required:!1,type:{name:"string"}},selected:{defaultValue:null,description:"",name:"selected",required:!1,type:{name:"boolean"}},type:{defaultValue:null,description:"",name:"type",required:!1,type:{name:"string"}},zIndex:{defaultValue:null,description:"",name:"zIndex",required:!1,type:{name:"number"}},isConnectable:{defaultValue:null,description:"",name:"isConnectable",required:!0,type:{name:"boolean"}},xPos:{defaultValue:null,description:"",name:"xPos",required:!0,type:{name:"number"}},yPos:{defaultValue:null,description:"",name:"yPos",required:!0,type:{name:"number"}},dragging:{defaultValue:null,description:"",name:"dragging",required:!0,type:{name:"boolean"}},targetPosition:{defaultValue:null,description:"",name:"targetPosition",required:!1,type:{name:"enum",value:[{value:'"left"'},{value:'"top"'},{value:'"right"'},{value:'"bottom"'}]}},sourcePosition:{defaultValue:null,description:"",name:"sourcePosition",required:!1,type:{name:"enum",value:[{value:'"left"'},{value:'"top"'},{value:'"right"'},{value:'"bottom"'}]}}}}}catch{}const Ro="application/vnd.gorules.decision",Jr=y.forwardRef(({reactFlowProOptions:e,className:t,onDisableTabs:n,hideExportImport:r},i)=>{var re,ie,oe,ae;const o=y.useRef(null),[s,a]=y.useState(),u=y.useRef(null),[c,l]=y.useState(!1),[d,f,h]=Xy([]),[p,g,v]=jy([]),m=(re=d==null?void 0:d.filter)==null?void 0:re.call(d,A=>A.type==="inputNode"),N=(ie=d==null?void 0:d.filter)==null?void 0:ie.call(d,A=>A.type==="outputNode"),$=(oe=d==null?void 0:d.filter)==null?void 0:oe.call(d,A=>A==null?void 0:A.selected),x=(ae=p==null?void 0:p.filter)==null?void 0:ae.call(p,A=>A==null?void 0:A.selected),{nodes:k,edges:E,setDecisionGraph:C,disabled:I,closeTab:G,openTab:H,onAddNode:z,onEditGraph:V,onChange:M}=Ve(({decisionGraph:A,setDecisionGraph:q,disabled:W,closeTab:Q,openTab:te,onChange:Z,onAddNode:ue,onEditGraph:F})=>({nodes:(A==null?void 0:A.nodes)??[],edges:(A==null?void 0:A.edges)??[],setDecisionGraph:q,disabled:W,closeTab:Q,openTab:te,onChange:Z,onAddNode:ue,onEditGraph:F}),Pe),b=gm(s,o.current||void 0);y.useEffect(()=>{V==null||V(c),n==null||n(c)},[c]),y.useEffect(()=>b.register(c?$:void 0),[$,b.register,c]);const D=(A,q)=>{var Z,ue;if(!o.current||!s)return;if(!q){const F=(Z=o==null?void 0:o.current)==null?void 0:Z.getBoundingClientRect(),me={x:F.width/2,y:F.height/2};q=s==null?void 0:s.project(me)}if(A!=="decisionTableNode"&&A!=="functionNode"&&A!=="expressionNode"&&A!=="inputNode"&&A!=="outputNode")return z==null?void 0:z(A,q);const W=(ue=(k||[]).filter(F=>(F==null?void 0:F.type)===A))==null?void 0:ue.length,Q={};if(A==="decisionTableNode"){const F={id:Gt(),name:"Input",type:"expression"},me={field:"output",id:Gt(),name:"Output",type:"expression"};Q.content={hitPolicy:"first",inputs:[F],outputs:[me],rules:[]}}else A==="functionNode"?Q.content=Yc:A==="inputNode"?Q.name="Request":A==="outputNode"?Q.name="Response":A==="expressionNode"&&(Q.content={expressions:[]});const te={id:Gt(),type:A,position:q,data:{name:`${A} ${W+1}`,...Q}};f(F=>F.concat(te))},S=A=>{f(q=>(q||[]).map(W=>W.id===(A==null?void 0:A.id)?{...W||{},...A||{},type:W.type,data:{...(W==null?void 0:W.data)||{},...(A==null?void 0:A.data)||{}}}:W))},P=A=>{if(A.preventDefault(),!o.current||!s)return;const q=o.current.getBoundingClientRect(),W=A.dataTransfer.getData("application/reactflow");let Q;try{Q=JSON.parse(A.dataTransfer.getData("relativePosition"))}catch{return}const te=s.project({x:A.clientX-q.left,y:A.clientY-q.top});te.x-=Math.round(Q.x*180/10)*10,te.y-=Math.round(Q.y*80/10)*10,D(W,te)},R=A=>{A.preventDefault(),A.dataTransfer.dropEffect="move"},_=A=>{g(q=>ua({...A,type:"edge",id:Gt()},q))},T=y.useMemo(()=>({edge:Kr({nodes:k})}),[]),O=y.useMemo(()=>({decisionTableNode:ot,decisionNode:ot,functionNode:ot,expressionNode:ot,inputNode:ot,outputNode:ot}),[]),U=y.useMemo(()=>({decisionTableNode:st,decisionNode:st,functionNode:st,expressionNode:st,inputNode:st,outputNode:st}),[]),K=()=>{var A,q;try{const W=dm(p),Q=lm(d);if(((A=Q.filter(Z=>(Z==null?void 0:Z.type)==="inputNode"))==null?void 0:A.length)>1){De.error("Maximum 1 input");return}if(((q=Q.filter(Z=>(Z==null?void 0:Z.type)==="outputNode"))==null?void 0:q.length)>1){De.error("Maximum 1 output");return}const te=new fi;if(W.forEach(Z=>{te.mergeEdge(Z.sourceId,Z.targetId)}),Sd(te))throw new Error("Graph is cyclic");C({nodes:Q,edges:W}),M==null||M({nodes:Q,edges:W}),l(!1)}catch(W){De.error(W==null?void 0:W.message)}},j=async A=>{var Q,te;const q=(Q=A==null?void 0:A.target)==null?void 0:Q.files,W=new FileReader;W.onload=function(Z){var ue;try{const F=JSON.parse((ue=Z==null?void 0:Z.target)==null?void 0:ue.result);if((F==null?void 0:F.contentType)!==Ro)throw new Error("Invalid content type");const me=Array.isArray(F==null?void 0:F.nodes)?F.nodes:[],Be=me.map(_e=>_e.id),Qe=F.edges.filter(_e=>Be.includes(_e==null?void 0:_e.targetId)&&Be.includes(_e==null?void 0:_e.sourceId));C({edges:Qe,nodes:me}),M==null||M({edges:Qe,nodes:me})}catch(F){De.error(F.message)}},W.readAsText((te=Array.from(q))==null?void 0:te[0],"UTF-8")},ee=async A=>{try{const q=`${A.replaceAll(".json","")}.json`,W=JSON.stringify({contentType:Ro,nodes:k,edges:E},null,2),Q=new Blob([W],{type:"application/json"}),te=URL.createObjectURL(Q),Z=window.document.createElement("a");Z.href=te,Z.download=q,window.document.body.appendChild(Z),Z.click(),window.document.body.removeChild(Z),URL.revokeObjectURL(te)}catch(q){De.error(q.message)}};return y.useImperativeHandle(i,()=>({openEdit:()=>{I||(f($r(k)),g(Cr(E)),l(!0))},closeEdit:()=>{l(!1)},confirmEdit:()=>{K()},addNode:A=>{c&&f(q=>q.concat(Xa(A)))},openNode:A=>{c||H(A)},setDecisionGraph:C})),X("div",{className:Ne(["tab-content",t]),children:[w("input",{hidden:!0,accept:"application/json",type:"file",ref:u,onChange:j,onClick:A=>{A.target.value=null}}),X("div",{className:"grl-dg__command-bar",children:[!c&&X(Se,{children:[w(Rc,{title:"Edit graph mode allows you to add, connect and move nodes.",children:w(Me,{type:"default",size:"small",disabled:I,onClick:()=>{f($r(k)),g(Cr(E)),l(!0)},icon:w(bu,{}),children:"Edit graph"})}),!r&&w(Me,{type:"default",size:"small",onClick:()=>{ee("graph")},icon:w(Zc,{}),children:"Export JSON"}),!r&&w(Me,{type:"default",size:"small",disabled:I,onClick:()=>{var A,q;(q=(A=u==null?void 0:u.current)==null?void 0:A.click)==null||q.call(A)},icon:w(Jc,{}),children:"Import JSON"})]}),c&&w(Me,{type:"default",size:"small",onClick:()=>{K()},icon:w(Oc,{}),children:"Apply changes"}),c&&w(Me,{type:"default",color:"secondary",size:"small",onClick:()=>{l(!1)},icon:w(Jn,{}),children:"Revert"})]}),X("div",{className:"content-wrapper",children:[w("div",{className:Ne(["react-flow"]),ref:o,children:X(Ua,{nodesConnectable:c,nodesDraggable:c,elevateEdgesOnSelect:c,elevateNodesOnSelect:c,zoomOnDoubleClick:!1,nodes:c?d:$r(k||[]),edges:c?p:Cr(E||[]),onInit:A=>a(A),snapToGrid:!0,snapGrid:[10,10],nodeTypes:c?U:O,edgeTypes:T,onDrop:A=>c?P(A):void 0,onDragOver:c?R:void 0,onConnect:_,proOptions:e,onNodesChange:A=>{c&&h(A)},onEdgesChange:A=>{c&&v(A)},onNodesDelete:A=>{c&&A.forEach(q=>{G==null||G(q==null?void 0:q.id)})},onEdgesDelete:()=>{},onEdgeClick:()=>{},children:[w(rm,{showInteractive:!1}),w(um,{color:"var(--grl-color-border)",gap:20})]})}),c&&X("div",{className:"grl-dg__aside",children:[!($!=null&&$.length)&&!(x!=null&&x.length)&&w(Xr,{inputDisabled:m.length>0,outputDisabled:N.length>0,onPaste:async()=>{if(c)try{await b.pasteNodes()}catch(A){De.error(A==null?void 0:A.message)}}}),($==null?void 0:$.length)===1&&(x==null?void 0:x.length)===0&&w(Zr,{node:$==null?void 0:$[0],onChange:S,onClose:()=>{f(A=>A.map(q=>({...q,selected:!1})))},onCopy:async()=>{await b.copyNodes($),De.success("Copied to clipboard!")},removeNode:A=>{g(q=>q.filter(W=>(W==null?void 0:W.target)!==(A==null?void 0:A.id)&&(W==null?void 0:W.source)!==(A==null?void 0:A.id))),f(q=>q.filter(W=>(W==null?void 0:W.id)!==(A==null?void 0:A.id)))}}),(($==null?void 0:$.length)>1||(x==null?void 0:x.length)>0)&&w(jr,{edges:x,nodes:$,onCopy:async A=>{await b.copyNodes(A),De.success("Copied to clipboard!")},removeNodes:A=>{const q=A.map(W=>W.id);g(W=>W.filter(Q=>!q.includes(Q==null?void 0:Q.target)&&!q.includes(Q==null?void 0:Q.source))),f(W=>W.filter(Q=>!q.includes(Q==null?void 0:Q.id)))},removeEdges:A=>{const q=A.map(W=>W.id);g(W=>W.filter(Q=>!q.includes(Q==null?void 0:Q.id)))},onClose:()=>{f(A=>A.map(q=>({...q,selected:!1}))),g(A=>A.map(q=>({...q,selected:!1})))}})]})]})]})});try{Jr.displayName="Graph",Jr.__docgenInfo={description:"",displayName:"Graph",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},hideExportImport:{defaultValue:null,description:"",name:"hideExportImport",required:!1,type:{name:"boolean"}},onDisableTabs:{defaultValue:null,description:"",name:"onDisableTabs",required:!1,type:{name:"((val: boolean) => void)"}},reactFlowProOptions:{defaultValue:null,description:"",name:"reactFlowProOptions",required:!1,type:{name:"ProOptions"}}}}}catch{}const Qr=({disabled:e,onTabChange:t})=>{const{activeNode:n,openNodes:r,openTab:i,closeTab:o}=Ve(({decisionGraph:s,openTab:a,closeTab:u,activeTab:c,openTabs:l})=>({activeNode:((s==null?void 0:s.nodes)??[]).find(d=>d.id===c),openNodes:((s==null?void 0:s.nodes)??[]).filter(d=>l.includes(d.id)),openTab:a,closeTab:u}),Pe);return y.useEffect(()=>{t==null||t((n==null?void 0:n.id)||"graph")},[n]),w(Qc,{hideAdd:!0,type:"editable-card",size:"small",className:"tabs",activeKey:(n==null?void 0:n.id)||"graph",onEdit:(s,a)=>{a==="remove"&&o(s)},onChange:s=>i(s),items:[{closable:!1,label:"Graph",key:"graph"},...r.map(s=>({disabled:e,key:s.id,label:(s==null?void 0:s.name)??(s==null?void 0:s.type),closable:!0}))]})};try{Qr.displayName="GraphTabs",Qr.__docgenInfo={description:"",displayName:"GraphTabs",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},onTabChange:{defaultValue:null,description:"",name:"onTabChange",required:!1,type:{name:"((val: string) => void)"}}}}}catch{}const ei=({id:e,manager:t})=>{var u,c,l;const{node:n,nodeTrace:r,updateNode:i,disabled:o,configurable:s}=Ve(({decisionGraph:d,simulate:f,updateNode:h,disabled:p,configurable:g})=>{var v,m;return{node:((d==null?void 0:d.nodes)??[]).find(N=>N.id===e),nodeTrace:(m=(v=f==null?void 0:f.result)==null?void 0:v.trace)==null?void 0:m[e],updateNode:h,disabled:p,configurable:g}},Pe),a=(r==null?void 0:r.traceData)!==void 0?Array.isArray(r==null?void 0:r.traceData)?(u=r==null?void 0:r.traceData)==null?void 0:u.map(d=>{var f;return(f=d==null?void 0:d.rule)==null?void 0:f._id}):[(l=(c=r==null?void 0:r.traceData)==null?void 0:c.rule)==null?void 0:l._id]:[];return n?w(eu,{tableHeight:"100%",value:n==null?void 0:n.content,onChange:d=>i(e,d),manager:t,disabled:o,configurable:s,activeRules:(a||[]).filter(d=>!!d)}):null};try{ei.displayName="TabDecisionTable",ei.__docgenInfo={description:"",displayName:"TabDecisionTable",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},manager:{defaultValue:null,description:"",name:"manager",required:!1,type:{name:"DragDropManager"}}}}}catch{}const ti=({id:e,manager:t})=>{var s;const{node:n,updateNode:r,disabled:i,configurable:o}=Ve(({decisionGraph:a,updateNode:u,disabled:c,configurable:l})=>({node:((a==null?void 0:a.nodes)??[]).find(d=>d.id===e),updateNode:u,disabled:c,configurable:l}),Pe);return n?w("div",{style:{maxWidth:900,height:"100%",overflowY:"auto",boxSizing:"border-box",paddingBottom:"1.5rem"},children:w(tu,{value:(s=n==null?void 0:n.content)==null?void 0:s.expressions,onChange:a=>r(e,{expressions:a}),disabled:i,configurable:o,manager:t})}):null};try{ti.displayName="TabExpression",ti.__docgenInfo={description:"",displayName:"TabExpression",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},manager:{defaultValue:null,description:"",name:"manager",required:!1,type:{name:"DragDropManager"}}}}}catch{}const mm=Zn.lazy(async()=>({default:(await nu(()=>import("./index-e3a56e52.js"),["./index-e3a56e52.js","./function-9f4f5843.js","./index-f9942fbd.js","./index-f15177ee.js","./_commonjsHelpers-de833af9.js","./extends-0ea0fc03.js","./stack-efa65be7.js","./index-b7949e8c.js","./libs-5f276d5d.js","./function-460cfaaf.css"],import.meta.url)).Function})),ni=({id:e})=>{const{node:t,nodeTrace:n,updateNode:r,disabled:i}=Ve(({decisionGraph:o,simulate:s,updateNode:a,disabled:u})=>{var c,l;return{node:((o==null?void 0:o.nodes)??[]).find(d=>d.id===e),nodeTrace:(l=(c=s==null?void 0:s.result)==null?void 0:c.trace)==null?void 0:l[e],updateNode:a,disabled:u}},Pe);return t?w(y.Suspense,{fallback:w(Kc,{}),children:w(mm,{value:typeof(t==null?void 0:t.content)=="string"?t==null?void 0:t.content:"",onChange:o=>r(e,o),disabled:i,trace:n})}):null};try{ni.displayName="TabFunction",ni.__docgenInfo={description:"",displayName:"TabFunction",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}}}}}catch{}const ri=y.forwardRef(({reactFlowProOptions:e,hideExportImport:t},n)=>{const r=y.useRef(null),{activeNode:i,openNodes:o,onTabChange:s}=Ve(({decisionGraph:l,activeTab:d,openTabs:f,onTabChange:h})=>({onTabChange:h,activeNode:((l==null?void 0:l.nodes)??[]).find(p=>p.id===d),openNodes:((l==null?void 0:l.nodes)??[]).filter(p=>f.includes(p.id))}),Pe),[a,u]=y.useState(!1),c=y.useMemo(()=>Uc(qc,void 0,{rootElement:r.current}),[r.current]);return w("div",{className:"grl-dg__wrapper",children:X("div",{className:"grl-dg__graph",children:[w(Qr,{disabled:a,onTabChange:s}),w(Jr,{ref:n,className:Ne([!i&&"active"]),hideExportImport:t,reactFlowProOptions:e,onDisableTabs:u}),w("div",{style:{display:"contents"},ref:r,children:o.map(l=>X("div",{className:Ne(["tab-content",(i==null?void 0:i.id)===(l==null?void 0:l.id)&&"active"]),children:[(l==null?void 0:l.type)==="decisionTableNode"&&w(ei,{id:l.id,manager:c}),(l==null?void 0:l.type)==="expressionNode"&&w(ti,{id:l.id,manager:c}),(l==null?void 0:l.type)==="functionNode"&&w(ni,{id:l.id})]},l==null?void 0:l.id))})]})})});try{ri.displayName="DecisionGraphWrapper",ri.__docgenInfo={description:"",displayName:"DecisionGraphWrapper",props:{reactFlowProOptions:{defaultValue:null,description:"",name:"reactFlowProOptions",required:!1,type:{name:"ProOptions"}},hideExportImport:{defaultValue:null,description:"",name:"hideExportImport",required:!1,type:{name:"boolean"}}}}}catch{}const Oo=y.forwardRef(({manager:e,reactFlowProOptions:t,hideExportImport:n,...r},i)=>w("div",{className:"grl-dg",children:X(kr,{children:[w(ri,{reactFlowProOptions:t,hideExportImport:n,ref:i}),w(Dr,{...r})]})}));try{Oo.displayName="DecisionGraph",Oo.__docgenInfo={description:"",displayName:"DecisionGraph",props:{manager:{defaultValue:null,description:"",name:"manager",required:!1,type:{name:"DragDropManager"}},reactFlowProOptions:{defaultValue:null,description:"",name:"reactFlowProOptions",required:!1,type:{name:"ProOptions"}},hideExportImport:{defaultValue:null,description:"",name:"hideExportImport",required:!1,type:{name:"boolean"}},id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"DecisionGraphType"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"DecisionGraphType"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},configurable:{defaultValue:null,description:"",name:"configurable",required:!1,type:{name:"boolean"}},simulate:{defaultValue:null,description:"",name:"simulate",required:!1,type:{name:"any"}},components:{defaultValue:null,description:"",name:"components",required:!1,type:{name:"CustomNodeType[]"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((val: DecisionGraphType) => void)"}},onAddNode:{defaultValue:null,description:"",name:"onAddNode",required:!1,type:{name:"((type: string, position?: XYPosition) => void)"}},onOpenNode:{defaultValue:null,description:"",name:"onOpenNode",required:!1,type:{name:"((node: DecisionNode) => void)"}},onTabChange:{defaultValue:null,description:"",name:"onTabChange",required:!1,type:{name:"((tab?: string) => void)"}},onEditGraph:{defaultValue:null,description:"",name:"onEditGraph",required:!1,type:{name:"((edit: boolean) => void)"}}}}}catch{}export{su as A,Oo as D};
//# sourceMappingURL=dg-ac93eef4.js.map
