import{A as F,h as K,m as oe,l as re,r as se,n as ae,P as le,C as P,c as O,p as ie,q as ce,s as pe,v as de,w as ue,B as q,x as me,u as fe,o as ge,k as ye,y as ve,j as p,f as $,z as A}from"./index-f9942fbd.js";import{r as s,R as N}from"./index-f15177ee.js";import{A as xe,E as X,a as be,p as w,b as j,u as he,d as Ce,f as B,I as Ee,g as _e,P as we,H as Pe,D as Oe}from"./autosize-text-area-0b51e74b.js";import{v as $e}from"./v4-a960c1f4.js";import{_ as U}from"./extends-0ea0fc03.js";var Se={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"}}]},name:"menu",theme:"outlined"};const Ne=Se;var Re=function(n,r){return s.createElement(F,U({},n,{ref:r,icon:Ne}))};const Te=s.forwardRef(Re);var Ie={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"};const ke=Ie;var je=function(n,r){return s.createElement(F,U({},n,{ref:r,icon:ke}))};const Be=s.forwardRef(je),_=e=>e?typeof e=="function"?e():e:null,ze=e=>{const{componentCls:n,popoverColor:r,minWidth:t,fontWeightStrong:o,popoverPadding:a,boxShadowSecondary:i,colorTextHeading:l,borderRadiusLG:d,zIndexPopup:u,marginXS:m,colorBgElevated:g,popoverBg:x}=e;return[{[n]:Object.assign(Object.assign({},se(e)),{position:"absolute",top:0,left:{_skip_check_:!0,value:0},zIndex:u,fontWeight:"normal",whiteSpace:"normal",textAlign:"start",cursor:"auto",userSelect:"text",transformOrigin:"var(--arrow-x, 50%) var(--arrow-y, 50%)","--antd-arrow-background-color":g,"&-rtl":{direction:"rtl"},"&-hidden":{display:"none"},[`${n}-content`]:{position:"relative"},[`${n}-inner`]:{backgroundColor:x,backgroundClip:"padding-box",borderRadius:d,boxShadow:i,padding:a},[`${n}-title`]:{minWidth:t,marginBottom:m,color:l,fontWeight:o},[`${n}-inner-content`]:{color:r}})},ae(e,{colorBg:"var(--antd-arrow-background-color)"}),{[`${n}-pure`]:{position:"relative",maxWidth:"none",margin:e.sizePopupArrow,display:"inline-block",[`${n}-content`]:{display:"inline-block"}}}]},De=e=>{const{componentCls:n}=e;return{[n]:le.map(r=>{const t=e[`${r}6`];return{[`&${n}-${r}`]:{"--antd-arrow-background-color":t,[`${n}-inner`]:{backgroundColor:t},[`${n}-arrow`]:{background:"transparent"}}}})}},Me=e=>{const{componentCls:n,lineWidth:r,lineType:t,colorSplit:o,paddingSM:a,controlHeight:i,fontSize:l,lineHeight:d,padding:u}=e,m=i-Math.round(l*d),g=m/2,x=m/2-r,v=u;return{[n]:{[`${n}-inner`]:{padding:0},[`${n}-title`]:{margin:0,padding:`${g}px ${v}px ${x}px`,borderBottom:`${r}px ${t} ${o}`},[`${n}-inner-content`]:{padding:`${a}px ${v}px`}}}},Y=K("Popover",e=>{const{colorBgElevated:n,colorText:r,wireframe:t}=e,o=oe(e,{popoverPadding:12,popoverBg:n,popoverColor:r});return[ze(o),De(o),t&&Me(o),re(o,"zoom-big")]},e=>({width:177,minWidth:177,zIndexPopup:e.zIndexPopupBase+30}),{deprecatedTokens:[["width","minWidth"]]});var Ve=globalThis&&globalThis.__rest||function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(r[t[o]]=e[t[o]]);return r};const qe=(e,n,r)=>{if(!(!n&&!r))return s.createElement(s.Fragment,null,n&&s.createElement("div",{className:`${e}-title`},_(n)),s.createElement("div",{className:`${e}-inner-content`},_(r)))},We=e=>{const{hashId:n,prefixCls:r,className:t,style:o,placement:a="top",title:i,content:l,children:d}=e;return s.createElement("div",{className:O(n,r,`${r}-pure`,`${r}-placement-${a}`,t),style:o},s.createElement("div",{className:`${r}-arrow`}),s.createElement(ie,Object.assign({},e,{className:n,prefixCls:r}),d||qe(r,i,l)))},He=e=>{const{prefixCls:n}=e,r=Ve(e,["prefixCls"]),{getPrefixCls:t}=s.useContext(P),o=t("popover",n),[a,i]=Y(o);return a(s.createElement(We,Object.assign({},r,{prefixCls:o,hashId:i})))},G=He;var Ae=globalThis&&globalThis.__rest||function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(r[t[o]]=e[t[o]]);return r};const Le=e=>{let{title:n,content:r,prefixCls:t}=e;return s.createElement(s.Fragment,null,n&&s.createElement("div",{className:`${t}-title`},_(n)),s.createElement("div",{className:`${t}-inner-content`},_(r)))},Z=s.forwardRef((e,n)=>{const{prefixCls:r,title:t,content:o,overlayClassName:a,placement:i="top",trigger:l="hover",mouseEnterDelay:d=.1,mouseLeaveDelay:u=.1,overlayStyle:m={}}=e,g=Ae(e,["prefixCls","title","content","overlayClassName","placement","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle"]),{getPrefixCls:x}=s.useContext(P),v=x("popover",r),[C,h]=Y(v),c=x(),b=O(a,h);return C(s.createElement(ce,Object.assign({placement:i,trigger:l,mouseEnterDelay:d,mouseLeaveDelay:u,overlayStyle:m},g,{prefixCls:v,overlayClassName:b,ref:n,overlay:t||o?s.createElement(Le,{prefixCls:v,title:t,content:o}):null,transitionName:pe(c,"zoom-big",g.transitionName),"data-popover-inject":!0})))});Z._InternalPanelDoNotUseOrYouWillBeFired=G;const Fe=Z,Ke=e=>{const{componentCls:n,iconCls:r,antCls:t,zIndexPopup:o,colorText:a,colorWarning:i,marginXXS:l,marginXS:d,fontSize:u,fontWeightStrong:m,colorTextHeading:g}=e;return{[n]:{zIndex:o,[`&${t}-popover`]:{fontSize:u},[`${n}-message`]:{marginBottom:d,display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${n}-message-icon ${r}`]:{color:i,fontSize:u,lineHeight:1,marginInlineEnd:d},[`${n}-title`]:{fontWeight:m,color:g,"&:only-child":{fontWeight:"normal"}},[`${n}-description`]:{marginTop:l,color:a}},[`${n}-buttons`]:{textAlign:"end",whiteSpace:"nowrap",button:{marginInlineStart:d}}}}},J=K("Popconfirm",e=>Ke(e),e=>{const{zIndexPopupBase:n}=e;return{zIndexPopup:n+60}});var Xe=globalThis&&globalThis.__rest||function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(r[t[o]]=e[t[o]]);return r};const Q=e=>{const{prefixCls:n,okButtonProps:r,cancelButtonProps:t,title:o,description:a,cancelText:i,okText:l,okType:d="primary",icon:u=s.createElement(X,null),showCancel:m=!0,close:g,onConfirm:x,onCancel:v,onPopupClick:C}=e,{getPrefixCls:h}=s.useContext(P),[c]=de("Popconfirm",ue.Popconfirm),b=_(o),E=_(a);return s.createElement("div",{className:`${n}-inner-content`,onClick:C},s.createElement("div",{className:`${n}-message`},u&&s.createElement("span",{className:`${n}-message-icon`},u),s.createElement("div",{className:`${n}-message-text`},b&&s.createElement("div",{className:O(`${n}-title`)},b),E&&s.createElement("div",{className:`${n}-description`},E))),s.createElement("div",{className:`${n}-buttons`},m&&s.createElement(q,Object.assign({onClick:v,size:"small"},t),i??(c==null?void 0:c.cancelText)),s.createElement(xe,{buttonProps:Object.assign(Object.assign({size:"small"},me(d)),r),actionFn:x,close:g,prefixCls:h("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},l??(c==null?void 0:c.okText))))},Ue=e=>{const{prefixCls:n,placement:r,className:t,style:o}=e,a=Xe(e,["prefixCls","placement","className","style"]),{getPrefixCls:i}=s.useContext(P),l=i("popconfirm",n),[d]=J(l);return d(s.createElement(G,{placement:r,className:O(l,t),style:o,content:s.createElement(Q,Object.assign({prefixCls:l},a))}))},Ye=Ue;var Ge=globalThis&&globalThis.__rest||function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(r[t[o]]=e[t[o]]);return r};const ee=s.forwardRef((e,n)=>{const{prefixCls:r,placement:t="top",trigger:o="click",okType:a="primary",icon:i=s.createElement(X,null),children:l,overlayClassName:d,onOpenChange:u,onVisibleChange:m}=e,g=Ge(e,["prefixCls","placement","trigger","okType","icon","children","overlayClassName","onOpenChange","onVisibleChange"]),{getPrefixCls:x}=s.useContext(P),[v,C]=fe(!1,{value:e.open,defaultValue:e.defaultOpen}),h=(f,y)=>{C(f,!0),m==null||m(f),u==null||u(f,y)},c=f=>{h(!1,f)},b=f=>{var y;return(y=e.onConfirm)===null||y===void 0?void 0:y.call(globalThis,f)},E=f=>{var y;h(!1,f),(y=e.onCancel)===null||y===void 0||y.call(globalThis,f)},R=f=>{f.keyCode===ve.ESC&&v&&h(!1,f)},T=f=>{const{disabled:y=!1}=e;y||h(f)},I=x("popconfirm",r),te=O(I,d),[ne]=J(I);return ne(s.createElement(Fe,Object.assign({},ge(g,["title"]),{trigger:o,placement:t,onOpenChange:T,open:v,ref:n,overlayClassName:te,content:s.createElement(Q,Object.assign({okType:a,icon:i},e,{prefixCls:I,close:c,onConfirm:b,onCancel:E})),"data-popover-inject":!0}),ye(l,{onKeyDown:f=>{var y,k;s.isValidElement(l)&&((k=l==null?void 0:(y=l.props).onKeyDown)===null||k===void 0||k.call(y,f)),R(f)}})))});ee._InternalPanelDoNotUseOrYouWillBeFired=Ye;const Ze=ee,W=N.createContext({}),S=(e={})=>({id:$e(),key:"",value:"",...e}),z=({children:e})=>{const n=s.useMemo(()=>be(r=>({configurable:!0,disabled:!1,addRowAbove:(t=0)=>{r(w(o=>(o.expressions.splice(t,0,S()),o)))},addRowBelow:t=>{r(w(o=>(t=t??o.expressions.length-1,o.expressions.splice(t+1,0,S()),o)))},expressions:[],setExpressions:t=>{r({expressions:t})},swapRows:(t,o)=>{r(w(a=>{const[i]=a.expressions.splice(t,1);return a.expressions.splice(o,0,i),a}))},removeRow:t=>{r(w(o=>(o.expressions.splice(t,1),o)))},updateRow:(t,o)=>{r(w(a=>(a.expressions[t]={...a.expressions[t],...o},a)))}})),[]);return p(W.Provider,{value:n,children:e})};function H(e,n){return N.useContext(W)(e,n)}const Je=()=>N.useContext(W);try{S.displayName="createExpression",S.__docgenInfo={description:"",displayName:"createExpression",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},key:{defaultValue:null,description:"",name:"key",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}}}}}catch{}try{z.displayName="ExpressionStoreProvider",z.__docgenInfo={description:"",displayName:"ExpressionStoreProvider",props:{}}}catch{}const D=({value:e,onChange:n,defaultValue:r=[],configurable:t=!0,disabled:o=!1})=>{const a=s.useRef(!1),i=Je(),{setExpressions:l,expressions:d}=H(({setExpressions:u,expressions:m})=>({setExpressions:u,expressions:m}));return s.useEffect(()=>{i.setState({configurable:t,disabled:o})},[t,o]),s.useEffect(()=>{if(n)return i.subscribe((u,m)=>{j(u.expressions,m.expressions)||n==null||n(u.expressions)})},[i,n]),s.useEffect(()=>{a.current&&e&&!j(e,d)&&l(e)},[e]),s.useEffect(()=>{e?l(e):r&&l(r),a.current=!0},[]),null};try{D.displayName="ExpressionController",D.__docgenInfo={description:"",displayName:"ExpressionController",props:{configurable:{defaultValue:{value:"true"},description:"",name:"configurable",required:!1,type:{name:"boolean"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},defaultValue:{defaultValue:{value:"[]"},description:"",name:"defaultValue",required:!1,type:{name:"ExpressionEntry[]"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"ExpressionEntry[]"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value: ExpressionEntry[]) => void)"}}}}}catch{}const M=({expression:e,index:n})=>{const r=s.useRef(null),{updateRow:t,removeRow:o,swapRows:a,disabled:i,configurable:l}=H(({updateRow:c,removeRow:b,swapRows:E,disabled:R,configurable:T})=>({updateRow:c,removeRow:b,swapRows:E,disabled:R,configurable:T})),d=c=>{t(n,c)},u=()=>{o(n)},[{isDropping:m,direction:g},x]=he({accept:"row",collect:c=>{var b;return{isDropping:c.isOver({shallow:!0}),direction:(((b=c.getDifferenceFromInitialOffset())==null?void 0:b.y)||0)>0?"down":"up"}},drop:c=>{a(c.index,n)}}),[{isDragging:v},C,h]=Ce({canDrag:l&&!i,item:()=>({...e,index:n}),type:"row",collect:c=>({isDragging:c.isDragging()})});return h(x(r)),$("div",{ref:r,className:B("expression-list-item","expression-list__item",m&&g==="down"&&"dropping-down",m&&g==="up"&&"dropping-up"),style:{opacity:v?.5:1},children:[p("div",{ref:C,className:"expression-list-item__drag","aria-disabled":!l||i,children:p(Te,{})}),p("div",{children:p(Ee,{placeholder:"Key",disabled:!l||i,value:e==null?void 0:e.key,onChange:c=>d({key:c.target.value}),autoComplete:"off"})}),p("div",{children:p(_e,{placeholder:"Expression",maxRows:4,disabled:i,value:e==null?void 0:e.value,onChange:c=>d({value:c.target.value}),autoComplete:"off"})}),p("div",{children:p(Ze,{title:"Remove selected row?",okText:"Remove",onConfirm:u,disabled:!l||i,children:p(q,{type:"text",icon:p(Be,{}),disabled:!l||i})})})]})};try{M.displayName="ExpressionItem",M.__docgenInfo={description:"",displayName:"ExpressionItem",props:{expression:{defaultValue:null,description:"",name:"expression",required:!0,type:{name:"ExpressionEntry"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}}}}}catch{}const V=({})=>{const{expressions:e,addRowBelow:n,configurable:r,disabled:t}=H(({expressions:o,addRowBelow:a,configurable:i,disabled:l})=>({expressions:o,addRowBelow:a,configurable:i,disabled:l}),j);return $("div",{className:"expression-list",children:[$("div",{className:B("expression-list__item","expression-list__item--heading"),children:[p("div",{}),p(A.Text,{type:"secondary",children:"Key"}),p(A.Text,{type:"secondary",children:"Expression"}),p("div",{})]}),(e||[]).map((o,a)=>p(M,{expression:o,index:a},o.id)),r&&!t&&p("div",{className:B("expression-list__item"),children:p(q,{className:"expression-list__button",icon:p(we,{}),type:"dashed",onClick:()=>n(),children:"Add row"})})]})};try{V.displayName="ExpressionList",V.__docgenInfo={description:"",displayName:"ExpressionList",props:{}}}catch{}const L=N.forwardRef(({manager:e,...n})=>{const[r,t]=s.useState(!1),o=s.useRef(null);s.useEffect(()=>{t(!0)},[]);const a=s.useMemo(()=>e?{manager:e}:{backend:Pe,options:{rootElement:o.current}},[o.current,e]);return p("div",{ref:o,children:o.current&&p(Oe,{...a,children:$(z,{children:[p(D,{...n}),p(V,{})]})})})});try{L.displayName="Expression",L.__docgenInfo={description:"",displayName:"Expression",props:{manager:{defaultValue:null,description:"",name:"manager",required:!1,type:{name:"DragDropManager"}},configurable:{defaultValue:null,description:"",name:"configurable",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"ExpressionEntry[]"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"ExpressionEntry[]"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value: ExpressionEntry[]) => void)"}}}}}catch{}export{L as E};
//# sourceMappingURL=expression-4871a0b8.js.map
