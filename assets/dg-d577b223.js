import{A as Je,a as cn,c as Et,b as Tc,y as Pc,R as In,d as _n,S as Ic,_ as zc,h as Rc,m as Oc,K as Vi,r as Gc,C as Bo,U as Lc,V as Vc,X as Hc,e as Bc,g as Fc,Y as Fo,j as y,f as q,G as Se,z as oe,B as Ne,q as Uc,Z as qc}from"./index-f9942fbd.js";import{r as w,a as Wc,R as Jn}from"./index-f15177ee.js";import{E as Yc,a as Kc,p as Vn,b as $e,h as Xc,i as jc,f as ge,I as Hi,P as Zc,g as Jc,c as Qc,H as eu}from"./autosize-text-area-0b51e74b.js";import{c as tu,S as Uo,D as qo}from"./stack-efa65be7.js";import{g as ci}from"./_commonjsHelpers-de833af9.js";import{d as nu,S as ru}from"./libs-5f276d5d.js";import{I as iu,C as ou,a as Qn,s as xe,F as Dt,S as me,b as Wo,E as su,c as au,T as cu,D as uu}from"./dt-cc37cf12.js";import{_ as Qe,a as Dr}from"./extends-0ea0fc03.js";import{v as ct}from"./v4-a960c1f4.js";import{E as lu}from"./expression-4871a0b8.js";import{_ as du}from"./iframe-2d374af9.js";var fu={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908 640H804V488c0-4.4-3.6-8-8-8H548v-96h108c8.8 0 16-7.2 16-16V80c0-8.8-7.2-16-16-16H368c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h108v96H228c-4.4 0-8 3.6-8 8v152H116c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16H292v-88h440v88H620c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16zm-564 76v168H176V716h168zm84-408V140h168v168H428zm420 576H680V716h168v168z"}}]},name:"apartment",theme:"outlined"};const hu=fu;var pu=function(t,n){return w.createElement(Je,Qe({},t,{ref:n,icon:hu}))};const gu=w.forwardRef(pu);var yu={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"}}]},name:"arrow-right",theme:"outlined"};const mu=yu;var wu=function(t,n){return w.createElement(Je,Qe({},t,{ref:n,icon:mu}))};const Hn=w.forwardRef(wu);var bu={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M740 161c-61.8 0-112 50.2-112 112 0 50.1 33.1 92.6 78.5 106.9v95.9L320 602.4V318.1c44.2-15 76-56.9 76-106.1 0-61.8-50.2-112-112-112s-112 50.2-112 112c0 49.2 31.8 91 76 106.1V706c-44.2 15-76 56.9-76 106.1 0 61.8 50.2 112 112 112s112-50.2 112-112c0-49.2-31.8-91-76-106.1v-27.8l423.5-138.7a50.52 50.52 0 0034.9-48.2V378.2c42.9-15.8 73.6-57 73.6-105.2 0-61.8-50.2-112-112-112zm-504 51a48.01 48.01 0 0196 0 48.01 48.01 0 01-96 0zm96 600a48.01 48.01 0 01-96 0 48.01 48.01 0 0196 0zm408-491a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"branches",theme:"outlined"};const vu=bu;var xu=function(t,n){return w.createElement(Je,Qe({},t,{ref:n,icon:vu}))};const Yo=w.forwardRef(xu);var _u={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"};const Nu=_u;var Eu=function(t,n){return w.createElement(Je,Qe({},t,{ref:n,icon:Nu}))};const Su=w.forwardRef(Eu);var Cu={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M516 673c0 4.4 3.4 8 7.5 8h185c4.1 0 7.5-3.6 7.5-8v-48c0-4.4-3.4-8-7.5-8h-185c-4.1 0-7.5 3.6-7.5 8v48zm-194.9 6.1l192-161c3.8-3.2 3.8-9.1 0-12.3l-192-160.9A7.95 7.95 0 00308 351v62.7c0 2.4 1 4.6 2.9 6.1L420.7 512l-109.8 92.2a8.1 8.1 0 00-2.9 6.1V673c0 6.8 7.9 10.5 13.1 6.1zM880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"code",theme:"outlined"};const $u=Cu;var Au=function(t,n){return w.createElement(Je,Qe({},t,{ref:n,icon:$u}))};const Ko=w.forwardRef(Au);var ku={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"};const Du=ku;var Mu=function(t,n){return w.createElement(Je,Qe({},t,{ref:n,icon:Du}))};const Tu=w.forwardRef(Mu);var Pu={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M841 370c3-3.3 2.7-8.3-.6-11.3a8.24 8.24 0 00-5.3-2.1h-72.6c-2.4 0-4.6 1-6.1 2.8L633.5 504.6a7.96 7.96 0 01-13.4-1.9l-63.5-141.3a7.9 7.9 0 00-7.3-4.7H380.7l.9-4.7 8-42.3c10.5-55.4 38-81.4 85.8-81.4 18.6 0 35.5 1.7 48.8 4.7l14.1-66.8c-22.6-4.7-35.2-6.1-54.9-6.1-103.3 0-156.4 44.3-175.9 147.3l-9.4 49.4h-97.6c-3.8 0-7.1 2.7-7.8 6.4L181.9 415a8.07 8.07 0 007.8 9.7H284l-89 429.9a8.07 8.07 0 007.8 9.7H269c3.8 0 7.1-2.7 7.8-6.4l89.7-433.1h135.8l68.2 139.1c1.4 2.9 1 6.4-1.2 8.8l-180.6 203c-2.9 3.3-2.6 8.4.7 11.3 1.5 1.3 3.4 2 5.3 2h72.7c2.4 0 4.6-1 6.1-2.8l123.7-146.7c2.8-3.4 7.9-3.8 11.3-1 .9.8 1.6 1.7 2.1 2.8L676.4 784c1.3 2.8 4.1 4.7 7.3 4.7h64.6a8.02 8.02 0 007.2-11.5l-95.2-198.9c-1.4-2.9-.9-6.4 1.3-8.8L841 370z"}}]},name:"function",theme:"outlined"};const Iu=Pu;var zu=function(t,n){return w.createElement(Je,Qe({},t,{ref:n,icon:Iu}))};const Xo=w.forwardRef(zu);var Ru={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M843.5 737.4c-12.4-75.2-79.2-129.1-155.3-125.4S550.9 676 546 752c-153.5-4.8-208-40.7-199.1-113.7 3.3-27.3 19.8-41.9 50.1-49 18.4-4.3 38.8-4.9 57.3-3.2 1.7.2 3.5.3 5.2.5 11.3 2.7 22.8 5 34.3 6.8 34.1 5.6 68.8 8.4 101.8 6.6 92.8-5 156-45.9 159.2-132.7 3.1-84.1-54.7-143.7-147.9-183.6-29.9-12.8-61.6-22.7-93.3-30.2-14.3-3.4-26.3-5.7-35.2-7.2-7.9-75.9-71.5-133.8-147.8-134.4-76.3-.6-140.9 56.1-150.1 131.9s40 146.3 114.2 163.9c74.2 17.6 149.9-23.3 175.7-95.1 9.4 1.7 18.7 3.6 28 5.8 28.2 6.6 56.4 15.4 82.4 26.6 70.7 30.2 109.3 70.1 107.5 119.9-1.6 44.6-33.6 65.2-96.2 68.6-27.5 1.5-57.6-.9-87.3-5.8-8.3-1.4-15.9-2.8-22.6-4.3-3.9-.8-6.6-1.5-7.8-1.8l-3.1-.6c-2.2-.3-5.9-.8-10.7-1.3-25-2.3-52.1-1.5-78.5 4.6-55.2 12.9-93.9 47.2-101.1 105.8-15.7 126.2 78.6 184.7 276 188.9 29.1 70.4 106.4 107.9 179.6 87 73.3-20.9 119.3-93.4 106.9-168.6zM329.1 345.2a83.3 83.3 0 11.01-166.61 83.3 83.3 0 01-.01 166.61zM695.6 845a83.3 83.3 0 11.01-166.61A83.3 83.3 0 01695.6 845z"}}]},name:"node-index",theme:"outlined"};const Ou=Ru;var Gu=function(t,n){return w.createElement(Je,Qe({},t,{ref:n,icon:Ou}))};const Lu=w.forwardRef(Gu);var Vu={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"};const Hu=Vu;var Bu=function(t,n){return w.createElement(Je,Qe({},t,{ref:n,icon:Hu}))};const jo=w.forwardRef(Bu);var Zo=w.forwardRef(function(e,t){var n=e.prefixCls,r=e.style,i=e.className,o=e.duration,s=o===void 0?4.5:o,a=e.eventKey,u=e.content,c=e.closable,l=e.closeIcon,d=l===void 0?"x":l,f=e.props,h=e.onClick,p=e.onNoticeClose,g=e.times,b=w.useState(!1),m=cn(b,2),x=m[0],C=m[1],_=function(){p(a)},k=function(P){(P.key==="Enter"||P.code==="Enter"||P.keyCode===Pc.ENTER)&&_()};w.useEffect(function(){if(!x&&s>0){var $=setTimeout(function(){_()},s*1e3);return function(){clearTimeout($)}}},[s,x,g]);var E="".concat(n,"-notice");return w.createElement("div",Dr({},f,{ref:t,className:Et(E,i,Tc({},"".concat(E,"-closable"),c)),style:r,onMouseEnter:function(){C(!0)},onMouseLeave:function(){C(!1)},onClick:h}),w.createElement("div",{className:"".concat(E,"-content")},u),c&&w.createElement("a",{tabIndex:0,className:"".concat(E,"-close"),onKeyDown:k,onClick:function(P){P.preventDefault(),P.stopPropagation(),_()}},d))}),Fu=w.forwardRef(function(e,t){var n=e.prefixCls,r=n===void 0?"rc-notification":n,i=e.container,o=e.motion,s=e.maxCount,a=e.className,u=e.style,c=e.onAllRemoved,l=w.useState([]),d=cn(l,2),f=d[0],h=d[1],p=function($){var P,z=f.find(function(H){return H.key===$});z==null||(P=z.onClose)===null||P===void 0||P.call(z),h(function(H){return H.filter(function(R){return R.key!==$})})};w.useImperativeHandle(t,function(){return{open:function($){h(function(P){var z=In(P),H=z.findIndex(function(M){return M.key===$.key}),R=_n({},$);if(H>=0){var L;R.times=(((L=P[H])===null||L===void 0?void 0:L.times)||0)+1,z[H]=R}else R.times=0,z.push(R);return s>0&&z.length>s&&(z=z.slice(-s)),z})},close:function($){p($)},destroy:function(){h([])}}});var g=w.useState({}),b=cn(g,2),m=b[0],x=b[1];w.useEffect(function(){var E={};f.forEach(function($){var P=$.placement,z=P===void 0?"topRight":P;z&&(E[z]=E[z]||[],E[z].push($))}),Object.keys(m).forEach(function($){E[$]=E[$]||[]}),x(E)},[f]);var C=function($){x(function(P){var z=_n({},P),H=z[$]||[];return H.length||delete z[$],z})},_=w.useRef(!1);if(w.useEffect(function(){Object.keys(m).length>0?_.current=!0:_.current&&(c==null||c(),_.current=!1)},[m]),!i)return null;var k=Object.keys(m);return Wc.createPortal(w.createElement(w.Fragment,null,k.map(function(E){var $=m[E],P=$.map(function(H){return{config:H,key:H.key}}),z=typeof o=="function"?o(E):o;return w.createElement(Ic,Dr({key:E,className:Et(r,"".concat(r,"-").concat(E),a==null?void 0:a(E)),style:u==null?void 0:u(E),keys:P,motionAppear:!0},z,{onAllRemoved:function(){C(E)}}),function(H,R){var L=H.config,M=H.className,v=H.style,D=L.key,S=L.times,I=L.className,O=L.style;return w.createElement(Zo,Dr({},L,{ref:R,prefixCls:r,className:Et(M,I),style:_n(_n({},v),O),times:S,key:D,eventKey:D,onNoticeClose:p}))})})),i)}),Uu=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved"],qu=function(){return document.body},Bi=0;function Wu(){for(var e={},t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach(function(i){i&&Object.keys(i).forEach(function(o){var s=i[o];s!==void 0&&(e[o]=s)})}),e}function Yu(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.getContainer,n=t===void 0?qu:t,r=e.motion,i=e.prefixCls,o=e.maxCount,s=e.className,a=e.style,u=e.onAllRemoved,c=zc(e,Uu),l=w.useState(),d=cn(l,2),f=d[0],h=d[1],p=w.useRef(),g=w.createElement(Fu,{container:f,ref:p,prefixCls:i,motion:r,maxCount:o,className:s,style:a,onAllRemoved:u}),b=w.useState([]),m=cn(b,2),x=m[0],C=m[1],_=w.useMemo(function(){return{open:function(E){var $=Wu(c,E);($.key===null||$.key===void 0)&&($.key="rc-notification-".concat(Bi),Bi+=1),C(function(P){return[].concat(In(P),[{type:"open",config:$}])})},close:function(E){C(function($){return[].concat(In($),[{type:"close",key:E}])})},destroy:function(){C(function(E){return[].concat(In(E),[{type:"destroy"}])})}}},[]);return w.useEffect(function(){h(n())}),w.useEffect(function(){p.current&&x.length&&(x.forEach(function(k){switch(k.type){case"open":p.current.open(k.config);break;case"close":p.current.close(k.key);break;case"destroy":p.current.destroy();break}}),C([]))},[x]),[_,g]}const Ku=e=>{const{componentCls:t,iconCls:n,boxShadow:r,colorText:i,colorSuccess:o,colorError:s,colorWarning:a,colorInfo:u,fontSizeLG:c,motionEaseInOutCirc:l,motionDurationSlow:d,marginXS:f,paddingXS:h,borderRadiusLG:p,zIndexPopup:g,contentPadding:b,contentBg:m}=e,x=`${t}-notice`,C=new Vi("MessageMoveIn",{"0%":{padding:0,transform:"translateY(-100%)",opacity:0},"100%":{padding:h,transform:"translateY(0)",opacity:1}}),_=new Vi("MessageMoveOut",{"0%":{maxHeight:e.height,padding:h,opacity:1},"100%":{maxHeight:0,padding:0,opacity:0}}),k={padding:h,textAlign:"center",[`${t}-custom-content > ${n}`]:{verticalAlign:"text-bottom",marginInlineEnd:f,fontSize:c},[`${x}-content`]:{display:"inline-block",padding:b,background:m,borderRadius:p,boxShadow:r,pointerEvents:"all"},[`${t}-success > ${n}`]:{color:o},[`${t}-error > ${n}`]:{color:s},[`${t}-warning > ${n}`]:{color:a},[`${t}-info > ${n},
      ${t}-loading > ${n}`]:{color:u}};return[{[t]:Object.assign(Object.assign({},Gc(e)),{color:i,position:"fixed",top:f,width:"100%",pointerEvents:"none",zIndex:g,[`${t}-move-up`]:{animationFillMode:"forwards"},[`
        ${t}-move-up-appear,
        ${t}-move-up-enter
      `]:{animationName:C,animationDuration:d,animationPlayState:"paused",animationTimingFunction:l},[`
        ${t}-move-up-appear${t}-move-up-appear-active,
        ${t}-move-up-enter${t}-move-up-enter-active
      `]:{animationPlayState:"running"},[`${t}-move-up-leave`]:{animationName:_,animationDuration:d,animationPlayState:"paused",animationTimingFunction:l},[`${t}-move-up-leave${t}-move-up-leave-active`]:{animationPlayState:"running"},"&-rtl":{direction:"rtl",span:{direction:"rtl"}}})},{[t]:{[x]:Object.assign({},k)}},{[`${t}-notice-pure-panel`]:Object.assign(Object.assign({},k),{padding:0,textAlign:"start"})}]},Jo=Rc("Message",e=>{const t=Oc(e,{height:150});return[Ku(t)]},e=>({zIndexPopup:e.zIndexPopupBase+10,contentBg:e.colorBgElevated,contentPadding:`${(e.controlHeightLG-e.fontSize*e.lineHeight)/2}px ${e.paddingSM}px`}),{clientOnly:!0});var Xu=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const ju={info:w.createElement(iu,null),success:w.createElement(ou,null),error:w.createElement(Lc,null),warning:w.createElement(Yc,null),loading:w.createElement(Vc,null)},Qo=e=>{let{prefixCls:t,type:n,icon:r,children:i}=e;return w.createElement("div",{className:Et(`${t}-custom-content`,`${t}-${n}`)},r||ju[n],w.createElement("span",null,i))},Zu=e=>{const{prefixCls:t,className:n,type:r,icon:i,content:o}=e,s=Xu(e,["prefixCls","className","type","icon","content"]),{getPrefixCls:a}=w.useContext(Bo),u=t||a("message"),[,c]=Jo(u);return w.createElement(Zo,Object.assign({},s,{prefixCls:u,className:Et(n,c,`${u}-notice-pure-panel`),eventKey:"pure",duration:null,content:w.createElement(Qo,{prefixCls:u,type:r,icon:i},o)}))},Ju=Zu;function Qu(e,t){return{motionName:t??`${e}-move-up`}}function ui(e){let t;const n=new Promise(i=>{t=e(()=>{i(!0)})}),r=()=>{t==null||t()};return r.then=(i,o)=>n.then(i,o),r.promise=n,r}var el=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const tl=8,nl=3,rl=w.forwardRef((e,t)=>{const{top:n,prefixCls:r,getContainer:i,maxCount:o,duration:s=nl,rtl:a,transitionName:u,onAllRemoved:c}=e,{getPrefixCls:l,getPopupContainer:d,message:f}=w.useContext(Bo),h=r||l("message"),[,p]=Jo(h),g=()=>({left:"50%",transform:"translateX(-50%)",top:n??tl}),b=()=>Et(p,{[`${h}-rtl`]:a}),m=()=>Qu(h,u),x=w.createElement("span",{className:`${h}-close-x`},w.createElement(Qn,{className:`${h}-close-icon`})),[C,_]=Yu({prefixCls:h,style:g,className:b,motion:m,closable:!1,closeIcon:x,duration:s,getContainer:()=>(i==null?void 0:i())||(d==null?void 0:d())||document.body,maxCount:o,onAllRemoved:c});return w.useImperativeHandle(t,()=>Object.assign(Object.assign({},C),{prefixCls:h,hashId:p,message:f})),_});let Fi=0;function es(e){const t=w.useRef(null);return[w.useMemo(()=>{const r=u=>{var c;(c=t.current)===null||c===void 0||c.close(u)},i=u=>{if(!t.current){const $=()=>{};return $.then=()=>{},$}const{open:c,prefixCls:l,hashId:d,message:f}=t.current,h=`${l}-notice`,{content:p,icon:g,type:b,key:m,className:x,style:C,onClose:_}=u,k=el(u,["content","icon","type","key","className","style","onClose"]);let E=m;return E==null&&(Fi+=1,E=`antd-message-${Fi}`),ui($=>(c(Object.assign(Object.assign({},k),{key:E,content:w.createElement(Qo,{prefixCls:l,type:b,icon:g},p),placement:"top",className:Et(b&&`${h}-${b}`,d,x,f==null?void 0:f.className),style:Object.assign(Object.assign({},f==null?void 0:f.style),C),onClose:()=>{_==null||_(),$()}})),()=>{r(E)}))},s={open:i,destroy:u=>{var c;u!==void 0?r(u):(c=t.current)===null||c===void 0||c.destroy()}};return["info","success","warning","error","loading"].forEach(u=>{const c=(l,d,f)=>{let h;l&&typeof l=="object"&&"content"in l?h=l:h={content:l};let p,g;typeof d=="function"?g=d:(p=d,g=f);const b=Object.assign(Object.assign({onClose:g,duration:p},h),{type:u});return i(b)};s[u]=c}),s},[]),w.createElement(rl,Object.assign({key:"message-holder"},e,{ref:t}))]}function il(e){return es(e)}let De=null,vt=e=>e(),un=[],Bn={};function ol(){const{prefixCls:e,getContainer:t,duration:n,rtl:r,maxCount:i,top:o}=Bn,s=e??Fo().getPrefixCls("message"),a=(t==null?void 0:t())||document.body;return{prefixCls:s,container:a,duration:n,rtl:r,maxCount:i,top:o}}const sl=w.forwardRef((e,t)=>{const n=()=>{const{prefixCls:f,container:h,maxCount:p,duration:g,rtl:b,top:m}=ol();return{prefixCls:f,getContainer:()=>h,maxCount:p,duration:g,rtl:b,top:m}},[r,i]=w.useState(n),[o,s]=es(r),a=Fo(),u=a.getRootPrefixCls(),c=a.getIconPrefixCls(),l=a.getTheme(),d=()=>{i(n)};return w.useEffect(d,[]),w.useImperativeHandle(t,()=>{const f=Object.assign({},o);return Object.keys(f).forEach(h=>{f[h]=function(){return d(),o[h].apply(o,arguments)}}),{instance:f,sync:d}}),w.createElement(Fc,{prefixCls:u,iconPrefixCls:c,theme:l},s)});function er(){if(!De){const e=document.createDocumentFragment(),t={fragment:e};De=t,vt(()=>{Hc(w.createElement(sl,{ref:n=>{const{instance:r,sync:i}=n||{};Promise.resolve().then(()=>{!t.instance&&r&&(t.instance=r,t.sync=i,er())})}}),e)});return}De.instance&&(un.forEach(e=>{const{type:t,skipped:n}=e;if(!n)switch(t){case"open":{vt(()=>{const r=De.instance.open(Object.assign(Object.assign({},Bn),e.config));r==null||r.then(e.resolve),e.setCloseFn(r)});break}case"destroy":vt(()=>{De==null||De.instance.destroy(e.key)});break;default:vt(()=>{var r;const i=(r=De.instance)[t].apply(r,Bc(e.args));i==null||i.then(e.resolve),e.setCloseFn(i)})}}),un=[])}function al(e){Bn=Object.assign(Object.assign({},Bn),e),vt(()=>{var t;(t=De==null?void 0:De.sync)===null||t===void 0||t.call(De)})}function cl(e){const t=ui(n=>{let r;const i={type:"open",config:e,resolve:n,setCloseFn:o=>{r=o}};return un.push(i),()=>{r?vt(()=>{r()}):i.skipped=!0}});return er(),t}function ul(e,t){const n=ui(r=>{let i;const o={type:e,args:t,resolve:r,setCloseFn:s=>{i=s}};return un.push(o),()=>{i?vt(()=>{i()}):o.skipped=!0}});return er(),n}function ll(e){un.push({type:"destroy",key:e}),er()}const dl=["success","info","warning","error","loading"],fl={open:cl,destroy:ll,config:al,useMessage:il,_InternalPanelDoNotUseOrYouWillBeFired:Ju},ts=fl;dl.forEach(e=>{ts[e]=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ul(e,n)}});const Oe=ts,li=Jn.createContext({}),Mr=e=>{const{children:t}=e,n=w.useMemo(()=>Kc((r,i)=>({decisionGraph:{nodes:[],edges:[]},setDecisionGraph:o=>{r({decisionGraph:o})},updateNode:(o,s)=>{var u,c;const a=Vn(i().decisionGraph,l=>{const d=(l.nodes||[]).map(f=>(o===(f==null?void 0:f.id)&&(f.content=s),f));l.nodes=d});r({decisionGraph:a}),(c=(u=i())==null?void 0:u.onChange)==null||c.call(u,a)},openTabs:[],activeTab:"graph",openTab:o=>{const s=i().openTabs,a=s.find(u=>u===o);r(a?{activeTab:a}:{openTabs:[...s,o],activeTab:o})},closeTab:o=>{const s=i().openTabs,a=i().activeTab,u=s==null?void 0:s.findIndex(l=>l===o),c=s==null?void 0:s[u];r({openTabs:s.filter(l=>l!==c)}),a===o&&r({activeTab:u>0?s==null?void 0:s[u-1]:"graph"})},disabled:!1,configurable:!0,components:[]})),[]);return y(li.Provider,{value:n,children:t})};function Ie(e,t){return Jn.useContext(li)(e,t)}const hl=()=>Jn.useContext(li);try{Mr.displayName="DecisionGraphProvider",Mr.__docgenInfo={description:"",displayName:"DecisionGraphProvider",props:{}}}catch{}try{dgstorecontext.displayName="dgstorecontext",dgstorecontext.__docgenInfo={description:"",displayName:"dgstorecontext",props:{}}}catch{}const Tr=({id:e,defaultValue:t,value:n,disabled:r=!1,configurable:i=!0,onChange:o,onAddNode:s,onOpenNode:a,onTabChange:u,onEditGraph:c,components:l,simulate:d})=>{const f=w.useRef(!1),h=hl(),{setDecisionGraph:p,decisionGraph:g}=Ie(({setDecisionGraph:m,decisionGraph:x})=>({setDecisionGraph:m,decisionGraph:x}),$e),b=tu(m=>{o==null||o(m)},100);return w.useEffect(()=>{h.setState({id:e,disabled:r,configurable:i,components:l,simulate:d,onChange:b,onAddNode:s,onOpenNode:a,onTabChange:u,onEditGraph:c})},[e,r,i,l,d,s,a,u,c]),w.useEffect(()=>{f.current&&n!==void 0&&!$e(n,g)&&p(n)},[n]),w.useEffect(()=>{n!==void 0?p(n):t!==void 0&&p(t),f.current=!0},[]),null};try{Tr.displayName="DecisionGraphEmpty",Tr.__docgenInfo={description:"",displayName:"DecisionGraphEmpty",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"DecisionGraphType"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"DecisionGraphType"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},configurable:{defaultValue:{value:"true"},description:"",name:"configurable",required:!1,type:{name:"boolean"}},simulate:{defaultValue:null,description:"",name:"simulate",required:!1,type:{name:"any"}},components:{defaultValue:null,description:"",name:"components",required:!1,type:{name:"CustomNodeType[]"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((val: DecisionGraphType) => void)"}},onAddNode:{defaultValue:null,description:"",name:"onAddNode",required:!1,type:{name:"((type: string, position?: XYPosition) => void)"}},onOpenNode:{defaultValue:null,description:"",name:"onOpenNode",required:!1,type:{name:"((node: DecisionNode) => void)"}},onTabChange:{defaultValue:null,description:"",name:"onTabChange",required:!1,type:{name:"((tab?: string) => void)"}},onEditGraph:{defaultValue:null,description:"",name:"onEditGraph",required:!1,type:{name:"((edit: boolean) => void)"}}}}}catch{}var di={exports:{}},Ot=typeof Reflect=="object"?Reflect:null,Ui=Ot&&typeof Ot.apply=="function"?Ot.apply:function(t,n,r){return Function.prototype.apply.call(t,n,r)},zn;Ot&&typeof Ot.ownKeys=="function"?zn=Ot.ownKeys:Object.getOwnPropertySymbols?zn=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:zn=function(t){return Object.getOwnPropertyNames(t)};function pl(e){console&&console.warn&&console.warn(e)}var ns=Number.isNaN||function(t){return t!==t};function ae(){ae.init.call(this)}di.exports=ae;di.exports.once=wl;ae.EventEmitter=ae;ae.prototype._events=void 0;ae.prototype._eventsCount=0;ae.prototype._maxListeners=void 0;var qi=10;function tr(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(ae,"defaultMaxListeners",{enumerable:!0,get:function(){return qi},set:function(e){if(typeof e!="number"||e<0||ns(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");qi=e}});ae.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};ae.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||ns(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function rs(e){return e._maxListeners===void 0?ae.defaultMaxListeners:e._maxListeners}ae.prototype.getMaxListeners=function(){return rs(this)};ae.prototype.emit=function(t){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=t==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var s;if(n.length>0&&(s=n[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var u=o[t];if(u===void 0)return!1;if(typeof u=="function")Ui(u,this,n);else for(var c=u.length,l=cs(u,c),r=0;r<c;++r)Ui(l[r],this,n);return!0};function is(e,t,n,r){var i,o,s;if(tr(n),o=e._events,o===void 0?(o=e._events=Object.create(null),e._eventsCount=0):(o.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),s===void 0)s=o[t]=n,++e._eventsCount;else if(typeof s=="function"?s=o[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),i=rs(e),i>0&&s.length>i&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=s.length,pl(a)}return e}ae.prototype.addListener=function(t,n){return is(this,t,n,!1)};ae.prototype.on=ae.prototype.addListener;ae.prototype.prependListener=function(t,n){return is(this,t,n,!0)};function gl(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function os(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=gl.bind(r);return i.listener=n,r.wrapFn=i,i}ae.prototype.once=function(t,n){return tr(n),this.on(t,os(this,t,n)),this};ae.prototype.prependOnceListener=function(t,n){return tr(n),this.prependListener(t,os(this,t,n)),this};ae.prototype.removeListener=function(t,n){var r,i,o,s,a;if(tr(n),i=this._events,i===void 0)return this;if(r=i[t],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,r.listener||n));else if(typeof r!="function"){for(o=-1,s=r.length-1;s>=0;s--)if(r[s]===n||r[s].listener===n){a=r[s].listener,o=s;break}if(o<0)return this;o===0?r.shift():yl(r,o),r.length===1&&(i[t]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",t,a||n)}return this};ae.prototype.off=ae.prototype.removeListener;ae.prototype.removeAllListeners=function(t){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[t]),this;if(arguments.length===0){var o=Object.keys(r),s;for(i=0;i<o.length;++i)s=o[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(t,n[i]);return this};function ss(e,t,n){var r=e._events;if(r===void 0)return[];var i=r[t];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?ml(i):cs(i,i.length)}ae.prototype.listeners=function(t){return ss(this,t,!0)};ae.prototype.rawListeners=function(t){return ss(this,t,!1)};ae.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):as.call(e,t)};ae.prototype.listenerCount=as;function as(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}ae.prototype.eventNames=function(){return this._eventsCount>0?zn(this._events):[]};function cs(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function yl(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function ml(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function wl(e,t){return new Promise(function(n,r){function i(s){e.removeListener(t,o),r(s)}function o(){typeof e.removeListener=="function"&&e.removeListener("error",i),n([].slice.call(arguments))}us(e,t,o,{once:!0}),t!=="error"&&bl(e,i,{once:!0})})}function bl(e,t,n){typeof e.on=="function"&&us(e,"error",t,n)}function us(e,t,n,r){if(typeof e.on=="function")r.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function i(o){r.once&&e.removeEventListener(t,i),n(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var vl=di.exports;function qe(e){if(typeof e!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=e}typeof Symbol<"u"&&(qe.prototype[Symbol.iterator]=function(){return this});qe.of=function(){var e=arguments,t=e.length,n=0;return new qe(function(){return n>=t?{done:!0}:{done:!1,value:e[n++]}})};qe.empty=function(){var e=new qe(function(){return{done:!0}});return e};qe.fromSequence=function(e){var t=0,n=e.length;return new qe(function(){return t>=n?{done:!0}:{done:!1,value:e[t++]}})};qe.is=function(e){return e instanceof qe?!0:typeof e=="object"&&e!==null&&typeof e.next=="function"};var nr=qe;const Pe=ci(nr);var rr={};rr.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";rr.SYMBOL_SUPPORT=typeof Symbol<"u";var xl=nr,ls=rr,_l=ls.ARRAY_BUFFER_SUPPORT,Nl=ls.SYMBOL_SUPPORT;function El(e){return typeof e=="string"||Array.isArray(e)||_l&&ArrayBuffer.isView(e)?xl.fromSequence(e):typeof e!="object"||e===null?null:Nl&&typeof e[Symbol.iterator]=="function"?e[Symbol.iterator]():typeof e.next=="function"?e:null}var ds=function(t){var n=El(t);if(!n)throw new Error("obliterator: target is not iterable nor a valid iterator.");return n},Sl=ds,Cl=function(t,n){for(var r=arguments.length>1?n:1/0,i=r!==1/0?new Array(r):[],o,s=0,a=Sl(t);;){if(s===r)return i;if(o=a.next(),o.done)return s!==n&&(i.length=s),i;i[s++]=o.value}};const fs=ci(Cl);var $l=nr,Al=ds,kl=function(){var t=arguments,n=null,r=-1;return new $l(function(){var o=null;do{if(n===null){if(r++,r>=t.length)return{done:!0};n=Al(t[r])}if(o=n.next(),o.done===!0){n=null;continue}break}while(!0);return o})};const Xe=ci(kl);function Dl(){const e=arguments[0];for(let t=1,n=arguments.length;t<n;t++)if(arguments[t])for(const r in arguments[t])e[r]=arguments[t][r];return e}let he=Dl;typeof Object.assign=="function"&&(he=Object.assign);function Te(e,t,n,r){const i=e._nodes.get(t);let o=null;return i&&(r==="mixed"?o=i.out&&i.out[n]||i.undirected&&i.undirected[n]:r==="directed"?o=i.out&&i.out[n]:o=i.undirected&&i.undirected[n]),o}function we(e){return typeof e=="object"&&e!==null}function hs(e){let t;for(t in e)return!1;return!0}function ke(e,t,n){Object.defineProperty(e,t,{enumerable:!1,configurable:!1,writable:!0,value:n})}function Re(e,t,n){const r={enumerable:!0,configurable:!0};typeof n=="function"?r.get=n:(r.value=n,r.writable=!1),Object.defineProperty(e,t,r)}function Wi(e){return!(!we(e)||e.attributes&&!Array.isArray(e.attributes))}function Ml(){let e=Math.floor(Math.random()*256)&255;return()=>e++}class fi extends Error{constructor(t){super(),this.name="GraphError",this.message=t}}class F extends fi{constructor(t){super(t),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,F.prototype.constructor)}}class V extends fi{constructor(t){super(t),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,V.prototype.constructor)}}class Z extends fi{constructor(t){super(t),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Z.prototype.constructor)}}function ps(e,t){this.key=e,this.attributes=t,this.clear()}ps.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function gs(e,t){this.key=e,this.attributes=t,this.clear()}gs.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function ys(e,t){this.key=e,this.attributes=t,this.clear()}ys.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function qt(e,t,n,r,i){this.key=t,this.attributes=i,this.undirected=e,this.source=n,this.target=r}qt.prototype.attach=function(){let e="out",t="in";this.undirected&&(e=t="undirected");const n=this.source.key,r=this.target.key;this.source[e][r]=this,!(this.undirected&&n===r)&&(this.target[t][n]=this)};qt.prototype.attachMulti=function(){let e="out",t="in";const n=this.source.key,r=this.target.key;this.undirected&&(e=t="undirected");const i=this.source[e],o=i[r];if(typeof o>"u"){i[r]=this,this.undirected&&n===r||(this.target[t][n]=this);return}o.previous=this,this.next=o,i[r]=this,this.target[t][n]=this};qt.prototype.detach=function(){const e=this.source.key,t=this.target.key;let n="out",r="in";this.undirected&&(n=r="undirected"),delete this.source[n][t],delete this.target[r][e]};qt.prototype.detachMulti=function(){const e=this.source.key,t=this.target.key;let n="out",r="in";this.undirected&&(n=r="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[n][t],delete this.target[r][e]):(this.next.previous=void 0,this.source[n][t]=this.next,this.target[r][e]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const ms=0,ws=1,Tl=2,bs=3;function et(e,t,n,r,i,o,s){let a,u,c,l;if(r=""+r,n===ms){if(a=e._nodes.get(r),!a)throw new V(`Graph.${t}: could not find the "${r}" node in the graph.`);c=i,l=o}else if(n===bs){if(i=""+i,u=e._edges.get(i),!u)throw new V(`Graph.${t}: could not find the "${i}" edge in the graph.`);const d=u.source.key,f=u.target.key;if(r===d)a=u.target;else if(r===f)a=u.source;else throw new V(`Graph.${t}: the "${r}" node is not attached to the "${i}" edge (${d}, ${f}).`);c=o,l=s}else{if(u=e._edges.get(r),!u)throw new V(`Graph.${t}: could not find the "${r}" edge in the graph.`);n===ws?a=u.source:a=u.target,c=i,l=o}return[a,c,l]}function Pl(e,t,n){e.prototype[t]=function(r,i,o){const[s,a]=et(this,t,n,r,i,o);return s.attributes[a]}}function Il(e,t,n){e.prototype[t]=function(r,i){const[o]=et(this,t,n,r,i);return o.attributes}}function zl(e,t,n){e.prototype[t]=function(r,i,o){const[s,a]=et(this,t,n,r,i,o);return s.attributes.hasOwnProperty(a)}}function Rl(e,t,n){e.prototype[t]=function(r,i,o,s){const[a,u,c]=et(this,t,n,r,i,o,s);return a.attributes[u]=c,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:u}),this}}function Ol(e,t,n){e.prototype[t]=function(r,i,o,s){const[a,u,c]=et(this,t,n,r,i,o,s);if(typeof c!="function")throw new F(`Graph.${t}: updater should be a function.`);const l=a.attributes,d=c(l[u]);return l[u]=d,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:u}),this}}function Gl(e,t,n){e.prototype[t]=function(r,i,o){const[s,a]=et(this,t,n,r,i,o);return delete s.attributes[a],this.emit("nodeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:a}),this}}function Ll(e,t,n){e.prototype[t]=function(r,i,o){const[s,a]=et(this,t,n,r,i,o);if(!we(a))throw new F(`Graph.${t}: provided attributes are not a plain object.`);return s.attributes=a,this.emit("nodeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function Vl(e,t,n){e.prototype[t]=function(r,i,o){const[s,a]=et(this,t,n,r,i,o);if(!we(a))throw new F(`Graph.${t}: provided attributes are not a plain object.`);return he(s.attributes,a),this.emit("nodeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:a}),this}}function Hl(e,t,n){e.prototype[t]=function(r,i,o){const[s,a]=et(this,t,n,r,i,o);if(typeof a!="function")throw new F(`Graph.${t}: provided updater is not a function.`);return s.attributes=a(s.attributes),this.emit("nodeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const Bl=[{name:e=>`get${e}Attribute`,attacher:Pl},{name:e=>`get${e}Attributes`,attacher:Il},{name:e=>`has${e}Attribute`,attacher:zl},{name:e=>`set${e}Attribute`,attacher:Rl},{name:e=>`update${e}Attribute`,attacher:Ol},{name:e=>`remove${e}Attribute`,attacher:Gl},{name:e=>`replace${e}Attributes`,attacher:Ll},{name:e=>`merge${e}Attributes`,attacher:Vl},{name:e=>`update${e}Attributes`,attacher:Hl}];function Fl(e){Bl.forEach(function({name:t,attacher:n}){n(e,t("Node"),ms),n(e,t("Source"),ws),n(e,t("Target"),Tl),n(e,t("Opposite"),bs)})}function Ul(e,t,n){e.prototype[t]=function(r,i){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Z(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Z(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,a=""+i;if(i=arguments[2],o=Te(this,s,a,n),!o)throw new V(`Graph.${t}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(n!=="mixed")throw new Z(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new V(`Graph.${t}: could not find the "${r}" edge in the graph.`)}return o.attributes[i]}}function ql(e,t,n){e.prototype[t]=function(r){let i;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Z(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new Z(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,s=""+arguments[1];if(i=Te(this,o,s,n),!i)throw new V(`Graph.${t}: could not find an edge for the given path ("${o}" - "${s}").`)}else{if(n!=="mixed")throw new Z(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,i=this._edges.get(r),!i)throw new V(`Graph.${t}: could not find the "${r}" edge in the graph.`)}return i.attributes}}function Wl(e,t,n){e.prototype[t]=function(r,i){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Z(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Z(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,a=""+i;if(i=arguments[2],o=Te(this,s,a,n),!o)throw new V(`Graph.${t}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(n!=="mixed")throw new Z(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new V(`Graph.${t}: could not find the "${r}" edge in the graph.`)}return o.attributes.hasOwnProperty(i)}}function Yl(e,t,n){e.prototype[t]=function(r,i,o){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Z(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new Z(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,u=""+i;if(i=arguments[2],o=arguments[3],s=Te(this,a,u,n),!s)throw new V(`Graph.${t}: could not find an edge for the given path ("${a}" - "${u}").`)}else{if(n!=="mixed")throw new Z(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new V(`Graph.${t}: could not find the "${r}" edge in the graph.`)}return s.attributes[i]=o,this.emit("edgeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:i}),this}}function Kl(e,t,n){e.prototype[t]=function(r,i,o){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Z(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new Z(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,u=""+i;if(i=arguments[2],o=arguments[3],s=Te(this,a,u,n),!s)throw new V(`Graph.${t}: could not find an edge for the given path ("${a}" - "${u}").`)}else{if(n!=="mixed")throw new Z(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new V(`Graph.${t}: could not find the "${r}" edge in the graph.`)}if(typeof o!="function")throw new F(`Graph.${t}: updater should be a function.`);return s.attributes[i]=o(s.attributes[i]),this.emit("edgeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:i}),this}}function Xl(e,t,n){e.prototype[t]=function(r,i){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Z(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Z(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,a=""+i;if(i=arguments[2],o=Te(this,s,a,n),!o)throw new V(`Graph.${t}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(n!=="mixed")throw new Z(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new V(`Graph.${t}: could not find the "${r}" edge in the graph.`)}return delete o.attributes[i],this.emit("edgeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:i}),this}}function jl(e,t,n){e.prototype[t]=function(r,i){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Z(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Z(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,a=""+i;if(i=arguments[2],o=Te(this,s,a,n),!o)throw new V(`Graph.${t}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(n!=="mixed")throw new Z(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new V(`Graph.${t}: could not find the "${r}" edge in the graph.`)}if(!we(i))throw new F(`Graph.${t}: provided attributes are not a plain object.`);return o.attributes=i,this.emit("edgeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function Zl(e,t,n){e.prototype[t]=function(r,i){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Z(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Z(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,a=""+i;if(i=arguments[2],o=Te(this,s,a,n),!o)throw new V(`Graph.${t}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(n!=="mixed")throw new Z(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new V(`Graph.${t}: could not find the "${r}" edge in the graph.`)}if(!we(i))throw new F(`Graph.${t}: provided attributes are not a plain object.`);return he(o.attributes,i),this.emit("edgeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:i}),this}}function Jl(e,t,n){e.prototype[t]=function(r,i){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Z(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Z(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,a=""+i;if(i=arguments[2],o=Te(this,s,a,n),!o)throw new V(`Graph.${t}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(n!=="mixed")throw new Z(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new V(`Graph.${t}: could not find the "${r}" edge in the graph.`)}if(typeof i!="function")throw new F(`Graph.${t}: provided updater is not a function.`);return o.attributes=i(o.attributes),this.emit("edgeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const Ql=[{name:e=>`get${e}Attribute`,attacher:Ul},{name:e=>`get${e}Attributes`,attacher:ql},{name:e=>`has${e}Attribute`,attacher:Wl},{name:e=>`set${e}Attribute`,attacher:Yl},{name:e=>`update${e}Attribute`,attacher:Kl},{name:e=>`remove${e}Attribute`,attacher:Xl},{name:e=>`replace${e}Attributes`,attacher:jl},{name:e=>`merge${e}Attributes`,attacher:Zl},{name:e=>`update${e}Attributes`,attacher:Jl}];function ed(e){Ql.forEach(function({name:t,attacher:n}){n(e,t("Edge"),"mixed"),n(e,t("DirectedEdge"),"directed"),n(e,t("UndirectedEdge"),"undirected")})}const td=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function nd(e,t,n,r){let i=!1;for(const o in t){if(o===r)continue;const s=t[o];if(i=n(s.key,s.attributes,s.source.key,s.target.key,s.source.attributes,s.target.attributes,s.undirected),e&&i)return s.key}}function rd(e,t,n,r){let i,o,s,a=!1;for(const u in t)if(u!==r){i=t[u];do{if(o=i.source,s=i.target,a=n(i.key,i.attributes,o.key,s.key,o.attributes,s.attributes,i.undirected),e&&a)return i.key;i=i.next}while(i!==void 0)}}function yr(e,t){const n=Object.keys(e),r=n.length;let i,o=0;return new Pe(function(){do if(i)i=i.next;else{if(o>=r)return{done:!0};const a=n[o++];if(a===t){i=void 0;continue}i=e[a]}while(!i);return{done:!1,value:{edge:i.key,attributes:i.attributes,source:i.source.key,target:i.target.key,sourceAttributes:i.source.attributes,targetAttributes:i.target.attributes,undirected:i.undirected}}})}function id(e,t,n,r){const i=t[n];if(!i)return;const o=i.source,s=i.target;if(r(i.key,i.attributes,o.key,s.key,o.attributes,s.attributes,i.undirected)&&e)return i.key}function od(e,t,n,r){let i=t[n];if(!i)return;let o=!1;do{if(o=r(i.key,i.attributes,i.source.key,i.target.key,i.source.attributes,i.target.attributes,i.undirected),e&&o)return i.key;i=i.next}while(i!==void 0)}function mr(e,t){let n=e[t];return n.next!==void 0?new Pe(function(){if(!n)return{done:!0};const r={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:r}}):Pe.of({edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected})}function sd(e,t){if(e.size===0)return[];if(t==="mixed"||t===e.type)return typeof Array.from=="function"?Array.from(e._edges.keys()):fs(e._edges.keys(),e._edges.size);const n=t==="undirected"?e.undirectedSize:e.directedSize,r=new Array(n),i=t==="undirected",o=e._edges.values();let s=0,a,u;for(;a=o.next(),a.done!==!0;)u=a.value,u.undirected===i&&(r[s++]=u.key);return r}function vs(e,t,n,r){if(t.size===0)return;const i=n!=="mixed"&&n!==t.type,o=n==="undirected";let s,a,u=!1;const c=t._edges.values();for(;s=c.next(),s.done!==!0;){if(a=s.value,i&&a.undirected!==o)continue;const{key:l,attributes:d,source:f,target:h}=a;if(u=r(l,d,f.key,h.key,f.attributes,h.attributes,a.undirected),e&&u)return l}}function ad(e,t){if(e.size===0)return Pe.empty();const n=t!=="mixed"&&t!==e.type,r=t==="undirected",i=e._edges.values();return new Pe(function(){let s,a;for(;;){if(s=i.next(),s.done)return s;if(a=s.value,!(n&&a.undirected!==r))break}return{value:{edge:a.key,attributes:a.attributes,source:a.source.key,target:a.target.key,sourceAttributes:a.source.attributes,targetAttributes:a.target.attributes,undirected:a.undirected},done:!1}})}function hi(e,t,n,r,i,o){const s=t?rd:nd;let a;if(n!=="undirected"&&(r!=="out"&&(a=s(e,i.in,o),e&&a)||r!=="in"&&(a=s(e,i.out,o,r?void 0:i.key),e&&a))||n!=="directed"&&(a=s(e,i.undirected,o),e&&a))return a}function cd(e,t,n,r){const i=[];return hi(!1,e,t,n,r,function(o){i.push(o)}),i}function ud(e,t,n){let r=Pe.empty();return e!=="undirected"&&(t!=="out"&&typeof n.in<"u"&&(r=Xe(r,yr(n.in))),t!=="in"&&typeof n.out<"u"&&(r=Xe(r,yr(n.out,t?void 0:n.key)))),e!=="directed"&&typeof n.undirected<"u"&&(r=Xe(r,yr(n.undirected))),r}function pi(e,t,n,r,i,o,s){const a=n?od:id;let u;if(t!=="undirected"&&(typeof i.in<"u"&&r!=="out"&&(u=a(e,i.in,o,s),e&&u)||typeof i.out<"u"&&r!=="in"&&(r||i.key!==o)&&(u=a(e,i.out,o,s),e&&u))||t!=="directed"&&typeof i.undirected<"u"&&(u=a(e,i.undirected,o,s),e&&u))return u}function ld(e,t,n,r,i){const o=[];return pi(!1,e,t,n,r,i,function(s){o.push(s)}),o}function dd(e,t,n,r){let i=Pe.empty();return e!=="undirected"&&(typeof n.in<"u"&&t!=="out"&&r in n.in&&(i=Xe(i,mr(n.in,r))),typeof n.out<"u"&&t!=="in"&&r in n.out&&(t||n.key!==r)&&(i=Xe(i,mr(n.out,r)))),e!=="directed"&&typeof n.undirected<"u"&&r in n.undirected&&(i=Xe(i,mr(n.undirected,r))),i}function fd(e,t){const{name:n,type:r,direction:i}=t;e.prototype[n]=function(o,s){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];if(!arguments.length)return sd(this,r);if(arguments.length===1){o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new V(`Graph.${n}: could not find the "${o}" node in the graph.`);return cd(this.multi,r==="mixed"?this.type:r,i,a)}if(arguments.length===2){o=""+o,s=""+s;const a=this._nodes.get(o);if(!a)throw new V(`Graph.${n}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(s))throw new V(`Graph.${n}:  could not find the "${s}" target node in the graph.`);return ld(r,this.multi,i,a,s)}throw new F(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function hd(e,t){const{name:n,type:r,direction:i}=t,o="forEach"+n[0].toUpperCase()+n.slice(1,-1);e.prototype[o]=function(c,l,d){if(!(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)){if(arguments.length===1)return d=c,vs(!1,this,r,d);if(arguments.length===2){c=""+c,d=l;const f=this._nodes.get(c);if(typeof f>"u")throw new V(`Graph.${o}: could not find the "${c}" node in the graph.`);return hi(!1,this.multi,r==="mixed"?this.type:r,i,f,d)}if(arguments.length===3){c=""+c,l=""+l;const f=this._nodes.get(c);if(!f)throw new V(`Graph.${o}:  could not find the "${c}" source node in the graph.`);if(!this._nodes.has(l))throw new V(`Graph.${o}:  could not find the "${l}" target node in the graph.`);return pi(!1,r,this.multi,i,f,l,d)}throw new F(`Graph.${o}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const s="map"+n[0].toUpperCase()+n.slice(1);e.prototype[s]=function(){const c=Array.prototype.slice.call(arguments),l=c.pop();let d;if(c.length===0){let f=0;r!=="directed"&&(f+=this.undirectedSize),r!=="undirected"&&(f+=this.directedSize),d=new Array(f);let h=0;c.push((p,g,b,m,x,C,_)=>{d[h++]=l(p,g,b,m,x,C,_)})}else d=[],c.push((f,h,p,g,b,m,x)=>{d.push(l(f,h,p,g,b,m,x))});return this[o].apply(this,c),d};const a="filter"+n[0].toUpperCase()+n.slice(1);e.prototype[a]=function(){const c=Array.prototype.slice.call(arguments),l=c.pop(),d=[];return c.push((f,h,p,g,b,m,x)=>{l(f,h,p,g,b,m,x)&&d.push(f)}),this[o].apply(this,c),d};const u="reduce"+n[0].toUpperCase()+n.slice(1);e.prototype[u]=function(){let c=Array.prototype.slice.call(arguments);if(c.length<2||c.length>4)throw new F(`Graph.${u}: invalid number of arguments (expecting 2, 3 or 4 and got ${c.length}).`);if(typeof c[c.length-1]=="function"&&typeof c[c.length-2]!="function")throw new F(`Graph.${u}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let l,d;c.length===2?(l=c[0],d=c[1],c=[]):c.length===3?(l=c[1],d=c[2],c=[c[0]]):c.length===4&&(l=c[2],d=c[3],c=[c[0],c[1]]);let f=d;return c.push((h,p,g,b,m,x,C)=>{f=l(f,h,p,g,b,m,x,C)}),this[o].apply(this,c),f}}function pd(e,t){const{name:n,type:r,direction:i}=t,o="find"+n[0].toUpperCase()+n.slice(1,-1);e.prototype[o]=function(u,c,l){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return!1;if(arguments.length===1)return l=u,vs(!0,this,r,l);if(arguments.length===2){u=""+u,l=c;const d=this._nodes.get(u);if(typeof d>"u")throw new V(`Graph.${o}: could not find the "${u}" node in the graph.`);return hi(!0,this.multi,r==="mixed"?this.type:r,i,d,l)}if(arguments.length===3){u=""+u,c=""+c;const d=this._nodes.get(u);if(!d)throw new V(`Graph.${o}:  could not find the "${u}" source node in the graph.`);if(!this._nodes.has(c))throw new V(`Graph.${o}:  could not find the "${c}" target node in the graph.`);return pi(!0,r,this.multi,i,d,c,l)}throw new F(`Graph.${o}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const s="some"+n[0].toUpperCase()+n.slice(1,-1);e.prototype[s]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop();return u.push((d,f,h,p,g,b,m)=>c(d,f,h,p,g,b,m)),!!this[o].apply(this,u)};const a="every"+n[0].toUpperCase()+n.slice(1,-1);e.prototype[a]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop();return u.push((d,f,h,p,g,b,m)=>!c(d,f,h,p,g,b,m)),!this[o].apply(this,u)}}function gd(e,t){const{name:n,type:r,direction:i}=t,o=n.slice(0,-1)+"Entries";e.prototype[o]=function(s,a){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return Pe.empty();if(!arguments.length)return ad(this,r);if(arguments.length===1){s=""+s;const u=this._nodes.get(s);if(!u)throw new V(`Graph.${o}: could not find the "${s}" node in the graph.`);return ud(r,i,u)}if(arguments.length===2){s=""+s,a=""+a;const u=this._nodes.get(s);if(!u)throw new V(`Graph.${o}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(a))throw new V(`Graph.${o}:  could not find the "${a}" target node in the graph.`);return dd(r,i,u,a)}throw new F(`Graph.${o}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function yd(e){td.forEach(t=>{fd(e,t),hd(e,t),pd(e,t),gd(e,t)})}const md=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function ir(){this.A=null,this.B=null}ir.prototype.wrap=function(e){this.A===null?this.A=e:this.B===null&&(this.B=e)};ir.prototype.has=function(e){return this.A!==null&&e in this.A||this.B!==null&&e in this.B};function Zt(e,t,n,r,i){for(const o in r){const s=r[o],a=s.source,u=s.target,c=a===n?u:a;if(t&&t.has(c.key))continue;const l=i(c.key,c.attributes);if(e&&l)return c.key}}function gi(e,t,n,r,i){if(t!=="mixed"){if(t==="undirected")return Zt(e,null,r,r.undirected,i);if(typeof n=="string")return Zt(e,null,r,r[n],i)}const o=new ir;let s;if(t!=="undirected"){if(n!=="out"){if(s=Zt(e,null,r,r.in,i),e&&s)return s;o.wrap(r.in)}if(n!=="in"){if(s=Zt(e,o,r,r.out,i),e&&s)return s;o.wrap(r.out)}}if(t!=="directed"&&(s=Zt(e,o,r,r.undirected,i),e&&s))return s}function wd(e,t,n){if(e!=="mixed"){if(e==="undirected")return Object.keys(n.undirected);if(typeof t=="string")return Object.keys(n[t])}const r=[];return gi(!1,e,t,n,function(i){r.push(i)}),r}function Jt(e,t,n){const r=Object.keys(n),i=r.length;let o=0;return new Pe(function(){let a=null;do{if(o>=i)return e&&e.wrap(n),{done:!0};const u=n[r[o++]],c=u.source,l=u.target;if(a=c===t?l:c,e&&e.has(a.key)){a=null;continue}}while(a===null);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}})}function bd(e,t,n){if(e!=="mixed"){if(e==="undirected")return Jt(null,n,n.undirected);if(typeof t=="string")return Jt(null,n,n[t])}let r=Pe.empty();const i=new ir;return e!=="undirected"&&(t!=="out"&&(r=Xe(r,Jt(i,n,n.in))),t!=="in"&&(r=Xe(r,Jt(i,n,n.out)))),e!=="directed"&&(r=Xe(r,Jt(i,n,n.undirected))),r}function vd(e,t){const{name:n,type:r,direction:i}=t;e.prototype[n]=function(o){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];o=""+o;const s=this._nodes.get(o);if(typeof s>"u")throw new V(`Graph.${n}: could not find the "${o}" node in the graph.`);return wd(r==="mixed"?this.type:r,i,s)}}function xd(e,t){const{name:n,type:r,direction:i}=t,o="forEach"+n[0].toUpperCase()+n.slice(1,-1);e.prototype[o]=function(c,l){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;c=""+c;const d=this._nodes.get(c);if(typeof d>"u")throw new V(`Graph.${o}: could not find the "${c}" node in the graph.`);gi(!1,r==="mixed"?this.type:r,i,d,l)};const s="map"+n[0].toUpperCase()+n.slice(1);e.prototype[s]=function(c,l){const d=[];return this[o](c,(f,h)=>{d.push(l(f,h))}),d};const a="filter"+n[0].toUpperCase()+n.slice(1);e.prototype[a]=function(c,l){const d=[];return this[o](c,(f,h)=>{l(f,h)&&d.push(f)}),d};const u="reduce"+n[0].toUpperCase()+n.slice(1);e.prototype[u]=function(c,l,d){if(arguments.length<3)throw new F(`Graph.${u}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let f=d;return this[o](c,(h,p)=>{f=l(f,h,p)}),f}}function _d(e,t){const{name:n,type:r,direction:i}=t,o=n[0].toUpperCase()+n.slice(1,-1),s="find"+o;e.prototype[s]=function(c,l){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;c=""+c;const d=this._nodes.get(c);if(typeof d>"u")throw new V(`Graph.${s}: could not find the "${c}" node in the graph.`);return gi(!0,r==="mixed"?this.type:r,i,d,l)};const a="some"+o;e.prototype[a]=function(c,l){return!!this[s](c,l)};const u="every"+o;e.prototype[u]=function(c,l){return!this[s](c,(f,h)=>!l(f,h))}}function Nd(e,t){const{name:n,type:r,direction:i}=t,o=n.slice(0,-1)+"Entries";e.prototype[o]=function(s){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return Pe.empty();s=""+s;const a=this._nodes.get(s);if(typeof a>"u")throw new V(`Graph.${o}: could not find the "${s}" node in the graph.`);return bd(r==="mixed"?this.type:r,i,a)}}function Ed(e){md.forEach(t=>{vd(e,t),xd(e,t),_d(e,t),Nd(e,t)})}function Nn(e,t,n,r,i){const o=r._nodes.values(),s=r.type;let a,u,c,l,d,f,h;for(;a=o.next(),a.done!==!0;){let p=!1;if(u=a.value,s!=="undirected"){l=u.out;for(c in l){d=l[c];do{if(f=d.target,p=!0,h=i(u.key,f.key,u.attributes,f.attributes,d.key,d.attributes,d.undirected),e&&h)return d;d=d.next}while(d)}}if(s!=="directed"){l=u.undirected;for(c in l)if(!(t&&u.key>c)){d=l[c];do{if(f=d.target,f.key!==c&&(f=d.source),p=!0,h=i(u.key,f.key,u.attributes,f.attributes,d.key,d.attributes,d.undirected),e&&h)return d;d=d.next}while(d)}}if(n&&!p&&(h=i(u.key,null,u.attributes,null,null,null,null),e&&h))return null}}function Sd(e,t){const n={key:e};return hs(t.attributes)||(n.attributes=he({},t.attributes)),n}function Cd(e,t,n){const r={key:t,source:n.source.key,target:n.target.key};return hs(n.attributes)||(r.attributes=he({},n.attributes)),e==="mixed"&&n.undirected&&(r.undirected=!0),r}function $d(e){if(!we(e))throw new F('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in e))throw new F("Graph.import: serialized node is missing its key.");if("attributes"in e&&(!we(e.attributes)||e.attributes===null))throw new F("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function Ad(e){if(!we(e))throw new F('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in e))throw new F("Graph.import: serialized edge is missing its source.");if(!("target"in e))throw new F("Graph.import: serialized edge is missing its target.");if("attributes"in e&&(!we(e.attributes)||e.attributes===null))throw new F("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in e&&typeof e.undirected!="boolean")throw new F("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const kd=Ml(),Dd=new Set(["directed","undirected","mixed"]),Yi=new Set(["domain","_events","_eventsCount","_maxListeners"]),Md=[{name:e=>`${e}Edge`,generateKey:!0},{name:e=>`${e}DirectedEdge`,generateKey:!0,type:"directed"},{name:e=>`${e}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:e=>`${e}EdgeWithKey`},{name:e=>`${e}DirectedEdgeWithKey`,type:"directed"},{name:e=>`${e}UndirectedEdgeWithKey`,type:"undirected"}],Td={allowSelfLoops:!0,multi:!1,type:"mixed"};function Pd(e,t,n){if(n&&!we(n))throw new F(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(t=""+t,n=n||{},e._nodes.has(t))throw new Z(`Graph.addNode: the "${t}" node already exist in the graph.`);const r=new e.NodeDataClass(t,n);return e._nodes.set(t,r),e.emit("nodeAdded",{key:t,attributes:n}),r}function Ki(e,t,n){const r=new e.NodeDataClass(t,n);return e._nodes.set(t,r),e.emit("nodeAdded",{key:t,attributes:n}),r}function xs(e,t,n,r,i,o,s,a){if(!r&&e.type==="undirected")throw new Z(`Graph.${t}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(r&&e.type==="directed")throw new Z(`Graph.${t}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!we(a))throw new F(`Graph.${t}: invalid attributes. Expecting an object but got "${a}"`);if(o=""+o,s=""+s,a=a||{},!e.allowSelfLoops&&o===s)throw new Z(`Graph.${t}: source & target are the same ("${o}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const u=e._nodes.get(o),c=e._nodes.get(s);if(!u)throw new V(`Graph.${t}: source node "${o}" not found.`);if(!c)throw new V(`Graph.${t}: target node "${s}" not found.`);const l={key:null,undirected:r,source:o,target:s,attributes:a};if(n)i=e._edgeKeyGenerator();else if(i=""+i,e._edges.has(i))throw new Z(`Graph.${t}: the "${i}" edge already exists in the graph.`);if(!e.multi&&(r?typeof u.undirected[s]<"u":typeof u.out[s]<"u"))throw new Z(`Graph.${t}: an edge linking "${o}" to "${s}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const d=new qt(r,i,u,c,a);e._edges.set(i,d);const f=o===s;return r?(u.undirectedDegree++,c.undirectedDegree++,f&&(u.undirectedLoops++,e._undirectedSelfLoopCount++)):(u.outDegree++,c.inDegree++,f&&(u.directedLoops++,e._directedSelfLoopCount++)),e.multi?d.attachMulti():d.attach(),r?e._undirectedSize++:e._directedSize++,l.key=i,e.emit("edgeAdded",l),i}function Id(e,t,n,r,i,o,s,a,u){if(!r&&e.type==="undirected")throw new Z(`Graph.${t}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(r&&e.type==="directed")throw new Z(`Graph.${t}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a){if(u){if(typeof a!="function")throw new F(`Graph.${t}: invalid updater function. Expecting a function but got "${a}"`)}else if(!we(a))throw new F(`Graph.${t}: invalid attributes. Expecting an object but got "${a}"`)}o=""+o,s=""+s;let c;if(u&&(c=a,a=void 0),!e.allowSelfLoops&&o===s)throw new Z(`Graph.${t}: source & target are the same ("${o}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let l=e._nodes.get(o),d=e._nodes.get(s),f,h;if(!n&&(f=e._edges.get(i),f)){if((f.source.key!==o||f.target.key!==s)&&(!r||f.source.key!==s||f.target.key!==o))throw new Z(`Graph.${t}: inconsistency detected when attempting to merge the "${i}" edge with "${o}" source & "${s}" target vs. ("${f.source.key}", "${f.target.key}").`);h=f}if(!h&&!e.multi&&l&&(h=r?l.undirected[s]:l.out[s]),h){const x=[h.key,!1,!1,!1];if(u?!c:!a)return x;if(u){const C=h.attributes;h.attributes=c(C),e.emit("edgeAttributesUpdated",{type:"replace",key:h.key,attributes:h.attributes})}else he(h.attributes,a),e.emit("edgeAttributesUpdated",{type:"merge",key:h.key,attributes:h.attributes,data:a});return x}a=a||{},u&&c&&(a=c(a));const p={key:null,undirected:r,source:o,target:s,attributes:a};if(n)i=e._edgeKeyGenerator();else if(i=""+i,e._edges.has(i))throw new Z(`Graph.${t}: the "${i}" edge already exists in the graph.`);let g=!1,b=!1;l||(l=Ki(e,o,{}),g=!0,o===s&&(d=l,b=!0)),d||(d=Ki(e,s,{}),b=!0),f=new qt(r,i,l,d,a),e._edges.set(i,f);const m=o===s;return r?(l.undirectedDegree++,d.undirectedDegree++,m&&(l.undirectedLoops++,e._undirectedSelfLoopCount++)):(l.outDegree++,d.inDegree++,m&&(l.directedLoops++,e._directedSelfLoopCount++)),e.multi?f.attachMulti():f.attach(),r?e._undirectedSize++:e._directedSize++,p.key=i,e.emit("edgeAdded",p),[i,!0,g,b]}function Mt(e,t){e._edges.delete(t.key);const{source:n,target:r,attributes:i}=t,o=t.undirected,s=n===r;o?(n.undirectedDegree--,r.undirectedDegree--,s&&(n.undirectedLoops--,e._undirectedSelfLoopCount--)):(n.outDegree--,r.inDegree--,s&&(n.directedLoops--,e._directedSelfLoopCount--)),e.multi?t.detachMulti():t.detach(),o?e._undirectedSize--:e._directedSize--,e.emit("edgeDropped",{key:t.key,attributes:i,source:n.key,target:r.key,undirected:o})}let ue=class Pr extends vl.EventEmitter{constructor(t){if(super(),t=he({},Td,t),typeof t.multi!="boolean")throw new F(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${t.multi}".`);if(!Dd.has(t.type))throw new F(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${t.type}".`);if(typeof t.allowSelfLoops!="boolean")throw new F(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${t.allowSelfLoops}".`);const n=t.type==="mixed"?ps:t.type==="directed"?gs:ys;ke(this,"NodeDataClass",n);const r="geid_"+kd()+"_";let i=0;const o=()=>{let s;do s=r+i++;while(this._edges.has(s));return s};ke(this,"_attributes",{}),ke(this,"_nodes",new Map),ke(this,"_edges",new Map),ke(this,"_directedSize",0),ke(this,"_undirectedSize",0),ke(this,"_directedSelfLoopCount",0),ke(this,"_undirectedSelfLoopCount",0),ke(this,"_edgeKeyGenerator",o),ke(this,"_options",t),Yi.forEach(s=>ke(this,s,this[s])),Re(this,"order",()=>this._nodes.size),Re(this,"size",()=>this._edges.size),Re(this,"directedSize",()=>this._directedSize),Re(this,"undirectedSize",()=>this._undirectedSize),Re(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),Re(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),Re(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),Re(this,"multi",this._options.multi),Re(this,"type",this._options.type),Re(this,"allowSelfLoops",this._options.allowSelfLoops),Re(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(t){return this._nodes.has(""+t)}hasDirectedEdge(t,n){if(this.type==="undirected")return!1;if(arguments.length===1){const r=""+t,i=this._edges.get(r);return!!i&&!i.undirected}else if(arguments.length===2){t=""+t,n=""+n;const r=this._nodes.get(t);return r?r.out.hasOwnProperty(n):!1}throw new F(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(t,n){if(this.type==="directed")return!1;if(arguments.length===1){const r=""+t,i=this._edges.get(r);return!!i&&i.undirected}else if(arguments.length===2){t=""+t,n=""+n;const r=this._nodes.get(t);return r?r.undirected.hasOwnProperty(n):!1}throw new F(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(t,n){if(arguments.length===1){const r=""+t;return this._edges.has(r)}else if(arguments.length===2){t=""+t,n=""+n;const r=this._nodes.get(t);return r?typeof r.out<"u"&&r.out.hasOwnProperty(n)||typeof r.undirected<"u"&&r.undirected.hasOwnProperty(n):!1}throw new F(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(t,n){if(this.type==="undirected")return;if(t=""+t,n=""+n,this.multi)throw new Z("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const r=this._nodes.get(t);if(!r)throw new V(`Graph.directedEdge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(n))throw new V(`Graph.directedEdge: could not find the "${n}" target node in the graph.`);const i=r.out&&r.out[n]||void 0;if(i)return i.key}undirectedEdge(t,n){if(this.type==="directed")return;if(t=""+t,n=""+n,this.multi)throw new Z("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const r=this._nodes.get(t);if(!r)throw new V(`Graph.undirectedEdge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(n))throw new V(`Graph.undirectedEdge: could not find the "${n}" target node in the graph.`);const i=r.undirected&&r.undirected[n]||void 0;if(i)return i.key}edge(t,n){if(this.multi)throw new Z("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");t=""+t,n=""+n;const r=this._nodes.get(t);if(!r)throw new V(`Graph.edge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(n))throw new V(`Graph.edge: could not find the "${n}" target node in the graph.`);const i=r.out&&r.out[n]||r.undirected&&r.undirected[n]||void 0;if(i)return i.key}areDirectedNeighbors(t,n){t=""+t,n=""+n;const r=this._nodes.get(t);if(!r)throw new V(`Graph.areDirectedNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:n in r.in||n in r.out}areOutNeighbors(t,n){t=""+t,n=""+n;const r=this._nodes.get(t);if(!r)throw new V(`Graph.areOutNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:n in r.out}areInNeighbors(t,n){t=""+t,n=""+n;const r=this._nodes.get(t);if(!r)throw new V(`Graph.areInNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:n in r.in}areUndirectedNeighbors(t,n){t=""+t,n=""+n;const r=this._nodes.get(t);if(!r)throw new V(`Graph.areUndirectedNeighbors: could not find the "${t}" node in the graph.`);return this.type==="directed"?!1:n in r.undirected}areNeighbors(t,n){t=""+t,n=""+n;const r=this._nodes.get(t);if(!r)throw new V(`Graph.areNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&(n in r.in||n in r.out)||this.type!=="directed"&&n in r.undirected}areInboundNeighbors(t,n){t=""+t,n=""+n;const r=this._nodes.get(t);if(!r)throw new V(`Graph.areInboundNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&n in r.in||this.type!=="directed"&&n in r.undirected}areOutboundNeighbors(t,n){t=""+t,n=""+n;const r=this._nodes.get(t);if(!r)throw new V(`Graph.areOutboundNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&n in r.out||this.type!=="directed"&&n in r.undirected}inDegree(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new V(`Graph.inDegree: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:n.inDegree}outDegree(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new V(`Graph.outDegree: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:n.outDegree}directedDegree(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new V(`Graph.directedDegree: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree}undirectedDegree(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new V(`Graph.undirectedDegree: could not find the "${t}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree}inboundDegree(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new V(`Graph.inboundDegree: could not find the "${t}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.inDegree),r}outboundDegree(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new V(`Graph.outboundDegree: could not find the "${t}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.outDegree),r}degree(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new V(`Graph.degree: could not find the "${t}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.inDegree+n.outDegree),r}inDegreeWithoutSelfLoops(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new V(`Graph.inDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:n.inDegree-n.directedLoops}outDegreeWithoutSelfLoops(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new V(`Graph.outDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:n.outDegree-n.directedLoops}directedDegreeWithoutSelfLoops(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new V(`Graph.directedDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree-n.directedLoops*2}undirectedDegreeWithoutSelfLoops(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new V(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree-n.undirectedLoops*2}inboundDegreeWithoutSelfLoops(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new V(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.inDegree,i+=n.directedLoops),r-i}outboundDegreeWithoutSelfLoops(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new V(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.outDegree,i+=n.directedLoops),r-i}degreeWithoutSelfLoops(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new V(`Graph.degreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.inDegree+n.outDegree,i+=n.directedLoops*2),r-i}source(t){t=""+t;const n=this._edges.get(t);if(!n)throw new V(`Graph.source: could not find the "${t}" edge in the graph.`);return n.source.key}target(t){t=""+t;const n=this._edges.get(t);if(!n)throw new V(`Graph.target: could not find the "${t}" edge in the graph.`);return n.target.key}extremities(t){t=""+t;const n=this._edges.get(t);if(!n)throw new V(`Graph.extremities: could not find the "${t}" edge in the graph.`);return[n.source.key,n.target.key]}opposite(t,n){t=""+t,n=""+n;const r=this._edges.get(n);if(!r)throw new V(`Graph.opposite: could not find the "${n}" edge in the graph.`);const i=r.source.key,o=r.target.key;if(t===i)return o;if(t===o)return i;throw new V(`Graph.opposite: the "${t}" node is not attached to the "${n}" edge (${i}, ${o}).`)}hasExtremity(t,n){t=""+t,n=""+n;const r=this._edges.get(t);if(!r)throw new V(`Graph.hasExtremity: could not find the "${t}" edge in the graph.`);return r.source.key===n||r.target.key===n}isUndirected(t){t=""+t;const n=this._edges.get(t);if(!n)throw new V(`Graph.isUndirected: could not find the "${t}" edge in the graph.`);return n.undirected}isDirected(t){t=""+t;const n=this._edges.get(t);if(!n)throw new V(`Graph.isDirected: could not find the "${t}" edge in the graph.`);return!n.undirected}isSelfLoop(t){t=""+t;const n=this._edges.get(t);if(!n)throw new V(`Graph.isSelfLoop: could not find the "${t}" edge in the graph.`);return n.source===n.target}addNode(t,n){return Pd(this,t,n).key}mergeNode(t,n){if(n&&!we(n))throw new F(`Graph.mergeNode: invalid attributes. Expecting an object but got "${n}"`);t=""+t,n=n||{};let r=this._nodes.get(t);return r?(n&&(he(r.attributes,n),this.emit("nodeAttributesUpdated",{type:"merge",key:t,attributes:r.attributes,data:n})),[t,!1]):(r=new this.NodeDataClass(t,n),this._nodes.set(t,r),this.emit("nodeAdded",{key:t,attributes:n}),[t,!0])}updateNode(t,n){if(n&&typeof n!="function")throw new F(`Graph.updateNode: invalid updater function. Expecting a function but got "${n}"`);t=""+t;let r=this._nodes.get(t);if(r){if(n){const o=r.attributes;r.attributes=n(o),this.emit("nodeAttributesUpdated",{type:"replace",key:t,attributes:r.attributes})}return[t,!1]}const i=n?n({}):{};return r=new this.NodeDataClass(t,i),this._nodes.set(t,r),this.emit("nodeAdded",{key:t,attributes:i}),[t,!0]}dropNode(t){t=""+t;const n=this._nodes.get(t);if(!n)throw new V(`Graph.dropNode: could not find the "${t}" node in the graph.`);let r;if(this.type!=="undirected"){for(const i in n.out){r=n.out[i];do Mt(this,r),r=r.next;while(r)}for(const i in n.in){r=n.in[i];do Mt(this,r),r=r.next;while(r)}}if(this.type!=="directed")for(const i in n.undirected){r=n.undirected[i];do Mt(this,r),r=r.next;while(r)}this._nodes.delete(t),this.emit("nodeDropped",{key:t,attributes:n.attributes})}dropEdge(t){let n;if(arguments.length>1){const r=""+arguments[0],i=""+arguments[1];if(n=Te(this,r,i,this.type),!n)throw new V(`Graph.dropEdge: could not find the "${r}" -> "${i}" edge in the graph.`)}else if(t=""+t,n=this._edges.get(t),!n)throw new V(`Graph.dropEdge: could not find the "${t}" edge in the graph.`);return Mt(this,n),this}dropDirectedEdge(t,n){if(arguments.length<2)throw new Z("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Z("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");t=""+t,n=""+n;const r=Te(this,t,n,"directed");if(!r)throw new V(`Graph.dropDirectedEdge: could not find a "${t}" -> "${n}" edge in the graph.`);return Mt(this,r),this}dropUndirectedEdge(t,n){if(arguments.length<2)throw new Z("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Z("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const r=Te(this,t,n,"undirected");if(!r)throw new V(`Graph.dropUndirectedEdge: could not find a "${t}" -> "${n}" edge in the graph.`);return Mt(this,r),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const t=this._nodes.values();let n;for(;n=t.next(),n.done!==!0;)n.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(t){return this._attributes[t]}getAttributes(){return this._attributes}hasAttribute(t){return this._attributes.hasOwnProperty(t)}setAttribute(t,n){return this._attributes[t]=n,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:t}),this}updateAttribute(t,n){if(typeof n!="function")throw new F("Graph.updateAttribute: updater should be a function.");const r=this._attributes[t];return this._attributes[t]=n(r),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:t}),this}removeAttribute(t){return delete this._attributes[t],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:t}),this}replaceAttributes(t){if(!we(t))throw new F("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=t,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(t){if(!we(t))throw new F("Graph.mergeAttributes: provided attributes are not a plain object.");return he(this._attributes,t),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:t}),this}updateAttributes(t){if(typeof t!="function")throw new F("Graph.updateAttributes: provided updater is not a function.");return this._attributes=t(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(t,n){if(typeof t!="function")throw new F("Graph.updateEachNodeAttributes: expecting an updater function.");if(n&&!Wi(n))throw new F("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._nodes.values();let i,o;for(;i=r.next(),i.done!==!0;)o=i.value,o.attributes=t(o.key,o.attributes);this.emit("eachNodeAttributesUpdated",{hints:n||null})}updateEachEdgeAttributes(t,n){if(typeof t!="function")throw new F("Graph.updateEachEdgeAttributes: expecting an updater function.");if(n&&!Wi(n))throw new F("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._edges.values();let i,o,s,a;for(;i=r.next(),i.done!==!0;)o=i.value,s=o.source,a=o.target,o.attributes=t(o.key,o.attributes,s.key,a.key,s.attributes,a.attributes,o.undirected);this.emit("eachEdgeAttributesUpdated",{hints:n||null})}forEachAdjacencyEntry(t){if(typeof t!="function")throw new F("Graph.forEachAdjacencyEntry: expecting a callback.");Nn(!1,!1,!1,this,t)}forEachAdjacencyEntryWithOrphans(t){if(typeof t!="function")throw new F("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");Nn(!1,!1,!0,this,t)}forEachAssymetricAdjacencyEntry(t){if(typeof t!="function")throw new F("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");Nn(!1,!0,!1,this,t)}forEachAssymetricAdjacencyEntryWithOrphans(t){if(typeof t!="function")throw new F("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");Nn(!1,!0,!0,this,t)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):fs(this._nodes.keys(),this._nodes.size)}forEachNode(t){if(typeof t!="function")throw new F("Graph.forEachNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)i=r.value,t(i.key,i.attributes)}findNode(t){if(typeof t!="function")throw new F("Graph.findNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,t(i.key,i.attributes))return i.key}mapNodes(t){if(typeof t!="function")throw new F("Graph.mapNode: expecting a callback.");const n=this._nodes.values();let r,i;const o=new Array(this.order);let s=0;for(;r=n.next(),r.done!==!0;)i=r.value,o[s++]=t(i.key,i.attributes);return o}someNode(t){if(typeof t!="function")throw new F("Graph.someNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,t(i.key,i.attributes))return!0;return!1}everyNode(t){if(typeof t!="function")throw new F("Graph.everyNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,!t(i.key,i.attributes))return!1;return!0}filterNodes(t){if(typeof t!="function")throw new F("Graph.filterNodes: expecting a callback.");const n=this._nodes.values();let r,i;const o=[];for(;r=n.next(),r.done!==!0;)i=r.value,t(i.key,i.attributes)&&o.push(i.key);return o}reduceNodes(t,n){if(typeof t!="function")throw new F("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new F("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let r=n;const i=this._nodes.values();let o,s;for(;o=i.next(),o.done!==!0;)s=o.value,r=t(r,s.key,s.attributes);return r}nodeEntries(){const t=this._nodes.values();return new Pe(()=>{const n=t.next();if(n.done)return n;const r=n.value;return{value:{node:r.key,attributes:r.attributes},done:!1}})}export(){const t=new Array(this._nodes.size);let n=0;this._nodes.forEach((i,o)=>{t[n++]=Sd(o,i)});const r=new Array(this._edges.size);return n=0,this._edges.forEach((i,o)=>{r[n++]=Cd(this.type,o,i)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:t,edges:r}}import(t,n=!1){if(t instanceof Pr)return t.forEachNode((u,c)=>{n?this.mergeNode(u,c):this.addNode(u,c)}),t.forEachEdge((u,c,l,d,f,h,p)=>{n?p?this.mergeUndirectedEdgeWithKey(u,l,d,c):this.mergeDirectedEdgeWithKey(u,l,d,c):p?this.addUndirectedEdgeWithKey(u,l,d,c):this.addDirectedEdgeWithKey(u,l,d,c)}),this;if(!we(t))throw new F("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(t.attributes){if(!we(t.attributes))throw new F("Graph.import: invalid attributes. Expecting a plain object.");n?this.mergeAttributes(t.attributes):this.replaceAttributes(t.attributes)}let r,i,o,s,a;if(t.nodes){if(o=t.nodes,!Array.isArray(o))throw new F("Graph.import: invalid nodes. Expecting an array.");for(r=0,i=o.length;r<i;r++){s=o[r],$d(s);const{key:u,attributes:c}=s;n?this.mergeNode(u,c):this.addNode(u,c)}}if(t.edges){let u=!1;if(this.type==="undirected"&&(u=!0),o=t.edges,!Array.isArray(o))throw new F("Graph.import: invalid edges. Expecting an array.");for(r=0,i=o.length;r<i;r++){a=o[r],Ad(a);const{source:c,target:l,attributes:d,undirected:f=u}=a;let h;"key"in a?(h=n?f?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:f?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,h.call(this,a.key,c,l,d)):(h=n?f?this.mergeUndirectedEdge:this.mergeDirectedEdge:f?this.addUndirectedEdge:this.addDirectedEdge,h.call(this,c,l,d))}}return this}nullCopy(t){const n=new Pr(he({},this._options,t));return n.replaceAttributes(he({},this.getAttributes())),n}emptyCopy(t){const n=this.nullCopy(t);return this._nodes.forEach((r,i)=>{const o=he({},r.attributes);r=new n.NodeDataClass(i,o),n._nodes.set(i,r)}),n}copy(t){if(t=t||{},typeof t.type=="string"&&t.type!==this.type&&t.type!=="mixed")throw new Z(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${t.type}" because this would mean losing information about the current graph.`);if(typeof t.multi=="boolean"&&t.multi!==this.multi&&t.multi!==!0)throw new Z("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof t.allowSelfLoops=="boolean"&&t.allowSelfLoops!==this.allowSelfLoops&&t.allowSelfLoops!==!0)throw new Z("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const n=this.emptyCopy(t),r=this._edges.values();let i,o;for(;i=r.next(),i.done!==!0;)o=i.value,xs(n,"copy",!1,o.undirected,o.key,o.source.key,o.target.key,he({},o.attributes));return n}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const t={};this._nodes.forEach((o,s)=>{t[s]=o.attributes});const n={},r={};this._edges.forEach((o,s)=>{const a=o.undirected?"--":"->";let u="",c=o.source.key,l=o.target.key,d;o.undirected&&c>l&&(d=c,c=l,l=d);const f=`(${c})${a}(${l})`;s.startsWith("geid_")?this.multi&&(typeof r[f]>"u"?r[f]=0:r[f]++,u+=`${r[f]}. `):u+=`[${s}]: `,u+=f,n[u]=o.attributes});const i={};for(const o in this)this.hasOwnProperty(o)&&!Yi.has(o)&&typeof this[o]!="function"&&typeof o!="symbol"&&(i[o]=this[o]);return i.attributes=this._attributes,i.nodes=t,i.edges=n,ke(i,"constructor",this.constructor),i}};typeof Symbol<"u"&&(ue.prototype[Symbol.for("nodejs.util.inspect.custom")]=ue.prototype.inspect);Md.forEach(e=>{["add","merge","update"].forEach(t=>{const n=e.name(t),r=t==="add"?xs:Id;e.generateKey?ue.prototype[n]=function(i,o,s){return r(this,n,!0,(e.type||this.type)==="undirected",null,i,o,s,t==="update")}:ue.prototype[n]=function(i,o,s,a){return r(this,n,!1,(e.type||this.type)==="undirected",i,o,s,a,t==="update")}})});Fl(ue);ed(ue);yd(ue);Ed(ue);class yi extends ue{constructor(t){const n=he({type:"directed"},t);if("multi"in n&&n.multi!==!1)throw new F("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="directed")throw new F('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class _s extends ue{constructor(t){const n=he({type:"undirected"},t);if("multi"in n&&n.multi!==!1)throw new F("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="undirected")throw new F('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class Ns extends ue{constructor(t){const n=he({multi:!0},t);if("multi"in n&&n.multi!==!0)throw new F("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(n)}}class Es extends ue{constructor(t){const n=he({type:"directed",multi:!0},t);if("multi"in n&&n.multi!==!0)throw new F("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="directed")throw new F('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class Ss extends ue{constructor(t){const n=he({type:"undirected",multi:!0},t);if("multi"in n&&n.multi!==!0)throw new F("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="undirected")throw new F('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}function Wt(e){e.from=function(t,n){const r=he({},t.options,n),i=new e(r);return i.import(t),i}}Wt(ue);Wt(yi);Wt(_s);Wt(Ns);Wt(Es);Wt(Ss);ue.Graph=ue;ue.DirectedGraph=yi;ue.UndirectedGraph=_s;ue.MultiGraph=Ns;ue.MultiDirectedGraph=Es;ue.MultiUndirectedGraph=Ss;ue.InvalidArgumentsGraphError=F;ue.NotFoundGraphError=V;ue.UsageGraphError=Z;var zd=function(t){return t!==null&&typeof t=="object"&&typeof t.addUndirectedEdgeWithKey=="function"&&typeof t.dropNode=="function"&&typeof t.multi=="boolean"};const Rd=zd,Od=void 0,En=0,Xi=1;var Gd=function(t){if(!Rd(t))throw new Error("graphology-dag/has-cycle: the given graph is not a valid graphology instance.");if(t.size===0)return!1;if(t.selfLoopCount!==0)return!0;const n={},r=[];function i(o){const s=n[o];if(s===Od)r.push(o);else if(s===En)return!0;return!1}return t.someNode(o=>{if(n[o]===Xi)return!1;for(r.push(o);r.length!==0;){const s=r[r.length-1],a=n[s];if(a!==En){if(n[s]=En,t.someOutboundNeighbor(s,i))return!0}else a===En&&(r.pop(),n[s]=Xi)}return!1})},mn={},Cs=rr,Ld=Cs.ARRAY_BUFFER_SUPPORT,Vd=Cs.SYMBOL_SUPPORT,Hd=function(t,n){var r,i,o,s,a;if(!t)throw new Error("obliterator/forEach: invalid iterable.");if(typeof n!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(t)||Ld&&ArrayBuffer.isView(t)||typeof t=="string"||t.toString()==="[object Arguments]"){for(o=0,s=t.length;o<s;o++)n(t[o],o);return}if(typeof t.forEach=="function"){t.forEach(n);return}if(Vd&&Symbol.iterator in t&&typeof t.next!="function"&&(t=t[Symbol.iterator]()),typeof t.next=="function"){for(r=t,o=0;a=r.next(),a.done!==!0;)n(a.value,o),o++;return}for(i in t)t.hasOwnProperty(i)&&n(t[i],i)},$s={};(function(e){var t=Math.pow(2,8)-1,n=Math.pow(2,16)-1,r=Math.pow(2,32)-1,i=Math.pow(2,7)-1,o=Math.pow(2,15)-1,s=Math.pow(2,31)-1;e.getPointerArray=function(u){var c=u-1;if(c<=t)return Uint8Array;if(c<=n)return Uint16Array;if(c<=r)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")},e.getSignedPointerArray=function(u){var c=u-1;return c<=i?Int8Array:c<=o?Int16Array:c<=s?Int32Array:Float64Array},e.getNumberType=function(u){return u===(u|0)?Math.sign(u)===-1?u<=127&&u>=-128?Int8Array:u<=32767&&u>=-32768?Int16Array:Int32Array:u<=255?Uint8Array:u<=65535?Uint16Array:Uint32Array:Float64Array};var a={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};e.getMinimalRepresentation=function(u,c){var l=null,d=0,f,h,p,g,b;for(g=0,b=u.length;g<b;g++)p=c?c(u[g]):u[g],h=e.getNumberType(p),f=a[h.name],f>d&&(d=f,l=h);return l},e.isTypedArray=function(u){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(u)},e.concat=function(){var u=0,c,l,d;for(c=0,d=arguments.length;c<d;c++)u+=arguments[c].length;var f=new arguments[0].constructor(u);for(c=0,l=0;c<d;c++)f.set(arguments[c],l),l+=arguments[c].length;return f},e.indices=function(u){for(var c=e.getPointerArray(u),l=new c(u),d=0;d<u;d++)l[d]=d;return l}})($s);var As=Hd,ks=$s;function Bd(e){return Array.isArray(e)||ks.isTypedArray(e)}function mi(e){if(typeof e.length=="number")return e.length;if(typeof e.size=="number")return e.size}function Fd(e){var t=mi(e),n=typeof t=="number"?new Array(t):[],r=0;return As(e,function(i){n[r++]=i}),n}function Ud(e){var t=mi(e),n=typeof t=="number"?ks.getPointerArray(t):Array,r=typeof t=="number"?new Array(t):[],i=typeof t=="number"?new n(t):[],o=0;return As(e,function(s){r[o]=s,i[o]=o++}),[r,i]}mn.isArrayLike=Bd;mn.guessLength=mi;mn.toArray=Fd;mn.toArrayWithIndices=Ud;var wr=mn,Ds=nr;function fe(e,t){if(arguments.length<2)throw new Error("mnemonist/fixed-deque: expecting an Array class and a capacity.");if(typeof t!="number"||t<=0)throw new Error("mnemonist/fixed-deque: `capacity` should be a positive number.");this.ArrayClass=e,this.capacity=t,this.items=new e(this.capacity),this.clear()}fe.prototype.clear=function(){this.start=0,this.size=0};fe.prototype.push=function(e){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.push: deque capacity ("+this.capacity+") exceeded!");var t=(this.start+this.size)%this.capacity;return this.items[t]=e,++this.size};fe.prototype.unshift=function(e){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.unshift: deque capacity ("+this.capacity+") exceeded!");var t=this.start-1;return this.start===0&&(t=this.capacity-1),this.items[t]=e,this.start=t,++this.size};fe.prototype.pop=function(){if(this.size===0)return;const e=(this.start+this.size-1)%this.capacity;return this.size--,this.items[e]};fe.prototype.shift=function(){if(this.size!==0){var e=this.start;return this.size--,this.start++,this.start===this.capacity&&(this.start=0),this.items[e]}};fe.prototype.peekFirst=function(){if(this.size!==0)return this.items[this.start]};fe.prototype.peekLast=function(){if(this.size!==0){var e=this.start+this.size-1;return e>this.capacity&&(e-=this.capacity),this.items[e]}};fe.prototype.get=function(e){if(this.size!==0)return e=this.start+e,e>this.capacity&&(e-=this.capacity),this.items[e]};fe.prototype.forEach=function(e,t){t=arguments.length>1?t:this;for(var n=this.capacity,r=this.size,i=this.start,o=0;o<r;)e.call(t,this.items[i],o,this),i++,o++,i===n&&(i=0)};fe.prototype.toArray=function(){var e=this.start+this.size;if(e<this.capacity)return this.items.slice(this.start,e);for(var t=new this.ArrayClass(this.size),n=this.capacity,r=this.size,i=this.start,o=0;o<r;)t[o]=this.items[i],i++,o++,i===n&&(i=0);return t};fe.prototype.values=function(){var e=this.items,t=this.capacity,n=this.size,r=this.start,i=0;return new Ds(function(){if(i>=n)return{done:!0};var o=e[r];return r++,i++,r===t&&(r=0),{value:o,done:!1}})};fe.prototype.entries=function(){var e=this.items,t=this.capacity,n=this.size,r=this.start,i=0;return new Ds(function(){if(i>=n)return{done:!0};var o=e[r];return r++,r===t&&(r=0),{value:[i++,o],done:!1}})};typeof Symbol<"u"&&(fe.prototype[Symbol.iterator]=fe.prototype.values);fe.prototype.inspect=function(){var e=this.toArray();return e.type=this.ArrayClass.name,e.capacity=this.capacity,Object.defineProperty(e,"constructor",{value:fe,enumerable:!1}),e};typeof Symbol<"u"&&(fe.prototype[Symbol.for("nodejs.util.inspect.custom")]=fe.prototype.inspect);fe.from=function(e,t,n){if(arguments.length<3&&(n=wr.guessLength(e),typeof n!="number"))throw new Error("mnemonist/fixed-deque.from: could not guess iterable length. Please provide desired capacity as last argument.");var r=new fe(t,n);if(wr.isArrayLike(e)){var i,o;for(i=0,o=e.length;i<o;i++)r.items[i]=e[i];return r.size=o,r}return wr.forEach(e,function(s){r.push(s)}),r};var qd=Gd;function _e(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=_e(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}const{useSyncExternalStoreWithSelector:Wd}=Xc;function Ms(e,t=e.getState,n){const r=Wd(e.subscribe,e.getState,e.getServerState||e.getState,t,n);return w.useDebugValue(r),r}const ji=(e,t)=>{const n=jc(e),r=(i,o=t)=>Ms(n,i,o);return Object.assign(r,n),r},Yd=(e,t)=>e?ji(e,t):ji;var Kd={value:()=>{}};function or(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Rn(n)}function Rn(e){this._=e}function Xd(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Rn.prototype=or.prototype={constructor:Rn,on:function(e,t){var n=this._,r=Xd(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=jd(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=Zi(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Zi(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Rn(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function jd(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Zi(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Kd,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Ir="http://www.w3.org/1999/xhtml";const Ji={svg:"http://www.w3.org/2000/svg",xhtml:Ir,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function sr(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Ji.hasOwnProperty(t)?{space:Ji[t],local:e}:e}function Zd(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ir&&t.documentElement.namespaceURI===Ir?t.createElement(e):t.createElementNS(n,e)}}function Jd(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ts(e){var t=sr(e);return(t.local?Jd:Zd)(t)}function Qd(){}function wi(e){return e==null?Qd:function(){return this.querySelector(e)}}function ef(e){typeof e!="function"&&(e=wi(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=new Array(s),u,c,l=0;l<s;++l)(u=o[l])&&(c=e.call(u,u.__data__,l,o))&&("__data__"in u&&(c.__data__=u.__data__),a[l]=c);return new Ae(r,this._parents)}function tf(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function nf(){return[]}function Ps(e){return e==null?nf:function(){return this.querySelectorAll(e)}}function rf(e){return function(){return tf(e.apply(this,arguments))}}function of(e){typeof e=="function"?e=rf(e):e=Ps(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var s=t[o],a=s.length,u,c=0;c<a;++c)(u=s[c])&&(r.push(e.call(u,u.__data__,c,s)),i.push(u));return new Ae(r,i)}function Is(e){return function(){return this.matches(e)}}function zs(e){return function(t){return t.matches(e)}}var sf=Array.prototype.find;function af(e){return function(){return sf.call(this.children,e)}}function cf(){return this.firstElementChild}function uf(e){return this.select(e==null?cf:af(typeof e=="function"?e:zs(e)))}var lf=Array.prototype.filter;function df(){return Array.from(this.children)}function ff(e){return function(){return lf.call(this.children,e)}}function hf(e){return this.selectAll(e==null?df:ff(typeof e=="function"?e:zs(e)))}function pf(e){typeof e!="function"&&(e=Is(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],u,c=0;c<s;++c)(u=o[c])&&e.call(u,u.__data__,c,o)&&a.push(u);return new Ae(r,this._parents)}function Rs(e){return new Array(e.length)}function gf(){return new Ae(this._enter||this._groups.map(Rs),this._parents)}function Fn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Fn.prototype={constructor:Fn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function yf(e){return function(){return e}}function mf(e,t,n,r,i,o){for(var s=0,a,u=t.length,c=o.length;s<c;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new Fn(e,o[s]);for(;s<u;++s)(a=t[s])&&(i[s]=a)}function wf(e,t,n,r,i,o,s){var a,u,c=new Map,l=t.length,d=o.length,f=new Array(l),h;for(a=0;a<l;++a)(u=t[a])&&(f[a]=h=s.call(u,u.__data__,a,t)+"",c.has(h)?i[a]=u:c.set(h,u));for(a=0;a<d;++a)h=s.call(e,o[a],a,o)+"",(u=c.get(h))?(r[a]=u,u.__data__=o[a],c.delete(h)):n[a]=new Fn(e,o[a]);for(a=0;a<l;++a)(u=t[a])&&c.get(f[a])===u&&(i[a]=u)}function bf(e){return e.__data__}function vf(e,t){if(!arguments.length)return Array.from(this,bf);var n=t?wf:mf,r=this._parents,i=this._groups;typeof e!="function"&&(e=yf(e));for(var o=i.length,s=new Array(o),a=new Array(o),u=new Array(o),c=0;c<o;++c){var l=r[c],d=i[c],f=d.length,h=xf(e.call(l,l&&l.__data__,c,r)),p=h.length,g=a[c]=new Array(p),b=s[c]=new Array(p),m=u[c]=new Array(f);n(l,d,g,b,m,h,t);for(var x=0,C=0,_,k;x<p;++x)if(_=g[x]){for(x>=C&&(C=x+1);!(k=b[C])&&++C<p;);_._next=k||null}}return s=new Ae(s,r),s._enter=a,s._exit=u,s}function xf(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function _f(){return new Ae(this._exit||this._groups.map(Rs),this._parents)}function Nf(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Ef(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),u=0;u<s;++u)for(var c=n[u],l=r[u],d=c.length,f=a[u]=new Array(d),h,p=0;p<d;++p)(h=c[p]||l[p])&&(f[p]=h);for(;u<i;++u)a[u]=n[u];return new Ae(a,this._parents)}function Sf(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function Cf(e){e||(e=$f);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,u=i[o]=new Array(a),c,l=0;l<a;++l)(c=s[l])&&(u[l]=c);u.sort(t)}return new Ae(i,this._parents).order()}function $f(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Af(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function kf(){return Array.from(this)}function Df(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function Mf(){let e=0;for(const t of this)++e;return e}function Tf(){return!this.node()}function Pf(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this}function If(e){return function(){this.removeAttribute(e)}}function zf(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Rf(e,t){return function(){this.setAttribute(e,t)}}function Of(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Gf(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Lf(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Vf(e,t){var n=sr(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?zf:If:typeof t=="function"?n.local?Lf:Gf:n.local?Of:Rf)(n,t))}function Os(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Hf(e){return function(){this.style.removeProperty(e)}}function Bf(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Ff(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Uf(e,t,n){return arguments.length>1?this.each((t==null?Hf:typeof t=="function"?Ff:Bf)(e,t,n??"")):Bt(this.node(),e)}function Bt(e,t){return e.style.getPropertyValue(t)||Os(e).getComputedStyle(e,null).getPropertyValue(t)}function qf(e){return function(){delete this[e]}}function Wf(e,t){return function(){this[e]=t}}function Yf(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Kf(e,t){return arguments.length>1?this.each((t==null?qf:typeof t=="function"?Yf:Wf)(e,t)):this.node()[e]}function Gs(e){return e.trim().split(/^|\s+/)}function bi(e){return e.classList||new Ls(e)}function Ls(e){this._node=e,this._names=Gs(e.getAttribute("class")||"")}Ls.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Vs(e,t){for(var n=bi(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Hs(e,t){for(var n=bi(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Xf(e){return function(){Vs(this,e)}}function jf(e){return function(){Hs(this,e)}}function Zf(e,t){return function(){(t.apply(this,arguments)?Vs:Hs)(this,e)}}function Jf(e,t){var n=Gs(e+"");if(arguments.length<2){for(var r=bi(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Zf:t?Xf:jf)(n,t))}function Qf(){this.textContent=""}function eh(e){return function(){this.textContent=e}}function th(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function nh(e){return arguments.length?this.each(e==null?Qf:(typeof e=="function"?th:eh)(e)):this.node().textContent}function rh(){this.innerHTML=""}function ih(e){return function(){this.innerHTML=e}}function oh(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function sh(e){return arguments.length?this.each(e==null?rh:(typeof e=="function"?oh:ih)(e)):this.node().innerHTML}function ah(){this.nextSibling&&this.parentNode.appendChild(this)}function ch(){return this.each(ah)}function uh(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function lh(){return this.each(uh)}function dh(e){var t=typeof e=="function"?e:Ts(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function fh(){return null}function hh(e,t){var n=typeof e=="function"?e:Ts(e),r=t==null?fh:typeof t=="function"?t:wi(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function ph(){var e=this.parentNode;e&&e.removeChild(this)}function gh(){return this.each(ph)}function yh(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function mh(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function wh(e){return this.select(e?mh:yh)}function bh(e){return arguments.length?this.property("__data__",e):this.node().__data__}function vh(e){return function(t){e.call(this,t,this.__data__)}}function xh(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function _h(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function Nh(e,t,n){return function(){var r=this.__on,i,o=vh(t);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Eh(e,t,n){var r=xh(e+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,c=a.length,l;u<c;++u)for(i=0,l=a[u];i<o;++i)if((s=r[i]).type===l.type&&s.name===l.name)return l.value}return}for(a=t?Nh:_h,i=0;i<o;++i)this.each(a(r[i],t,n));return this}function Bs(e,t,n){var r=Os(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Sh(e,t){return function(){return Bs(this,e,t)}}function Ch(e,t){return function(){return Bs(this,e,t.apply(this,arguments))}}function $h(e,t){return this.each((typeof t=="function"?Ch:Sh)(e,t))}function*Ah(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var Fs=[null];function Ae(e,t){this._groups=e,this._parents=t}function wn(){return new Ae([[document.documentElement]],Fs)}function kh(){return this}Ae.prototype=wn.prototype={constructor:Ae,select:ef,selectAll:of,selectChild:uf,selectChildren:hf,filter:pf,data:vf,enter:gf,exit:_f,join:Nf,merge:Ef,selection:kh,order:Sf,sort:Cf,call:Af,nodes:kf,node:Df,size:Mf,empty:Tf,each:Pf,attr:Vf,style:Uf,property:Kf,classed:Jf,text:nh,html:sh,raise:ch,lower:lh,append:dh,insert:hh,remove:gh,clone:wh,datum:bh,on:Eh,dispatch:$h,[Symbol.iterator]:Ah};function Ge(e){return typeof e=="string"?new Ae([[document.querySelector(e)]],[document.documentElement]):new Ae([[e]],Fs)}function Dh(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Fe(e,t){if(e=Dh(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Mh={passive:!1},ln={capture:!0,passive:!1};function br(e){e.stopImmediatePropagation()}function Gt(e){e.preventDefault(),e.stopImmediatePropagation()}function Us(e){var t=e.document.documentElement,n=Ge(e).on("dragstart.drag",Gt,ln);"onselectstart"in t?n.on("selectstart.drag",Gt,ln):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function qs(e,t){var n=e.document.documentElement,r=Ge(e).on("dragstart.drag",null);t&&(r.on("click.drag",Gt,ln),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Sn=e=>()=>e;function zr(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:o,x:s,y:a,dx:u,dy:c,dispatch:l}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:l}})}zr.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Th(e){return!e.ctrlKey&&!e.button}function Ph(){return this.parentNode}function Ih(e,t){return t??{x:e.x,y:e.y}}function zh(){return navigator.maxTouchPoints||"ontouchstart"in this}function Rh(){var e=Th,t=Ph,n=Ih,r=zh,i={},o=or("start","drag","end"),s=0,a,u,c,l,d=0;function f(_){_.on("mousedown.drag",h).filter(r).on("touchstart.drag",b).on("touchmove.drag",m,Mh).on("touchend.drag touchcancel.drag",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(_,k){if(!(l||!e.call(this,_,k))){var E=C(this,t.call(this,_,k),_,k,"mouse");E&&(Ge(_.view).on("mousemove.drag",p,ln).on("mouseup.drag",g,ln),Us(_.view),br(_),c=!1,a=_.clientX,u=_.clientY,E("start",_))}}function p(_){if(Gt(_),!c){var k=_.clientX-a,E=_.clientY-u;c=k*k+E*E>d}i.mouse("drag",_)}function g(_){Ge(_.view).on("mousemove.drag mouseup.drag",null),qs(_.view,c),Gt(_),i.mouse("end",_)}function b(_,k){if(e.call(this,_,k)){var E=_.changedTouches,$=t.call(this,_,k),P=E.length,z,H;for(z=0;z<P;++z)(H=C(this,$,_,k,E[z].identifier,E[z]))&&(br(_),H("start",_,E[z]))}}function m(_){var k=_.changedTouches,E=k.length,$,P;for($=0;$<E;++$)(P=i[k[$].identifier])&&(Gt(_),P("drag",_,k[$]))}function x(_){var k=_.changedTouches,E=k.length,$,P;for(l&&clearTimeout(l),l=setTimeout(function(){l=null},500),$=0;$<E;++$)(P=i[k[$].identifier])&&(br(_),P("end",_,k[$]))}function C(_,k,E,$,P,z){var H=o.copy(),R=Fe(z||E,k),L,M,v;if((v=n.call(_,new zr("beforestart",{sourceEvent:E,target:f,identifier:P,active:s,x:R[0],y:R[1],dx:0,dy:0,dispatch:H}),$))!=null)return L=v.x-R[0]||0,M=v.y-R[1]||0,function D(S,I,O){var N=R,T;switch(S){case"start":i[P]=D,T=s++;break;case"end":delete i[P],--s;case"drag":R=Fe(O||I,k),T=s;break}H.call(S,_,new zr(S,{sourceEvent:I,subject:v,target:f,identifier:P,active:T,x:R[0]+L,y:R[1]+M,dx:R[0]-N[0],dy:R[1]-N[1],dispatch:H}),$)}}return f.filter=function(_){return arguments.length?(e=typeof _=="function"?_:Sn(!!_),f):e},f.container=function(_){return arguments.length?(t=typeof _=="function"?_:Sn(_),f):t},f.subject=function(_){return arguments.length?(n=typeof _=="function"?_:Sn(_),f):n},f.touchable=function(_){return arguments.length?(r=typeof _=="function"?_:Sn(!!_),f):r},f.on=function(){var _=o.on.apply(o,arguments);return _===o?f:_},f.clickDistance=function(_){return arguments.length?(d=(_=+_)*_,f):Math.sqrt(d)},f}function vi(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ws(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function bn(){}var dn=.7,Un=1/dn,Lt="\\s*([+-]?\\d+)\\s*",fn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ue="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Oh=/^#([0-9a-f]{3,8})$/,Gh=new RegExp(`^rgb\\(${Lt},${Lt},${Lt}\\)$`),Lh=new RegExp(`^rgb\\(${Ue},${Ue},${Ue}\\)$`),Vh=new RegExp(`^rgba\\(${Lt},${Lt},${Lt},${fn}\\)$`),Hh=new RegExp(`^rgba\\(${Ue},${Ue},${Ue},${fn}\\)$`),Bh=new RegExp(`^hsl\\(${fn},${Ue},${Ue}\\)$`),Fh=new RegExp(`^hsla\\(${fn},${Ue},${Ue},${fn}\\)$`),Qi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};vi(bn,hn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:eo,formatHex:eo,formatHex8:Uh,formatHsl:qh,formatRgb:to,toString:to});function eo(){return this.rgb().formatHex()}function Uh(){return this.rgb().formatHex8()}function qh(){return Ys(this).formatHsl()}function to(){return this.rgb().formatRgb()}function hn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Oh.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?no(t):n===3?new Ee(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Cn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Cn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Gh.exec(e))?new Ee(t[1],t[2],t[3],1):(t=Lh.exec(e))?new Ee(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Vh.exec(e))?Cn(t[1],t[2],t[3],t[4]):(t=Hh.exec(e))?Cn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Bh.exec(e))?oo(t[1],t[2]/100,t[3]/100,1):(t=Fh.exec(e))?oo(t[1],t[2]/100,t[3]/100,t[4]):Qi.hasOwnProperty(e)?no(Qi[e]):e==="transparent"?new Ee(NaN,NaN,NaN,0):null}function no(e){return new Ee(e>>16&255,e>>8&255,e&255,1)}function Cn(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ee(e,t,n,r)}function Wh(e){return e instanceof bn||(e=hn(e)),e?(e=e.rgb(),new Ee(e.r,e.g,e.b,e.opacity)):new Ee}function Rr(e,t,n,r){return arguments.length===1?Wh(e):new Ee(e,t,n,r??1)}function Ee(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}vi(Ee,Rr,Ws(bn,{brighter(e){return e=e==null?Un:Math.pow(Un,e),new Ee(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?dn:Math.pow(dn,e),new Ee(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ee(Nt(this.r),Nt(this.g),Nt(this.b),qn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ro,formatHex:ro,formatHex8:Yh,formatRgb:io,toString:io}));function ro(){return`#${xt(this.r)}${xt(this.g)}${xt(this.b)}`}function Yh(){return`#${xt(this.r)}${xt(this.g)}${xt(this.b)}${xt((isNaN(this.opacity)?1:this.opacity)*255)}`}function io(){const e=qn(this.opacity);return`${e===1?"rgb(":"rgba("}${Nt(this.r)}, ${Nt(this.g)}, ${Nt(this.b)}${e===1?")":`, ${e})`}`}function qn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Nt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function xt(e){return e=Nt(e),(e<16?"0":"")+e.toString(16)}function oo(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Le(e,t,n,r)}function Ys(e){if(e instanceof Le)return new Le(e.h,e.s,e.l,e.opacity);if(e instanceof bn||(e=hn(e)),!e)return new Le;if(e instanceof Le)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,u=(o+i)/2;return a?(t===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-t)/a+2:s=(t-n)/a+4,a/=u<.5?o+i:2-o-i,s*=60):a=u>0&&u<1?0:s,new Le(s,a,u,e.opacity)}function Kh(e,t,n,r){return arguments.length===1?Ys(e):new Le(e,t,n,r??1)}function Le(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}vi(Le,Kh,Ws(bn,{brighter(e){return e=e==null?Un:Math.pow(Un,e),new Le(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?dn:Math.pow(dn,e),new Le(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Ee(vr(e>=240?e-240:e+120,i,r),vr(e,i,r),vr(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Le(so(this.h),$n(this.s),$n(this.l),qn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=qn(this.opacity);return`${e===1?"hsl(":"hsla("}${so(this.h)}, ${$n(this.s)*100}%, ${$n(this.l)*100}%${e===1?")":`, ${e})`}`}}));function so(e){return e=(e||0)%360,e<0?e+360:e}function $n(e){return Math.max(0,Math.min(1,e||0))}function vr(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Ks=e=>()=>e;function Xh(e,t){return function(n){return e+n*t}}function jh(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Zh(e){return(e=+e)==1?Xs:function(t,n){return n-t?jh(t,n,e):Ks(isNaN(t)?n:t)}}function Xs(e,t){var n=t-e;return n?Xh(e,n):Ks(isNaN(e)?t:e)}const ao=function e(t){var n=Zh(t);function r(i,o){var s=n((i=Rr(i)).r,(o=Rr(o)).r),a=n(i.g,o.g),u=n(i.b,o.b),c=Xs(i.opacity,o.opacity);return function(l){return i.r=s(l),i.g=a(l),i.b=u(l),i.opacity=c(l),i+""}}return r.gamma=e,r}(1);function it(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Or=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xr=new RegExp(Or.source,"g");function Jh(e){return function(){return e}}function Qh(e){return function(t){return e(t)+""}}function ep(e,t){var n=Or.lastIndex=xr.lastIndex=0,r,i,o,s=-1,a=[],u=[];for(e=e+"",t=t+"";(r=Or.exec(e))&&(i=xr.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,u.push({i:s,x:it(r,i)})),n=xr.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?u[0]?Qh(u[0].x):Jh(t):(t=u.length,function(c){for(var l=0,d;l<t;++l)a[(d=u[l]).i]=d.x(c);return a.join("")})}var co=180/Math.PI,Gr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function js(e,t,n,r,i,o){var s,a,u;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*co,skewX:Math.atan(u)*co,scaleX:s,scaleY:a}}var An;function tp(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Gr:js(t.a,t.b,t.c,t.d,t.e,t.f)}function np(e){return e==null||(An||(An=document.createElementNS("http://www.w3.org/2000/svg","g")),An.setAttribute("transform",e),!(e=An.transform.baseVal.consolidate()))?Gr:(e=e.matrix,js(e.a,e.b,e.c,e.d,e.e,e.f))}function Zs(e,t,n,r){function i(c){return c.length?c.pop()+" ":""}function o(c,l,d,f,h,p){if(c!==d||l!==f){var g=h.push("translate(",null,t,null,n);p.push({i:g-4,x:it(c,d)},{i:g-2,x:it(l,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function s(c,l,d,f){c!==l?(c-l>180?l+=360:l-c>180&&(c+=360),f.push({i:d.push(i(d)+"rotate(",null,r)-2,x:it(c,l)})):l&&d.push(i(d)+"rotate("+l+r)}function a(c,l,d,f){c!==l?f.push({i:d.push(i(d)+"skewX(",null,r)-2,x:it(c,l)}):l&&d.push(i(d)+"skewX("+l+r)}function u(c,l,d,f,h,p){if(c!==d||l!==f){var g=h.push(i(h)+"scale(",null,",",null,")");p.push({i:g-4,x:it(c,d)},{i:g-2,x:it(l,f)})}else(d!==1||f!==1)&&h.push(i(h)+"scale("+d+","+f+")")}return function(c,l){var d=[],f=[];return c=e(c),l=e(l),o(c.translateX,c.translateY,l.translateX,l.translateY,d,f),s(c.rotate,l.rotate,d,f),a(c.skewX,l.skewX,d,f),u(c.scaleX,c.scaleY,l.scaleX,l.scaleY,d,f),c=l=null,function(h){for(var p=-1,g=f.length,b;++p<g;)d[(b=f[p]).i]=b.x(h);return d.join("")}}}var rp=Zs(tp,"px, ","px)","deg)"),ip=Zs(np,", ",")",")"),op=1e-12;function uo(e){return((e=Math.exp(e))+1/e)/2}function sp(e){return((e=Math.exp(e))-1/e)/2}function ap(e){return((e=Math.exp(2*e))-1)/(e+1)}const cp=function e(t,n,r){function i(o,s){var a=o[0],u=o[1],c=o[2],l=s[0],d=s[1],f=s[2],h=l-a,p=d-u,g=h*h+p*p,b,m;if(g<op)m=Math.log(f/c)/t,b=function($){return[a+$*h,u+$*p,c*Math.exp(t*$*m)]};else{var x=Math.sqrt(g),C=(f*f-c*c+r*g)/(2*c*n*x),_=(f*f-c*c-r*g)/(2*f*n*x),k=Math.log(Math.sqrt(C*C+1)-C),E=Math.log(Math.sqrt(_*_+1)-_);m=(E-k)/t,b=function($){var P=$*m,z=uo(k),H=c/(n*x)*(z*ap(t*P+k)-sp(k));return[a+H*h,u+H*p,c*z/uo(t*P+k)]}}return b.duration=m*1e3*t/Math.SQRT2,b}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,u=a*a;return e(s,a,u)},i}(Math.SQRT2,2,4);var Ft=0,on=0,Qt=0,Js=1e3,Wn,sn,Yn=0,St=0,ar=0,pn=typeof performance=="object"&&performance.now?performance:Date,Qs=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function xi(){return St||(Qs(up),St=pn.now()+ar)}function up(){St=0}function Kn(){this._call=this._time=this._next=null}Kn.prototype=ea.prototype={constructor:Kn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?xi():+n)+(t==null?0:+t),!this._next&&sn!==this&&(sn?sn._next=this:Wn=this,sn=this),this._call=e,this._time=n,Lr()},stop:function(){this._call&&(this._call=null,this._time=1/0,Lr())}};function ea(e,t,n){var r=new Kn;return r.restart(e,t,n),r}function lp(){xi(),++Ft;for(var e=Wn,t;e;)(t=St-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ft}function lo(){St=(Yn=pn.now())+ar,Ft=on=0;try{lp()}finally{Ft=0,fp(),St=0}}function dp(){var e=pn.now(),t=e-Yn;t>Js&&(ar-=t,Yn=e)}function fp(){for(var e,t=Wn,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Wn=n);sn=e,Lr(r)}function Lr(e){if(!Ft){on&&(on=clearTimeout(on));var t=e-St;t>24?(e<1/0&&(on=setTimeout(lo,e-pn.now()-ar)),Qt&&(Qt=clearInterval(Qt))):(Qt||(Yn=pn.now(),Qt=setInterval(dp,Js)),Ft=1,Qs(lo))}}function fo(e,t,n){var r=new Kn;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var hp=or("start","end","cancel","interrupt"),pp=[],ta=0,ho=1,Vr=2,On=3,po=4,Hr=5,Gn=6;function cr(e,t,n,r,i,o){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;gp(e,n,{name:t,index:r,group:i,on:hp,tween:pp,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:ta})}function _i(e,t){var n=Be(e,t);if(n.state>ta)throw new Error("too late; already scheduled");return n}function We(e,t){var n=Be(e,t);if(n.state>On)throw new Error("too late; already running");return n}function Be(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function gp(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=ea(o,0,n.time);function o(c){n.state=ho,n.timer.restart(s,n.delay,n.time),n.delay<=c&&s(c-n.delay)}function s(c){var l,d,f,h;if(n.state!==ho)return u();for(l in r)if(h=r[l],h.name===n.name){if(h.state===On)return fo(s);h.state===po?(h.state=Gn,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[l]):+l<t&&(h.state=Gn,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[l])}if(fo(function(){n.state===On&&(n.state=po,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=Vr,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Vr){for(n.state=On,i=new Array(f=n.tween.length),l=0,d=-1;l<f;++l)(h=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=h);i.length=d+1}}function a(c){for(var l=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(u),n.state=Hr,1),d=-1,f=i.length;++d<f;)i[d].call(e,l);n.state===Hr&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=Gn,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function Ln(e,t){var n=e.__transition,r,i,o=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){o=!1;continue}i=r.state>Vr&&r.state<Hr,r.state=Gn,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}o&&delete e.__transition}}function yp(e){return this.each(function(){Ln(this,e)})}function mp(e,t){var n,r;return function(){var i=We(this,e),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function wp(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=We(this,e),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:t,value:n},u=0,c=i.length;u<c;++u)if(i[u].name===t){i[u]=a;break}u===c&&i.push(a)}o.tween=i}}function bp(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Be(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===e)return s.value;return null}return this.each((t==null?mp:wp)(n,e,t))}function Ni(e,t,n){var r=e._id;return e.each(function(){var i=We(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Be(i,r).value[t]}}function na(e,t){var n;return(typeof t=="number"?it:t instanceof hn?ao:(n=hn(t))?(t=n,ao):ep)(e,t)}function vp(e){return function(){this.removeAttribute(e)}}function xp(e){return function(){this.removeAttributeNS(e.space,e.local)}}function _p(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttribute(e);return s===i?null:s===r?o:o=t(r=s,n)}}function Np(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===r?o:o=t(r=s,n)}}function Ep(e,t,n){var r,i,o;return function(){var s,a=n(this),u;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),u=a+"",s===u?null:s===r&&u===i?o:(i=u,o=t(r=s,a)))}}function Sp(e,t,n){var r,i,o;return function(){var s,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),u=a+"",s===u?null:s===r&&u===i?o:(i=u,o=t(r=s,a)))}}function Cp(e,t){var n=sr(e),r=n==="transform"?ip:na;return this.attrTween(e,typeof t=="function"?(n.local?Sp:Ep)(n,r,Ni(this,"attr."+e,t)):t==null?(n.local?xp:vp)(n):(n.local?Np:_p)(n,r,t))}function $p(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Ap(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function kp(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&Ap(e,o)),n}return i._value=t,i}function Dp(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&$p(e,o)),n}return i._value=t,i}function Mp(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=sr(e);return this.tween(n,(r.local?kp:Dp)(r,t))}function Tp(e,t){return function(){_i(this,e).delay=+t.apply(this,arguments)}}function Pp(e,t){return t=+t,function(){_i(this,e).delay=t}}function Ip(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Tp:Pp)(t,e)):Be(this.node(),t).delay}function zp(e,t){return function(){We(this,e).duration=+t.apply(this,arguments)}}function Rp(e,t){return t=+t,function(){We(this,e).duration=t}}function Op(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?zp:Rp)(t,e)):Be(this.node(),t).duration}function Gp(e,t){if(typeof t!="function")throw new Error;return function(){We(this,e).ease=t}}function Lp(e){var t=this._id;return arguments.length?this.each(Gp(t,e)):Be(this.node(),t).ease}function Vp(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;We(this,e).ease=n}}function Hp(e){if(typeof e!="function")throw new Error;return this.each(Vp(this._id,e))}function Bp(e){typeof e!="function"&&(e=Is(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],u,c=0;c<s;++c)(u=o[c])&&e.call(u,u.__data__,c,o)&&a.push(u);return new je(r,this._parents,this._name,this._id)}function Fp(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var u=t[a],c=n[a],l=u.length,d=s[a]=new Array(l),f,h=0;h<l;++h)(f=u[h]||c[h])&&(d[h]=f);for(;a<r;++a)s[a]=t[a];return new je(s,this._parents,this._name,this._id)}function Up(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function qp(e,t,n){var r,i,o=Up(t)?_i:We;return function(){var s=o(this,e),a=s.on;a!==r&&(i=(r=a).copy()).on(t,n),s.on=i}}function Wp(e,t){var n=this._id;return arguments.length<2?Be(this.node(),n).on.on(e):this.each(qp(n,e,t))}function Yp(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Kp(){return this.on("end.remove",Yp(this._id))}function Xp(e){var t=this._name,n=this._id;typeof e!="function"&&(e=wi(e));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],u=a.length,c=o[s]=new Array(u),l,d,f=0;f<u;++f)(l=a[f])&&(d=e.call(l,l.__data__,f,a))&&("__data__"in l&&(d.__data__=l.__data__),c[f]=d,cr(c[f],t,n,f,c,Be(l,n)));return new je(o,this._parents,t,n)}function jp(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ps(e));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var u=r[a],c=u.length,l,d=0;d<c;++d)if(l=u[d]){for(var f=e.call(l,l.__data__,d,u),h,p=Be(l,n),g=0,b=f.length;g<b;++g)(h=f[g])&&cr(h,t,n,g,f,p);o.push(f),s.push(l)}return new je(o,s,t,n)}var Zp=wn.prototype.constructor;function Jp(){return new Zp(this._groups,this._parents)}function Qp(e,t){var n,r,i;return function(){var o=Bt(this,e),s=(this.style.removeProperty(e),Bt(this,e));return o===s?null:o===n&&s===r?i:i=t(n=o,r=s)}}function ra(e){return function(){this.style.removeProperty(e)}}function eg(e,t,n){var r,i=n+"",o;return function(){var s=Bt(this,e);return s===i?null:s===r?o:o=t(r=s,n)}}function tg(e,t,n){var r,i,o;return function(){var s=Bt(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),Bt(this,e))),s===u?null:s===r&&u===i?o:(i=u,o=t(r=s,a))}}function ng(e,t){var n,r,i,o="style."+t,s="end."+o,a;return function(){var u=We(this,e),c=u.on,l=u.value[o]==null?a||(a=ra(t)):void 0;(c!==n||i!==l)&&(r=(n=c).copy()).on(s,i=l),u.on=r}}function rg(e,t,n){var r=(e+="")=="transform"?rp:na;return t==null?this.styleTween(e,Qp(e,r)).on("end.style."+e,ra(e)):typeof t=="function"?this.styleTween(e,tg(e,r,Ni(this,"style."+e,t))).each(ng(this._id,e)):this.styleTween(e,eg(e,r,t),n).on("end.style."+e,null)}function ig(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function og(e,t,n){var r,i;function o(){var s=t.apply(this,arguments);return s!==i&&(r=(i=s)&&ig(e,s,n)),r}return o._value=t,o}function sg(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,og(e,t,n??""))}function ag(e){return function(){this.textContent=e}}function cg(e){return function(){var t=e(this);this.textContent=t??""}}function ug(e){return this.tween("text",typeof e=="function"?cg(Ni(this,"text",e)):ag(e==null?"":e+""))}function lg(e){return function(t){this.textContent=e.call(this,t)}}function dg(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&lg(i)),t}return r._value=e,r}function fg(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,dg(e))}function hg(){for(var e=this._name,t=this._id,n=ia(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,u,c=0;c<a;++c)if(u=s[c]){var l=Be(u,t);cr(u,e,n,c,s,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new je(r,this._parents,e,n)}function pg(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},u={value:function(){--i===0&&o()}};n.each(function(){var c=We(this,r),l=c.on;l!==e&&(t=(e=l).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),c.on=t}),i===0&&o()})}var gg=0;function je(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function ia(){return++gg}var Ye=wn.prototype;je.prototype={constructor:je,select:Xp,selectAll:jp,selectChild:Ye.selectChild,selectChildren:Ye.selectChildren,filter:Bp,merge:Fp,selection:Jp,transition:hg,call:Ye.call,nodes:Ye.nodes,node:Ye.node,size:Ye.size,empty:Ye.empty,each:Ye.each,on:Wp,attr:Cp,attrTween:Mp,style:rg,styleTween:sg,text:ug,textTween:fg,remove:Kp,tween:bp,delay:Ip,duration:Op,ease:Lp,easeVarying:Hp,end:pg,[Symbol.iterator]:Ye[Symbol.iterator]};function yg(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var mg={time:null,delay:0,duration:250,ease:yg};function wg(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function bg(e){var t,n;e instanceof je?(t=e._id,e=e._name):(t=ia(),(n=mg).time=xi(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,u,c=0;c<a;++c)(u=s[c])&&cr(u,e,t,c,s,n||wg(u,t));return new je(r,this._parents,e,t)}wn.prototype.interrupt=yp;wn.prototype.transition=bg;const kn=e=>()=>e;function vg(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Ke(e,t,n){this.k=e,this.x=t,this.y=n}Ke.prototype={constructor:Ke,scale:function(e){return e===1?this:new Ke(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ke(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var lt=new Ke(1,0,0);Ke.prototype;function _r(e){e.stopImmediatePropagation()}function en(e){e.preventDefault(),e.stopImmediatePropagation()}function xg(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function _g(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function go(){return this.__zoom||lt}function Ng(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Eg(){return navigator.maxTouchPoints||"ontouchstart"in this}function Sg(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function Cg(){var e=xg,t=_g,n=Sg,r=Ng,i=Eg,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,u=cp,c=or("start","zoom","end"),l,d,f,h=500,p=150,g=0,b=10;function m(v){v.property("__zoom",go).on("wheel.zoom",P,{passive:!1}).on("mousedown.zoom",z).on("dblclick.zoom",H).filter(i).on("touchstart.zoom",R).on("touchmove.zoom",L).on("touchend.zoom touchcancel.zoom",M).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(v,D,S,I){var O=v.selection?v.selection():v;O.property("__zoom",go),v!==O?k(v,D,S,I):O.interrupt().each(function(){E(this,arguments).event(I).start().zoom(null,typeof D=="function"?D.apply(this,arguments):D).end()})},m.scaleBy=function(v,D,S,I){m.scaleTo(v,function(){var O=this.__zoom.k,N=typeof D=="function"?D.apply(this,arguments):D;return O*N},S,I)},m.scaleTo=function(v,D,S,I){m.transform(v,function(){var O=t.apply(this,arguments),N=this.__zoom,T=S==null?_(O):typeof S=="function"?S.apply(this,arguments):S,G=N.invert(T),U=typeof D=="function"?D.apply(this,arguments):D;return n(C(x(N,U),T,G),O,s)},S,I)},m.translateBy=function(v,D,S,I){m.transform(v,function(){return n(this.__zoom.translate(typeof D=="function"?D.apply(this,arguments):D,typeof S=="function"?S.apply(this,arguments):S),t.apply(this,arguments),s)},null,I)},m.translateTo=function(v,D,S,I,O){m.transform(v,function(){var N=t.apply(this,arguments),T=this.__zoom,G=I==null?_(N):typeof I=="function"?I.apply(this,arguments):I;return n(lt.translate(G[0],G[1]).scale(T.k).translate(typeof D=="function"?-D.apply(this,arguments):-D,typeof S=="function"?-S.apply(this,arguments):-S),N,s)},I,O)};function x(v,D){return D=Math.max(o[0],Math.min(o[1],D)),D===v.k?v:new Ke(D,v.x,v.y)}function C(v,D,S){var I=D[0]-S[0]*v.k,O=D[1]-S[1]*v.k;return I===v.x&&O===v.y?v:new Ke(v.k,I,O)}function _(v){return[(+v[0][0]+ +v[1][0])/2,(+v[0][1]+ +v[1][1])/2]}function k(v,D,S,I){v.on("start.zoom",function(){E(this,arguments).event(I).start()}).on("interrupt.zoom end.zoom",function(){E(this,arguments).event(I).end()}).tween("zoom",function(){var O=this,N=arguments,T=E(O,N).event(I),G=t.apply(O,N),U=S==null?_(G):typeof S=="function"?S.apply(O,N):S,K=Math.max(G[1][0]-G[0][0],G[1][1]-G[0][1]),X=O.__zoom,ee=typeof D=="function"?D.apply(O,N):D,ne=u(X.invert(U).concat(K/X.k),ee.invert(U).concat(K/ee.k));return function(re){if(re===1)re=ee;else{var A=ne(re),B=K/A[2];re=new Ke(B,U[0]-A[0]*B,U[1]-A[1]*B)}T.zoom(null,re)}})}function E(v,D,S){return!S&&v.__zooming||new $(v,D)}function $(v,D){this.that=v,this.args=D,this.active=0,this.sourceEvent=null,this.extent=t.apply(v,D),this.taps=0}$.prototype={event:function(v){return v&&(this.sourceEvent=v),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(v,D){return this.mouse&&v!=="mouse"&&(this.mouse[1]=D.invert(this.mouse[0])),this.touch0&&v!=="touch"&&(this.touch0[1]=D.invert(this.touch0[0])),this.touch1&&v!=="touch"&&(this.touch1[1]=D.invert(this.touch1[0])),this.that.__zoom=D,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(v){var D=Ge(this.that).datum();c.call(v,this.that,new vg(v,{sourceEvent:this.sourceEvent,target:m,type:v,transform:this.that.__zoom,dispatch:c}),D)}};function P(v,...D){if(!e.apply(this,arguments))return;var S=E(this,D).event(v),I=this.__zoom,O=Math.max(o[0],Math.min(o[1],I.k*Math.pow(2,r.apply(this,arguments)))),N=Fe(v);if(S.wheel)(S.mouse[0][0]!==N[0]||S.mouse[0][1]!==N[1])&&(S.mouse[1]=I.invert(S.mouse[0]=N)),clearTimeout(S.wheel);else{if(I.k===O)return;S.mouse=[N,I.invert(N)],Ln(this),S.start()}en(v),S.wheel=setTimeout(T,p),S.zoom("mouse",n(C(x(I,O),S.mouse[0],S.mouse[1]),S.extent,s));function T(){S.wheel=null,S.end()}}function z(v,...D){if(f||!e.apply(this,arguments))return;var S=v.currentTarget,I=E(this,D,!0).event(v),O=Ge(v.view).on("mousemove.zoom",U,!0).on("mouseup.zoom",K,!0),N=Fe(v,S),T=v.clientX,G=v.clientY;Us(v.view),_r(v),I.mouse=[N,this.__zoom.invert(N)],Ln(this),I.start();function U(X){if(en(X),!I.moved){var ee=X.clientX-T,ne=X.clientY-G;I.moved=ee*ee+ne*ne>g}I.event(X).zoom("mouse",n(C(I.that.__zoom,I.mouse[0]=Fe(X,S),I.mouse[1]),I.extent,s))}function K(X){O.on("mousemove.zoom mouseup.zoom",null),qs(X.view,I.moved),en(X),I.event(X).end()}}function H(v,...D){if(e.apply(this,arguments)){var S=this.__zoom,I=Fe(v.changedTouches?v.changedTouches[0]:v,this),O=S.invert(I),N=S.k*(v.shiftKey?.5:2),T=n(C(x(S,N),I,O),t.apply(this,D),s);en(v),a>0?Ge(this).transition().duration(a).call(k,T,I,v):Ge(this).call(m.transform,T,I,v)}}function R(v,...D){if(e.apply(this,arguments)){var S=v.touches,I=S.length,O=E(this,D,v.changedTouches.length===I).event(v),N,T,G,U;for(_r(v),T=0;T<I;++T)G=S[T],U=Fe(G,this),U=[U,this.__zoom.invert(U),G.identifier],O.touch0?!O.touch1&&O.touch0[2]!==U[2]&&(O.touch1=U,O.taps=0):(O.touch0=U,N=!0,O.taps=1+!!l);l&&(l=clearTimeout(l)),N&&(O.taps<2&&(d=U[0],l=setTimeout(function(){l=null},h)),Ln(this),O.start())}}function L(v,...D){if(this.__zooming){var S=E(this,D).event(v),I=v.changedTouches,O=I.length,N,T,G,U;for(en(v),N=0;N<O;++N)T=I[N],G=Fe(T,this),S.touch0&&S.touch0[2]===T.identifier?S.touch0[0]=G:S.touch1&&S.touch1[2]===T.identifier&&(S.touch1[0]=G);if(T=S.that.__zoom,S.touch1){var K=S.touch0[0],X=S.touch0[1],ee=S.touch1[0],ne=S.touch1[1],re=(re=ee[0]-K[0])*re+(re=ee[1]-K[1])*re,A=(A=ne[0]-X[0])*A+(A=ne[1]-X[1])*A;T=x(T,Math.sqrt(re/A)),G=[(K[0]+ee[0])/2,(K[1]+ee[1])/2],U=[(X[0]+ne[0])/2,(X[1]+ne[1])/2]}else if(S.touch0)G=S.touch0[0],U=S.touch0[1];else return;S.zoom("touch",n(C(T,G,U),S.extent,s))}}function M(v,...D){if(this.__zooming){var S=E(this,D).event(v),I=v.changedTouches,O=I.length,N,T;for(_r(v),f&&clearTimeout(f),f=setTimeout(function(){f=null},h),N=0;N<O;++N)T=I[N],S.touch0&&S.touch0[2]===T.identifier?delete S.touch0:S.touch1&&S.touch1[2]===T.identifier&&delete S.touch1;if(S.touch1&&!S.touch0&&(S.touch0=S.touch1,delete S.touch1),S.touch0)S.touch0[1]=this.__zoom.invert(S.touch0[0]);else if(S.end(),S.taps===2&&(T=Fe(T,this),Math.hypot(d[0]-T[0],d[1]-T[1])<b)){var G=Ge(this).on("dblclick.zoom");G&&G.apply(this,arguments)}}}return m.wheelDelta=function(v){return arguments.length?(r=typeof v=="function"?v:kn(+v),m):r},m.filter=function(v){return arguments.length?(e=typeof v=="function"?v:kn(!!v),m):e},m.touchable=function(v){return arguments.length?(i=typeof v=="function"?v:kn(!!v),m):i},m.extent=function(v){return arguments.length?(t=typeof v=="function"?v:kn([[+v[0][0],+v[0][1]],[+v[1][0],+v[1][1]]]),m):t},m.scaleExtent=function(v){return arguments.length?(o[0]=+v[0],o[1]=+v[1],m):[o[0],o[1]]},m.translateExtent=function(v){return arguments.length?(s[0][0]=+v[0][0],s[1][0]=+v[1][0],s[0][1]=+v[0][1],s[1][1]=+v[1][1],m):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},m.constrain=function(v){return arguments.length?(n=v,m):n},m.duration=function(v){return arguments.length?(a=+v,m):a},m.interpolate=function(v){return arguments.length?(u=v,m):u},m.on=function(){var v=c.on.apply(c,arguments);return v===c?m:v},m.clickDistance=function(v){return arguments.length?(g=(v=+v)*v,m):Math.sqrt(g)},m.tapDistance=function(v){return arguments.length?(b=+v,m):b},m}const ur=w.createContext(null),$g=ur.Provider,Ze={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},oa=Ze.error001();function de(e,t){const n=w.useContext(ur);if(n===null)throw new Error(oa);return Ms(n,e,t)}const ye=()=>{const e=w.useContext(ur);if(e===null)throw new Error(oa);return w.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},Ag=e=>e.userSelectionActive?"none":"all";function sa({position:e,children:t,className:n,style:r,...i}){const o=de(Ag),s=`${e}`.split("-");return y("div",{className:_e(["react-flow__panel",n,...s]),style:{...r,pointerEvents:o},...i,children:t})}function kg({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:y(sa,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:y("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const Dg=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:i=!0,labelBgStyle:o={},labelBgPadding:s=[2,4],labelBgBorderRadius:a=2,children:u,className:c,...l})=>{const d=w.useRef(null),[f,h]=w.useState({x:0,y:0,width:0,height:0}),p=_e(["react-flow__edge-textwrapper",c]);return w.useEffect(()=>{if(d.current){const g=d.current.getBBox();h({x:g.x,y:g.y,width:g.width,height:g.height})}},[n]),typeof n>"u"||!n?null:q("g",{transform:`translate(${e-f.width/2} ${t-f.height/2})`,className:p,visibility:f.width?"visible":"hidden",...l,children:[i&&y("rect",{width:f.width+2*s[0],x:-s[0],y:-s[1],height:f.height+2*s[1],className:"react-flow__edge-textbg",style:o,rx:a,ry:a}),y("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:d,style:r,children:n}),u]})};var Mg=w.memo(Dg);const Ei=e=>({width:e.offsetWidth,height:e.offsetHeight}),Ut=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Si=(e={x:0,y:0},t)=>({x:Ut(e.x,t[0][0],t[1][0]),y:Ut(e.y,t[0][1],t[1][1])}),yo=(e,t,n)=>e<t?Ut(Math.abs(e-t),1,50)/50:e>n?-Ut(Math.abs(e-n),1,50)/50:0,aa=(e,t)=>{const n=yo(e.x,35,t.width-35)*20,r=yo(e.y,35,t.height-35)*20;return[n,r]},ca=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Tg=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Ci=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),Pg=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),mo=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),Br=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},Ig=e=>Me(e.width)&&Me(e.height)&&Me(e.x)&&Me(e.y),Me=e=>!isNaN(e)&&isFinite(e),pe=Symbol.for("internals"),ua=["Enter"," ","Escape"],zg=(e,t)=>{},Rg=e=>"nativeEvent"in e;function Fr(e){var i,o;const t=Rg(e)?e.nativeEvent:e,n=((o=(i=t.composedPath)==null?void 0:i.call(t))==null?void 0:o[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const la=e=>"clientX"in e,dt=(e,t)=>{var o,s;const n=la(e),r=n?e.clientX:(o=e.touches)==null?void 0:o[0].clientX,i=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}},Xn=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},vn=({id:e,path:t,labelX:n,labelY:r,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:u,labelBgBorderRadius:c,style:l,markerEnd:d,markerStart:f,interactionWidth:h=20})=>q(Se,{children:[y("path",{id:e,style:l,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:d,markerStart:f}),h&&y("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}),i&&Me(n)&&Me(r)?y(Mg,{x:n,y:r,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:u,labelBgBorderRadius:c}):null]});vn.displayName="BaseEdge";function tn(e,t,n){return n===void 0?n:r=>{const i=t().edges.find(o=>o.id===e);i&&n(r,{...i})}}function da({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,o=n<e?n+i:n-i,s=Math.abs(r-t)/2,a=r<t?r+s:r-s;return[o,a,i,s]}function fa({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:o,targetControlX:s,targetControlY:a}){const u=e*.125+i*.375+s*.375+n*.125,c=t*.125+o*.375+a*.375+r*.125,l=Math.abs(u-e),d=Math.abs(c-t);return[u,c,l,d]}var Ct;(function(e){e.Strict="strict",e.Loose="loose"})(Ct||(Ct={}));var _t;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(_t||(_t={}));var gn;(function(e){e.Partial="partial",e.Full="full"})(gn||(gn={}));var ut;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(ut||(ut={}));var jn;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(jn||(jn={}));var Y;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Y||(Y={}));function wo({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===Y.Left||e===Y.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function ha({sourceX:e,sourceY:t,sourcePosition:n=Y.Bottom,targetX:r,targetY:i,targetPosition:o=Y.Top}){const[s,a]=wo({pos:n,x1:e,y1:t,x2:r,y2:i}),[u,c]=wo({pos:o,x1:r,y1:i,x2:e,y2:t}),[l,d,f,h]=fa({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:s,sourceControlY:a,targetControlX:u,targetControlY:c});return[`M${e},${t} C${s},${a} ${u},${c} ${r},${i}`,l,d,f,h]}const $i=w.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=Y.Bottom,targetPosition:o=Y.Top,label:s,labelStyle:a,labelShowBg:u,labelBgStyle:c,labelBgPadding:l,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:p,interactionWidth:g})=>{const[b,m,x]=ha({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:o});return y(vn,{path:b,labelX:m,labelY:x,label:s,labelStyle:a,labelShowBg:u,labelBgStyle:c,labelBgPadding:l,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:p,interactionWidth:g})});$i.displayName="SimpleBezierEdge";const bo={[Y.Left]:{x:-1,y:0},[Y.Right]:{x:1,y:0},[Y.Top]:{x:0,y:-1},[Y.Bottom]:{x:0,y:1}},Og=({source:e,sourcePosition:t=Y.Bottom,target:n})=>t===Y.Left||t===Y.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},vo=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Gg({source:e,sourcePosition:t=Y.Bottom,target:n,targetPosition:r=Y.Top,center:i,offset:o}){const s=bo[t],a=bo[r],u={x:e.x+s.x*o,y:e.y+s.y*o},c={x:n.x+a.x*o,y:n.y+a.y*o},l=Og({source:u,sourcePosition:t,target:c}),d=l.x!==0?"x":"y",f=l[d];let h=[],p,g;const b={x:0,y:0},m={x:0,y:0},[x,C,_,k]=da({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[d]*a[d]===-1){p=i.x||x,g=i.y||C;const $=[{x:p,y:u.y},{x:p,y:c.y}],P=[{x:u.x,y:g},{x:c.x,y:g}];s[d]===f?h=d==="x"?$:P:h=d==="x"?P:$}else{const $=[{x:u.x,y:c.y}],P=[{x:c.x,y:u.y}];if(d==="x"?h=s.x===f?P:$:h=s.y===f?$:P,t===r){const M=Math.abs(e[d]-n[d]);if(M<=o){const v=Math.min(o-1,o-M);s[d]===f?b[d]=(u[d]>e[d]?-1:1)*v:m[d]=(c[d]>n[d]?-1:1)*v}}if(t!==r){const M=d==="x"?"y":"x",v=s[d]===a[M],D=u[M]>c[M],S=u[M]<c[M];(s[d]===1&&(!v&&D||v&&S)||s[d]!==1&&(!v&&S||v&&D))&&(h=d==="x"?$:P)}const z={x:u.x+b.x,y:u.y+b.y},H={x:c.x+m.x,y:c.y+m.y},R=Math.max(Math.abs(z.x-h[0].x),Math.abs(H.x-h[0].x)),L=Math.max(Math.abs(z.y-h[0].y),Math.abs(H.y-h[0].y));R>=L?(p=(z.x+H.x)/2,g=h[0].y):(p=h[0].x,g=(z.y+H.y)/2)}return[[e,{x:u.x+b.x,y:u.y+b.y},...h,{x:c.x+m.x,y:c.y+m.y},n],p,g,_,k]}function Lg(e,t,n,r){const i=Math.min(vo(e,t)/2,vo(t,n)/2,r),{x:o,y:s}=t;if(e.x===o&&o===n.x||e.y===s&&s===n.y)return`L${o} ${s}`;if(e.y===s){const c=e.x<n.x?-1:1,l=e.y<n.y?1:-1;return`L ${o+i*c},${s}Q ${o},${s} ${o},${s+i*l}`}const a=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return`L ${o},${s+i*u}Q ${o},${s} ${o+i*a},${s}`}function Ur({sourceX:e,sourceY:t,sourcePosition:n=Y.Bottom,targetX:r,targetY:i,targetPosition:o=Y.Top,borderRadius:s=5,centerX:a,centerY:u,offset:c=20}){const[l,d,f,h,p]=Gg({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:o,center:{x:a,y:u},offset:c});return[l.reduce((b,m,x)=>{let C="";return x>0&&x<l.length-1?C=Lg(l[x-1],m,l[x+1],s):C=`${x===0?"M":"L"}${m.x} ${m.y}`,b+=C,b},""),d,f,h,p]}const lr=w.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:u,labelBgBorderRadius:c,style:l,sourcePosition:d=Y.Bottom,targetPosition:f=Y.Top,markerEnd:h,markerStart:p,pathOptions:g,interactionWidth:b})=>{const[m,x,C]=Ur({sourceX:e,sourceY:t,sourcePosition:d,targetX:n,targetY:r,targetPosition:f,borderRadius:g==null?void 0:g.borderRadius,offset:g==null?void 0:g.offset});return y(vn,{path:m,labelX:x,labelY:C,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:u,labelBgBorderRadius:c,style:l,markerEnd:h,markerStart:p,interactionWidth:b})});lr.displayName="SmoothStepEdge";const Ai=w.memo(e=>{var t;return y(lr,{...e,pathOptions:w.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});Ai.displayName="StepEdge";function Vg({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,o,s,a]=da({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,o,s,a]}const ki=w.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:u,labelBgBorderRadius:c,style:l,markerEnd:d,markerStart:f,interactionWidth:h})=>{const[p,g,b]=Vg({sourceX:e,sourceY:t,targetX:n,targetY:r});return y(vn,{path:p,labelX:g,labelY:b,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:u,labelBgBorderRadius:c,style:l,markerEnd:d,markerStart:f,interactionWidth:h})});ki.displayName="StraightEdge";function Dn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function xo({pos:e,x1:t,y1:n,x2:r,y2:i,c:o}){switch(e){case Y.Left:return[t-Dn(t-r,o),n];case Y.Right:return[t+Dn(r-t,o),n];case Y.Top:return[t,n-Dn(n-i,o)];case Y.Bottom:return[t,n+Dn(i-n,o)]}}function Di({sourceX:e,sourceY:t,sourcePosition:n=Y.Bottom,targetX:r,targetY:i,targetPosition:o=Y.Top,curvature:s=.25}){const[a,u]=xo({pos:n,x1:e,y1:t,x2:r,y2:i,c:s}),[c,l]=xo({pos:o,x1:r,y1:i,x2:e,y2:t,c:s}),[d,f,h,p]=fa({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:a,sourceControlY:u,targetControlX:c,targetControlY:l});return[`M${e},${t} C${a},${u} ${c},${l} ${r},${i}`,d,f,h,p]}const Zn=w.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=Y.Bottom,targetPosition:o=Y.Top,label:s,labelStyle:a,labelShowBg:u,labelBgStyle:c,labelBgPadding:l,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:p,pathOptions:g,interactionWidth:b})=>{const[m,x,C]=Di({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:o,curvature:g==null?void 0:g.curvature});return y(vn,{path:m,labelX:x,labelY:C,label:s,labelStyle:a,labelShowBg:u,labelBgStyle:c,labelBgPadding:l,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:p,interactionWidth:b})});Zn.displayName="BezierEdge";const Mi=w.createContext(null),Hg=Mi.Provider;Mi.Consumer;const Bg=()=>w.useContext(Mi),Fg=e=>"id"in e&&"source"in e&&"target"in e,Ug=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,qr=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,qg=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),pa=(e,t)=>{if(!e.source||!e.target)return t;let n;return Fg(e)?n={...e}:n={...e,id:Ug(e)},qg(n,t)?t:t.concat(n)},ga=({x:e,y:t},[n,r,i],o,[s,a])=>{const u={x:(e-n)/i,y:(t-r)/i};return o?{x:s*Math.round(u.x/s),y:a*Math.round(u.y/a)}:u},Wg=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r}),Vt=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],i={x:e.position.x-n,y:e.position.y-r};return{...i,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:i}},Ti=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const{x:o,y:s}=Vt(i,t).positionAbsolute;return Tg(r,Ci({x:o,y:s,width:i.width||0,height:i.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Pg(n)},ya=(e,t,[n,r,i]=[0,0,1],o=!1,s=!1,a=[0,0])=>{const u={x:(t.x-n)/i,y:(t.y-r)/i,width:t.width/i,height:t.height/i},c=[];return e.forEach(l=>{const{width:d,height:f,selectable:h=!0,hidden:p=!1}=l;if(s&&!h||p)return!1;const{positionAbsolute:g}=Vt(l,a),b={x:g.x,y:g.y,width:d||0,height:f||0},m=Br(u,b),x=typeof d>"u"||typeof f>"u"||d===null||f===null,C=o&&m>0,_=(d||0)*(f||0);(x||C||m>=_||l.dragging)&&c.push(l)}),c},ma=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},wa=(e,t,n,r,i,o=.1)=>{const s=t/(e.width*(1+o)),a=n/(e.height*(1+o)),u=Math.min(s,a),c=Ut(u,r,i),l=e.x+e.width/2,d=e.y+e.height/2,f=t/2-l*c,h=n/2-d*c;return[f,h,c]},bt=(e,t=0)=>e.transition().duration(t);function _o(e,t,n,r){return(t[n]||[]).reduce((i,o)=>{var s,a;return`${e.id}-${o.id}-${n}`!==r&&i.push({id:o.id||null,type:n,nodeId:e.id,x:(((s=e.positionAbsolute)==null?void 0:s.x)??0)+o.x+o.width/2,y:(((a=e.positionAbsolute)==null?void 0:a.y)??0)+o.y+o.height/2}),i},[])}function Yg(e,t,n,r,i,o){const{x:s,y:a}=dt(e),c=t.elementsFromPoint(s,a).find(p=>p.classList.contains("react-flow__handle"));if(c){const p=c.getAttribute("data-nodeid");if(p){const g=Pi(void 0,c),b=c.getAttribute("data-handleid"),m=o({nodeId:p,id:b,type:g});if(m)return{handle:{id:b,type:g,nodeId:p,x:n.x,y:n.y},validHandleResult:m}}}let l=[],d=1/0;if(i.forEach(p=>{const g=Math.sqrt((p.x-n.x)**2+(p.y-n.y)**2);if(g<=r){const b=o(p);g<=d&&(g<d?l=[{handle:p,validHandleResult:b}]:g===d&&l.push({handle:p,validHandleResult:b}),d=g)}}),!l.length)return{handle:null,validHandleResult:ba()};if(l.length===1)return l[0];const f=l.some(({validHandleResult:p})=>p.isValid),h=l.some(({handle:p})=>p.type==="target");return l.find(({handle:p,validHandleResult:g})=>h?p.type==="target":f?g.isValid:!0)||l[0]}const Kg={source:null,target:null,sourceHandle:null,targetHandle:null},ba=()=>({handleDomNode:null,isValid:!1,connection:Kg,endHandle:null});function va(e,t,n,r,i,o,s){const a=i==="target",u=s.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),c={...ba(),handleDomNode:u};if(u){const l=Pi(void 0,u),d=u.getAttribute("data-nodeid"),f=u.getAttribute("data-handleid"),h=u.classList.contains("connectable"),p=u.classList.contains("connectableend"),g={source:a?d:n,sourceHandle:a?f:r,target:a?n:d,targetHandle:a?r:f};c.connection=g,h&&p&&(t===Ct.Strict?a&&l==="source"||!a&&l==="target":d!==n||f!==r)&&(c.endHandle={nodeId:d,handleId:f,type:l},c.isValid=o(g))}return c}function Xg({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((i,o)=>{if(o[pe]){const{handleBounds:s}=o[pe];let a=[],u=[];s&&(a=_o(o,s,"source",`${t}-${n}-${r}`),u=_o(o,s,"target",`${t}-${n}-${r}`)),i.push(...a,...u)}return i},[])}function Pi(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Nr(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function jg(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function xa({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:i,getState:o,setState:s,isValidConnection:a,edgeUpdaterType:u,onEdgeUpdateEnd:c}){const l=ca(e.target),{connectionMode:d,domNode:f,autoPanOnConnect:h,connectionRadius:p,onConnectStart:g,panBy:b,getNodes:m,cancelConnection:x}=o();let C=0,_;const{x:k,y:E}=dt(e),$=l==null?void 0:l.elementFromPoint(k,E),P=Pi(u,$),z=f==null?void 0:f.getBoundingClientRect();if(!z||!P)return;let H,R=dt(e,z),L=!1,M=null,v=!1,D=null;const S=Xg({nodes:m(),nodeId:n,handleId:t,handleType:P}),I=()=>{if(!h)return;const[T,G]=aa(R,z);b({x:T,y:G}),C=requestAnimationFrame(I)};s({connectionPosition:R,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:P,connectionStartHandle:{nodeId:n,handleId:t,type:P},connectionEndHandle:null}),g==null||g(e,{nodeId:n,handleId:t,handleType:P});function O(T){const{transform:G}=o();R=dt(T,z);const{handle:U,validHandleResult:K}=Yg(T,l,ga(R,G,!1,[1,1]),p,S,X=>va(X,d,n,t,i?"target":"source",a,l));if(_=U,L||(I(),L=!0),D=K.handleDomNode,M=K.connection,v=K.isValid,s({connectionPosition:_&&v?Wg({x:_.x,y:_.y},G):R,connectionStatus:jg(!!_,v),connectionEndHandle:K.endHandle}),!_&&!v&&!D)return Nr(H);M.source!==M.target&&D&&(Nr(H),H=D,D.classList.add("connecting","react-flow__handle-connecting"),D.classList.toggle("valid",v),D.classList.toggle("react-flow__handle-valid",v))}function N(T){var G,U;(_||D)&&M&&v&&(r==null||r(M)),(U=(G=o()).onConnectEnd)==null||U.call(G,T),u&&(c==null||c(T)),Nr(H),x(),cancelAnimationFrame(C),L=!1,v=!1,M=null,D=null,l.removeEventListener("mousemove",O),l.removeEventListener("mouseup",N),l.removeEventListener("touchmove",O),l.removeEventListener("touchend",N)}l.addEventListener("mousemove",O),l.addEventListener("mouseup",N),l.addEventListener("touchmove",O),l.addEventListener("touchend",N)}const No=()=>!0,Zg=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),Jg=(e,t,n)=>r=>{const{connectionStartHandle:i,connectionEndHandle:o,connectionClickStartHandle:s}=r;return{connecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n||(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===n,clickConnecting:(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===n}},_a=w.forwardRef(({type:e="source",position:t=Y.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:o=!0,id:s,onConnect:a,children:u,className:c,onMouseDown:l,onTouchStart:d,...f},h)=>{var z,H;const p=s||null,g=e==="target",b=ye(),m=Bg(),{connectOnClick:x,noPanClassName:C}=de(Zg,xe),{connecting:_,clickConnecting:k}=de(Jg(m,p,e),xe);m||(H=(z=b.getState()).onError)==null||H.call(z,"010",Ze.error010());const E=R=>{const{defaultEdgeOptions:L,onConnect:M,hasDefaultEdges:v}=b.getState(),D={...L,...R};if(v){const{edges:S,setEdges:I}=b.getState();I(pa(D,S))}M==null||M(D),a==null||a(D)},$=R=>{if(!m)return;const L=la(R);i&&(L&&R.button===0||!L)&&xa({event:R,handleId:p,nodeId:m,onConnect:E,isTarget:g,getState:b.getState,setState:b.setState,isValidConnection:n||b.getState().isValidConnection||No}),L?l==null||l(R):d==null||d(R)},P=R=>{const{onClickConnectStart:L,onClickConnectEnd:M,connectionClickStartHandle:v,connectionMode:D,isValidConnection:S}=b.getState();if(!m||!v&&!i)return;if(!v){L==null||L(R,{nodeId:m,handleId:p,handleType:e}),b.setState({connectionClickStartHandle:{nodeId:m,type:e,handleId:p}});return}const I=ca(R.target),O=n||S||No,{connection:N,isValid:T}=va({nodeId:m,id:p,type:e},D,v.nodeId,v.handleId||null,v.type,O,I);T&&E(N),M==null||M(R),b.setState({connectionClickStartHandle:null})};return y("div",{"data-handleid":p,"data-nodeid":m,"data-handlepos":t,"data-id":`${m}-${p}-${e}`,className:_e(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",C,c,{source:!g,target:g,connectable:r,connectablestart:i,connectableend:o,connecting:k,connectionindicator:r&&(i&&!_||o&&_)}]),onMouseDown:$,onTouchStart:$,onClick:x?P:void 0,ref:h,...f,children:u})});_a.displayName="Handle";var He=w.memo(_a);const Na=({data:e,isConnectable:t,targetPosition:n=Y.Top,sourcePosition:r=Y.Bottom})=>q(Se,{children:[y(He,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,y(He,{type:"source",position:r,isConnectable:t})]});Na.displayName="DefaultNode";var Wr=w.memo(Na);const Ea=({data:e,isConnectable:t,sourcePosition:n=Y.Bottom})=>q(Se,{children:[e==null?void 0:e.label,y(He,{type:"source",position:n,isConnectable:t})]});Ea.displayName="InputNode";var Sa=w.memo(Ea);const Ca=({data:e,isConnectable:t,targetPosition:n=Y.Top})=>q(Se,{children:[y(He,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]});Ca.displayName="OutputNode";var $a=w.memo(Ca);const Ii=()=>null;Ii.displayName="GroupNode";const Qg=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected)}),Mn=e=>e.id;function ey(e,t){return xe(e.selectedNodes.map(Mn),t.selectedNodes.map(Mn))&&xe(e.selectedEdges.map(Mn),t.selectedEdges.map(Mn))}const Aa=w.memo(({onSelectionChange:e})=>{const t=ye(),{selectedNodes:n,selectedEdges:r}=de(Qg,ey);return w.useEffect(()=>{var o,s;const i={nodes:n,edges:r};e==null||e(i),(s=(o=t.getState()).onSelectionChange)==null||s.call(o,i)},[n,r,e]),null});Aa.displayName="SelectionListener";const ty=e=>!!e.onSelectionChange;function ny({onSelectionChange:e}){const t=de(ty);return e||t?y(Aa,{onSelectionChange:e}):null}const ry=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Tt(e,t){w.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function te(e,t,n){w.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const iy=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:i,onConnectStart:o,onConnectEnd:s,onClickConnectStart:a,onClickConnectEnd:u,nodesDraggable:c,nodesConnectable:l,nodesFocusable:d,edgesFocusable:f,edgesUpdatable:h,elevateNodesOnSelect:p,minZoom:g,maxZoom:b,nodeExtent:m,onNodesChange:x,onEdgesChange:C,elementsSelectable:_,connectionMode:k,snapGrid:E,snapToGrid:$,translateExtent:P,connectOnClick:z,defaultEdgeOptions:H,fitView:R,fitViewOptions:L,onNodesDelete:M,onEdgesDelete:v,onNodeDrag:D,onNodeDragStart:S,onNodeDragStop:I,onSelectionDrag:O,onSelectionDragStart:N,onSelectionDragStop:T,noPanClassName:G,nodeOrigin:U,rfId:K,autoPanOnConnect:X,autoPanOnNodeDrag:ee,onError:ne,connectionRadius:re,isValidConnection:A})=>{const{setNodes:B,setEdges:W,setDefaultNodesAndEdges:j,setMinZoom:ie,setMaxZoom:ce,setTranslateExtent:se,setNodeExtent:Q,reset:le}=de(ry,xe),J=ye();return w.useEffect(()=>{const ze=r==null?void 0:r.map(be=>({...be,...H}));return j(n,ze),()=>{le()}},[]),te("defaultEdgeOptions",H,J.setState),te("connectionMode",k,J.setState),te("onConnect",i,J.setState),te("onConnectStart",o,J.setState),te("onConnectEnd",s,J.setState),te("onClickConnectStart",a,J.setState),te("onClickConnectEnd",u,J.setState),te("nodesDraggable",c,J.setState),te("nodesConnectable",l,J.setState),te("nodesFocusable",d,J.setState),te("edgesFocusable",f,J.setState),te("edgesUpdatable",h,J.setState),te("elementsSelectable",_,J.setState),te("elevateNodesOnSelect",p,J.setState),te("snapToGrid",$,J.setState),te("snapGrid",E,J.setState),te("onNodesChange",x,J.setState),te("onEdgesChange",C,J.setState),te("connectOnClick",z,J.setState),te("fitViewOnInit",R,J.setState),te("fitViewOnInitOptions",L,J.setState),te("onNodesDelete",M,J.setState),te("onEdgesDelete",v,J.setState),te("onNodeDrag",D,J.setState),te("onNodeDragStart",S,J.setState),te("onNodeDragStop",I,J.setState),te("onSelectionDrag",O,J.setState),te("onSelectionDragStart",N,J.setState),te("onSelectionDragStop",T,J.setState),te("noPanClassName",G,J.setState),te("nodeOrigin",U,J.setState),te("rfId",K,J.setState),te("autoPanOnConnect",X,J.setState),te("autoPanOnNodeDrag",ee,J.setState),te("onError",ne,J.setState),te("connectionRadius",re,J.setState),te("isValidConnection",A,J.setState),Tt(e,B),Tt(t,W),Tt(g,ie),Tt(b,ce),Tt(P,se),Tt(m,Q),null},Eo={display:"none"},oy={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},ka="react-flow__node-desc",Da="react-flow__edge-desc",sy="react-flow__aria-live",ay=e=>e.ariaLiveMessage;function cy({rfId:e}){const t=de(ay);return y("div",{id:`${sy}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:oy,children:t})}function uy({rfId:e,disableKeyboardA11y:t}){return q(Se,{children:[q("div",{id:`${ka}-${e}`,style:Eo,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),y("div",{id:`${Da}-${e}`,style:Eo,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&y(cy,{rfId:e})]})}const ly=typeof document<"u"?document:null;var yn=(e=null,t={target:ly})=>{const[n,r]=w.useState(!1),i=w.useRef(!1),o=w.useRef(new Set([])),[s,a]=w.useMemo(()=>{if(e!==null){const c=(Array.isArray(e)?e:[e]).filter(d=>typeof d=="string").map(d=>d.split("+")),l=c.reduce((d,f)=>d.concat(...f),[]);return[c,l]}return[[],[]]},[e]);return w.useEffect(()=>{var u,c;if(e!==null){const l=h=>{if(i.current=h.ctrlKey||h.metaKey||h.shiftKey,!i.current&&Fr(h))return!1;const p=Co(h.code,a);o.current.add(h[p]),So(s,o.current,!1)&&(h.preventDefault(),r(!0))},d=h=>{if(!i.current&&Fr(h))return!1;const p=Co(h.code,a);So(s,o.current,!0)?(r(!1),o.current.clear()):o.current.delete(h[p]),h.key==="Meta"&&o.current.clear(),i.current=!1},f=()=>{o.current.clear(),r(!1)};return(u=t==null?void 0:t.target)==null||u.addEventListener("keydown",l),(c=t==null?void 0:t.target)==null||c.addEventListener("keyup",d),window.addEventListener("blur",f),()=>{var h,p;(h=t==null?void 0:t.target)==null||h.removeEventListener("keydown",l),(p=t==null?void 0:t.target)==null||p.removeEventListener("keyup",d),window.removeEventListener("blur",f)}}},[e,r]),n};function So(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(i=>t.has(i)))}function Co(e,t){return t.includes(e)?"code":"key"}function Ma(e,t,n,r){var s,a;if(!e.parentNode)return n;const i=t.get(e.parentNode),o=Vt(i,r);return Ma(i,t,{x:(n.x??0)+o.x,y:(n.y??0)+o.y,z:(((s=i[pe])==null?void 0:s.z)??0)>(n.z??0)?((a=i[pe])==null?void 0:a.z)??0:n.z??0},r)}function Ta(e,t,n){e.forEach(r=>{var i;if(r.parentNode&&!e.has(r.parentNode))throw new Error(`Parent node ${r.parentNode} not found`);if(r.parentNode||n!=null&&n[r.id]){const{x:o,y:s,z:a}=Ma(r,e,{...r.position,z:((i=r[pe])==null?void 0:i.z)??0},t);r.positionAbsolute={x:o,y:s},r[pe].z=a,n!=null&&n[r.id]&&(r[pe].isParent=!0)}})}function Er(e,t,n,r){const i=new Map,o={},s=r?1e3:0;return e.forEach(a=>{var d;const u=(Me(a.zIndex)?a.zIndex:0)+(a.selected?s:0),c=t.get(a.id),l={width:c==null?void 0:c.width,height:c==null?void 0:c.height,...a,positionAbsolute:{x:a.position.x,y:a.position.y}};a.parentNode&&(l.parentNode=a.parentNode,o[a.parentNode]=!0),Object.defineProperty(l,pe,{enumerable:!1,value:{handleBounds:(d=c==null?void 0:c[pe])==null?void 0:d.handleBounds,z:u}}),i.set(a.id,l)}),Ta(i,n,o),i}function Pa(e,t={}){const{getNodes:n,width:r,height:i,minZoom:o,maxZoom:s,d3Zoom:a,d3Selection:u,fitViewOnInitDone:c,fitViewOnInit:l,nodeOrigin:d}=e(),f=t.initial&&!c&&l;if(a&&u&&(f||!t.initial)){const p=n().filter(b=>{var x;const m=t.includeHiddenNodes?b.width&&b.height:!b.hidden;return(x=t.nodes)!=null&&x.length?m&&t.nodes.some(C=>C.id===b.id):m}),g=p.every(b=>b.width&&b.height);if(p.length>0&&g){const b=Ti(p,d),[m,x,C]=wa(b,r,i,t.minZoom??o,t.maxZoom??s,t.padding??.1),_=lt.translate(m,x).scale(C);return typeof t.duration=="number"&&t.duration>0?a.transform(bt(u,t.duration),_):a.transform(u,_),!0}}return!1}function dy(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[pe]:r[pe],selected:n.selected})}),new Map(t)}function fy(e,t){return t.map(n=>{const r=e.find(i=>i.id===n.id);return r&&(n.selected=r.selected),n})}function Tn({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:i,edges:o,onNodesChange:s,onEdgesChange:a,hasDefaultNodes:u,hasDefaultEdges:c}=n();e!=null&&e.length&&(u&&r({nodeInternals:dy(e,i)}),s==null||s(e)),t!=null&&t.length&&(c&&r({edges:fy(t,o)}),a==null||a(t))}const Pt=()=>{},hy={zoomIn:Pt,zoomOut:Pt,zoomTo:Pt,getZoom:()=>1,setViewport:Pt,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Pt,fitBounds:Pt,project:e=>e,viewportInitialized:!1},py=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),gy=()=>{const e=ye(),{d3Zoom:t,d3Selection:n}=de(py,xe);return w.useMemo(()=>n&&t?{zoomIn:i=>t.scaleBy(bt(n,i==null?void 0:i.duration),1.2),zoomOut:i=>t.scaleBy(bt(n,i==null?void 0:i.duration),1/1.2),zoomTo:(i,o)=>t.scaleTo(bt(n,o==null?void 0:o.duration),i),getZoom:()=>e.getState().transform[2],setViewport:(i,o)=>{const[s,a,u]=e.getState().transform,c=lt.translate(i.x??s,i.y??a).scale(i.zoom??u);t.transform(bt(n,o==null?void 0:o.duration),c)},getViewport:()=>{const[i,o,s]=e.getState().transform;return{x:i,y:o,zoom:s}},fitView:i=>Pa(e.getState,i),setCenter:(i,o,s)=>{const{width:a,height:u,maxZoom:c}=e.getState(),l=typeof(s==null?void 0:s.zoom)<"u"?s.zoom:c,d=a/2-i*l,f=u/2-o*l,h=lt.translate(d,f).scale(l);t.transform(bt(n,s==null?void 0:s.duration),h)},fitBounds:(i,o)=>{const{width:s,height:a,minZoom:u,maxZoom:c}=e.getState(),[l,d,f]=wa(i,s,a,u,c,(o==null?void 0:o.padding)??.1),h=lt.translate(l,d).scale(f);t.transform(bt(n,o==null?void 0:o.duration),h)},project:i=>{const{transform:o,snapToGrid:s,snapGrid:a}=e.getState();return ga(i,o,s,a)},viewportInitialized:!0}:hy,[t,n])};function dr(){const e=gy(),t=ye(),n=w.useCallback(()=>t.getState().getNodes().map(g=>({...g})),[]),r=w.useCallback(g=>t.getState().nodeInternals.get(g),[]),i=w.useCallback(()=>{const{edges:g=[]}=t.getState();return g.map(b=>({...b}))},[]),o=w.useCallback(g=>{const{edges:b=[]}=t.getState();return b.find(m=>m.id===g)},[]),s=w.useCallback(g=>{const{getNodes:b,setNodes:m,hasDefaultNodes:x,onNodesChange:C}=t.getState(),_=b(),k=typeof g=="function"?g(_):g;if(x)m(k);else if(C){const E=k.length===0?_.map($=>({type:"remove",id:$.id})):k.map($=>({item:$,type:"reset"}));C(E)}},[]),a=w.useCallback(g=>{const{edges:b=[],setEdges:m,hasDefaultEdges:x,onEdgesChange:C}=t.getState(),_=typeof g=="function"?g(b):g;if(x)m(_);else if(C){const k=_.length===0?b.map(E=>({type:"remove",id:E.id})):_.map(E=>({item:E,type:"reset"}));C(k)}},[]),u=w.useCallback(g=>{const b=Array.isArray(g)?g:[g],{getNodes:m,setNodes:x,hasDefaultNodes:C,onNodesChange:_}=t.getState();if(C){const E=[...m(),...b];x(E)}else if(_){const k=b.map(E=>({item:E,type:"add"}));_(k)}},[]),c=w.useCallback(g=>{const b=Array.isArray(g)?g:[g],{edges:m=[],setEdges:x,hasDefaultEdges:C,onEdgesChange:_}=t.getState();if(C)x([...m,...b]);else if(_){const k=b.map(E=>({item:E,type:"add"}));_(k)}},[]),l=w.useCallback(()=>{const{getNodes:g,edges:b=[],transform:m}=t.getState(),[x,C,_]=m;return{nodes:g().map(k=>({...k})),edges:b.map(k=>({...k})),viewport:{x,y:C,zoom:_}}},[]),d=w.useCallback(({nodes:g,edges:b})=>{const{nodeInternals:m,getNodes:x,edges:C,hasDefaultNodes:_,hasDefaultEdges:k,onNodesDelete:E,onEdgesDelete:$,onNodesChange:P,onEdgesChange:z}=t.getState(),H=(g||[]).map(D=>D.id),R=(b||[]).map(D=>D.id),L=x().reduce((D,S)=>{const I=!H.includes(S.id)&&S.parentNode&&D.find(N=>N.id===S.parentNode);return(typeof S.deletable=="boolean"?S.deletable:!0)&&(H.includes(S.id)||I)&&D.push(S),D},[]),M=C.filter(D=>typeof D.deletable=="boolean"?D.deletable:!0),v=M.filter(D=>R.includes(D.id));if(L||v){const D=ma(L,M),S=[...v,...D],I=S.reduce((O,N)=>(O.includes(N.id)||O.push(N.id),O),[]);if((k||_)&&(k&&t.setState({edges:C.filter(O=>!I.includes(O.id))}),_&&(L.forEach(O=>{m.delete(O.id)}),t.setState({nodeInternals:new Map(m)}))),I.length>0&&($==null||$(S),z&&z(I.map(O=>({id:O,type:"remove"})))),L.length>0&&(E==null||E(L),P)){const O=L.map(N=>({id:N.id,type:"remove"}));P(O)}}},[]),f=w.useCallback(g=>{const b=Ig(g),m=b?null:t.getState().nodeInternals.get(g.id);return[b?g:mo(m),m,b]},[]),h=w.useCallback((g,b=!0,m)=>{const[x,C,_]=f(g);return x?(m||t.getState().getNodes()).filter(k=>{if(!_&&(k.id===C.id||!k.positionAbsolute))return!1;const E=mo(k),$=Br(E,x);return b&&$>0||$>=g.width*g.height}):[]},[]),p=w.useCallback((g,b,m=!0)=>{const[x]=f(g);if(!x)return!1;const C=Br(x,b);return m&&C>0||C>=g.width*g.height},[]);return w.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:i,getEdge:o,setNodes:s,setEdges:a,addNodes:u,addEdges:c,toObject:l,deleteElements:d,getIntersectingNodes:h,isNodeIntersecting:p}),[e,n,r,i,o,s,a,u,c,l,d,h,p])}var yy=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=ye(),{deleteElements:r}=dr(),i=yn(e),o=yn(t);w.useEffect(()=>{if(i){const{edges:s,getNodes:a}=n.getState(),u=a().filter(l=>l.selected),c=s.filter(l=>l.selected);r({nodes:u,edges:c}),n.setState({nodesSelectionActive:!1})}},[i]),w.useEffect(()=>{n.setState({multiSelectionActive:o})},[o])};function my(e){const t=ye();w.useEffect(()=>{let n;const r=()=>{var o,s;if(!e.current)return;const i=Ei(e.current);(i.height===0||i.width===0)&&((s=(o=t.getState()).onError)==null||s.call(o,"004",Ze.error004())),t.setState({width:i.width||500,height:i.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const zi={position:"absolute",width:"100%",height:"100%",top:0,left:0},wy=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Pn=e=>({x:e.x,y:e.y,zoom:e.k}),It=(e,t)=>e.target.closest(`.${t}`),$o=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Ao=e=>{const t=e.ctrlKey&&Xn()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},by=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),vy=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:i=!0,zoomOnPinch:o=!0,panOnScroll:s=!1,panOnScrollSpeed:a=.5,panOnScrollMode:u=_t.Free,zoomOnDoubleClick:c=!0,elementsSelectable:l,panOnDrag:d=!0,defaultViewport:f,translateExtent:h,minZoom:p,maxZoom:g,zoomActivationKeyCode:b,preventScrolling:m=!0,children:x,noWheelClassName:C,noPanClassName:_})=>{const k=w.useRef(),E=ye(),$=w.useRef(!1),P=w.useRef(!1),z=w.useRef(null),H=w.useRef({x:0,y:0,zoom:0}),{d3Zoom:R,d3Selection:L,d3ZoomHandler:M,userSelectionActive:v}=de(by,xe),D=yn(b),S=w.useRef(0),I=w.useRef(!1),O=w.useRef();return my(z),w.useEffect(()=>{if(z.current){const N=z.current.getBoundingClientRect(),T=Cg().scaleExtent([p,g]).translateExtent(h),G=Ge(z.current).call(T),U=lt.translate(f.x,f.y).scale(Ut(f.zoom,p,g)),K=[[0,0],[N.width,N.height]],X=T.constrain()(U,K,h);T.transform(G,X),T.wheelDelta(Ao),E.setState({d3Zoom:T,d3Selection:G,d3ZoomHandler:G.on("wheel.zoom"),transform:[X.x,X.y,X.k],domNode:z.current.closest(".react-flow")})}},[]),w.useEffect(()=>{L&&R&&(s&&!D&&!v?L.on("wheel.zoom",N=>{if(It(N,C))return!1;N.preventDefault(),N.stopImmediatePropagation();const T=L.property("__zoom").k||1,G=Xn();if(N.ctrlKey&&o&&G){const B=Fe(N),W=Ao(N),j=T*Math.pow(2,W);R.scaleTo(L,j,B,N);return}const U=N.deltaMode===1?20:1;let K=u===_t.Vertical?0:N.deltaX*U,X=u===_t.Horizontal?0:N.deltaY*U;!G&&N.shiftKey&&u!==_t.Vertical&&(K=N.deltaY*U,X=0),R.translateBy(L,-(K/T)*a,-(X/T)*a,{internal:!0});const ee=Pn(L.property("__zoom")),{onViewportChangeStart:ne,onViewportChange:re,onViewportChangeEnd:A}=E.getState();clearTimeout(O.current),I.current||(I.current=!0,t==null||t(N,ee),ne==null||ne(ee)),I.current&&(e==null||e(N,ee),re==null||re(ee),O.current=setTimeout(()=>{n==null||n(N,ee),A==null||A(ee),I.current=!1},150))},{passive:!1}):typeof M<"u"&&L.on("wheel.zoom",function(N,T){if(!m||It(N,C))return null;N.preventDefault(),M.call(this,N,T)},{passive:!1}))},[v,s,u,L,R,M,D,o,m,C,t,e,n]),w.useEffect(()=>{R&&R.on("start",N=>{var U,K;if(!N.sourceEvent||N.sourceEvent.internal)return null;S.current=(U=N.sourceEvent)==null?void 0:U.button;const{onViewportChangeStart:T}=E.getState(),G=Pn(N.transform);$.current=!0,H.current=G,((K=N.sourceEvent)==null?void 0:K.type)==="mousedown"&&E.setState({paneDragging:!0}),T==null||T(G),t==null||t(N.sourceEvent,G)})},[R,t]),w.useEffect(()=>{R&&(v&&!$.current?R.on("zoom",null):v||R.on("zoom",N=>{var G;const{onViewportChange:T}=E.getState();if(E.setState({transform:[N.transform.x,N.transform.y,N.transform.k]}),P.current=!!(r&&$o(d,S.current??0)),(e||T)&&!((G=N.sourceEvent)!=null&&G.internal)){const U=Pn(N.transform);T==null||T(U),e==null||e(N.sourceEvent,U)}}))},[v,R,e,d,r]),w.useEffect(()=>{R&&R.on("end",N=>{if(!N.sourceEvent||N.sourceEvent.internal)return null;const{onViewportChangeEnd:T}=E.getState();if($.current=!1,E.setState({paneDragging:!1}),r&&$o(d,S.current??0)&&!P.current&&r(N.sourceEvent),P.current=!1,(n||T)&&wy(H.current,N.transform)){const G=Pn(N.transform);H.current=G,clearTimeout(k.current),k.current=setTimeout(()=>{T==null||T(G),n==null||n(N.sourceEvent,G)},s?150:0)}})},[R,s,d,n,r]),w.useEffect(()=>{R&&R.filter(N=>{const T=D||i,G=o&&N.ctrlKey;if(N.button===1&&N.type==="mousedown"&&(It(N,"react-flow__node")||It(N,"react-flow__edge")))return!0;if(!d&&!T&&!s&&!c&&!o||v||!c&&N.type==="dblclick"||It(N,C)&&N.type==="wheel"||It(N,_)&&N.type!=="wheel"||!o&&N.ctrlKey&&N.type==="wheel"||!T&&!s&&!G&&N.type==="wheel"||!d&&(N.type==="mousedown"||N.type==="touchstart")||Array.isArray(d)&&!d.includes(N.button)&&(N.type==="mousedown"||N.type==="touchstart"))return!1;const U=Array.isArray(d)&&d.includes(N.button)||!N.button||N.button<=1;return(!N.ctrlKey||N.type==="wheel")&&U})},[v,R,i,o,s,c,d,l,D]),y("div",{className:"react-flow__renderer",ref:z,style:zi,children:x})},xy=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function _y(){const{userSelectionActive:e,userSelectionRect:t}=de(xy,xe);return e&&t?y("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function ko(e,t){const n=e.find(r=>r.id===t.parentNode);if(n){const r=t.position.x+t.width-n.width,i=t.position.y+t.height-n.height;if(r>0||i>0||t.position.x<0||t.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,r>0&&(n.style.width+=r),i>0&&(n.style.height+=i),t.position.x<0){const o=Math.abs(t.position.x);n.position.x=n.position.x-o,n.style.width+=o,t.position.x=0}if(t.position.y<0){const o=Math.abs(t.position.y);n.position.y=n.position.y-o,n.style.height+=o,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function Ia(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,i)=>{const o=e.filter(a=>a.id===i.id);if(o.length===0)return r.push(i),r;const s={...i};for(const a of o)if(a)switch(a.type){case"select":{s.selected=a.selected;break}case"position":{typeof a.position<"u"&&(s.position=a.position),typeof a.positionAbsolute<"u"&&(s.positionAbsolute=a.positionAbsolute),typeof a.dragging<"u"&&(s.dragging=a.dragging),s.expandParent&&ko(r,s);break}case"dimensions":{typeof a.dimensions<"u"&&(s.width=a.dimensions.width,s.height=a.dimensions.height),typeof a.updateStyle<"u"&&(s.style={...s.style||{},...a.dimensions}),typeof a.resizing=="boolean"&&(s.resizing=a.resizing),s.expandParent&&ko(r,s);break}case"remove":return r}return r.push(s),r},n)}function za(e,t){return Ia(e,t)}function Ny(e,t){return Ia(e,t)}const ot=(e,t)=>({id:e,type:"select",selected:t});function Rt(e,t){return e.reduce((n,r)=>{const i=t.includes(r.id);return!r.selected&&i?(r.selected=!0,n.push(ot(r.id,!0))):r.selected&&!i&&(r.selected=!1,n.push(ot(r.id,!1))),n},[])}const Sr=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},Ey=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),Ra=w.memo(({isSelecting:e,selectionMode:t=gn.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:i,onPaneClick:o,onPaneContextMenu:s,onPaneScroll:a,onPaneMouseEnter:u,onPaneMouseMove:c,onPaneMouseLeave:l,children:d})=>{const f=w.useRef(null),h=ye(),p=w.useRef(0),g=w.useRef(0),b=w.useRef(),{userSelectionActive:m,elementsSelectable:x,dragging:C}=de(Ey,xe),_=()=>{h.setState({userSelectionActive:!1,userSelectionRect:null}),p.current=0,g.current=0},k=M=>{o==null||o(M),h.getState().resetSelectedElements(),h.setState({nodesSelectionActive:!1})},E=M=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){M.preventDefault();return}s==null||s(M)},$=a?M=>a(M):void 0,P=M=>{const{resetSelectedElements:v,domNode:D}=h.getState();if(b.current=D==null?void 0:D.getBoundingClientRect(),!x||!e||M.button!==0||M.target!==f.current||!b.current)return;const{x:S,y:I}=dt(M,b.current);v(),h.setState({userSelectionRect:{width:0,height:0,startX:S,startY:I,x:S,y:I}}),r==null||r(M)},z=M=>{const{userSelectionRect:v,nodeInternals:D,edges:S,transform:I,onNodesChange:O,onEdgesChange:N,nodeOrigin:T,getNodes:G}=h.getState();if(!e||!b.current||!v)return;h.setState({userSelectionActive:!0,nodesSelectionActive:!1});const U=dt(M,b.current),K=v.startX??0,X=v.startY??0,ee={...v,x:U.x<K?U.x:K,y:U.y<X?U.y:X,width:Math.abs(U.x-K),height:Math.abs(U.y-X)},ne=G(),re=ya(D,ee,I,t===gn.Partial,!0,T),A=ma(re,S).map(W=>W.id),B=re.map(W=>W.id);if(p.current!==B.length){p.current=B.length;const W=Rt(ne,B);W.length&&(O==null||O(W))}if(g.current!==A.length){g.current=A.length;const W=Rt(S,A);W.length&&(N==null||N(W))}h.setState({userSelectionRect:ee})},H=M=>{if(M.button!==0)return;const{userSelectionRect:v}=h.getState();!m&&v&&M.target===f.current&&(k==null||k(M)),h.setState({nodesSelectionActive:p.current>0}),_(),i==null||i(M)},R=M=>{m&&(h.setState({nodesSelectionActive:p.current>0}),i==null||i(M)),_()},L=x&&(e||m);return q("div",{className:_e(["react-flow__pane",{dragging:C,selection:e}]),onClick:L?void 0:Sr(k,f),onContextMenu:Sr(E,f),onWheel:Sr($,f),onMouseEnter:L?void 0:u,onMouseDown:L?P:void 0,onMouseMove:L?z:c,onMouseUp:L?H:void 0,onMouseLeave:L?R:l,ref:f,style:zi,children:[d,y(_y,{})]})});Ra.displayName="Pane";function Oa(e,t){if(!e.parentNode)return!1;const n=t.get(e.parentNode);return n?n.selected?!0:Oa(n,t):!1}function Do(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function Sy(e,t,n,r){return Array.from(e.values()).filter(i=>(i.selected||i.id===r)&&(!i.parentNode||!Oa(i,e))&&(i.draggable||t&&typeof i.draggable>"u")).map(i=>{var o,s;return{id:i.id,position:i.position||{x:0,y:0},positionAbsolute:i.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((o=i.positionAbsolute)==null?void 0:o.x)??0),y:n.y-(((s=i.positionAbsolute)==null?void 0:s.y)??0)},delta:{x:0,y:0},extent:i.extent,parentNode:i.parentNode,width:i.width,height:i.height}})}function Cy(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function Ga(e,t,n,r,i=[0,0],o){const s=Cy(e,e.extent||r);let a=s;if(e.extent==="parent")if(e.parentNode&&e.width&&e.height){const l=n.get(e.parentNode),{x:d,y:f}=Vt(l,i).positionAbsolute;a=l&&Me(d)&&Me(f)&&Me(l.width)&&Me(l.height)?[[d+e.width*i[0],f+e.height*i[1]],[d+l.width-e.width+e.width*i[0],f+l.height-e.height+e.height*i[1]]]:a}else o==null||o("005",Ze.error005()),a=s;else if(e.extent&&e.parentNode){const l=n.get(e.parentNode),{x:d,y:f}=Vt(l,i).positionAbsolute;a=[[e.extent[0][0]+d,e.extent[0][1]+f],[e.extent[1][0]+d,e.extent[1][1]+f]]}let u={x:0,y:0};if(e.parentNode){const l=n.get(e.parentNode);u=Vt(l,i).positionAbsolute}const c=a&&a!=="parent"?Si(t,a):t;return{position:{x:c.x-u.x,y:c.y-u.y},positionAbsolute:c}}function Cr({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(i=>({...n.get(i.id),position:i.position,positionAbsolute:i.positionAbsolute}));return[e?r.find(i=>i.id===e):r[0],r]}const Mo=(e,t,n,r)=>{const i=t.querySelectorAll(e);if(!i||!i.length)return null;const o=Array.from(i),s=t.getBoundingClientRect(),a={x:s.width*r[0],y:s.height*r[1]};return o.map(u=>{const c=u.getBoundingClientRect();return{id:u.getAttribute("data-handleid"),position:u.getAttribute("data-handlepos"),x:(c.left-s.left-a.x)/n,y:(c.top-s.top-a.y)/n,...Ei(u)}})};function nn(e,t,n){return n===void 0?n:r=>{const i=t().nodeInternals.get(e);i&&n(r,{...i})}}function Yr({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:o,multiSelectionActive:s,nodeInternals:a,onError:u}=t.getState(),c=a.get(e);if(!c){u==null||u("012",Ze.error012(e));return}t.setState({nodesSelectionActive:!1}),c.selected?(n||c.selected&&s)&&(o({nodes:[c]}),requestAnimationFrame(()=>{var l;return(l=r==null?void 0:r.current)==null?void 0:l.blur()})):i([e])}function $y(){const e=ye();return w.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:i,snapToGrid:o}=e.getState(),s=n.touches?n.touches[0].clientX:n.clientX,a=n.touches?n.touches[0].clientY:n.clientY,u={x:(s-r[0])/r[2],y:(a-r[1])/r[2]};return{xSnapped:o?i[0]*Math.round(u.x/i[0]):u.x,ySnapped:o?i[1]*Math.round(u.y/i[1]):u.y,...u}},[])}function $r(e){return(t,n,r)=>e==null?void 0:e(t,r)}function La({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:o,selectNodesOnDrag:s}){const a=ye(),[u,c]=w.useState(!1),l=w.useRef([]),d=w.useRef({x:null,y:null}),f=w.useRef(0),h=w.useRef(null),p=w.useRef({x:0,y:0}),g=w.useRef(null),b=w.useRef(!1),m=$y();return w.useEffect(()=>{if(e!=null&&e.current){const x=Ge(e.current),C=({x:k,y:E})=>{const{nodeInternals:$,onNodeDrag:P,onSelectionDrag:z,updateNodePositions:H,nodeExtent:R,snapGrid:L,snapToGrid:M,nodeOrigin:v,onError:D}=a.getState();d.current={x:k,y:E};let S=!1,I={x:0,y:0,x2:0,y2:0};if(l.current.length>1&&R){const N=Ti(l.current,v);I=Ci(N)}if(l.current=l.current.map(N=>{const T={x:k-N.distance.x,y:E-N.distance.y};M&&(T.x=L[0]*Math.round(T.x/L[0]),T.y=L[1]*Math.round(T.y/L[1]));const G=[[R[0][0],R[0][1]],[R[1][0],R[1][1]]];l.current.length>1&&R&&!N.extent&&(G[0][0]=N.positionAbsolute.x-I.x+R[0][0],G[1][0]=N.positionAbsolute.x+(N.width??0)-I.x2+R[1][0],G[0][1]=N.positionAbsolute.y-I.y+R[0][1],G[1][1]=N.positionAbsolute.y+(N.height??0)-I.y2+R[1][1]);const U=Ga(N,T,$,G,v,D);return S=S||N.position.x!==U.position.x||N.position.y!==U.position.y,N.position=U.position,N.positionAbsolute=U.positionAbsolute,N}),!S)return;H(l.current,!0,!0),c(!0);const O=i?P:$r(z);if(O&&g.current){const[N,T]=Cr({nodeId:i,dragItems:l.current,nodeInternals:$});O(g.current,N,T)}},_=()=>{if(!h.current)return;const[k,E]=aa(p.current,h.current);if(k!==0||E!==0){const{transform:$,panBy:P}=a.getState();d.current.x=(d.current.x??0)-k/$[2],d.current.y=(d.current.y??0)-E/$[2],P({x:k,y:E})&&C(d.current)}f.current=requestAnimationFrame(_)};if(t)x.on(".drag",null);else{const k=Rh().on("start",E=>{var S;const{nodeInternals:$,multiSelectionActive:P,domNode:z,nodesDraggable:H,unselectNodesAndEdges:R,onNodeDragStart:L,onSelectionDragStart:M}=a.getState(),v=i?L:$r(M);!s&&!P&&i&&((S=$.get(i))!=null&&S.selected||R()),i&&o&&s&&Yr({id:i,store:a,nodeRef:e});const D=m(E);if(d.current=D,l.current=Sy($,H,D,i),v&&l.current){const[I,O]=Cr({nodeId:i,dragItems:l.current,nodeInternals:$});v(E.sourceEvent,I,O)}h.current=(z==null?void 0:z.getBoundingClientRect())||null,p.current=dt(E.sourceEvent,h.current)}).on("drag",E=>{const $=m(E),{autoPanOnNodeDrag:P}=a.getState();!b.current&&P&&(b.current=!0,_()),(d.current.x!==$.xSnapped||d.current.y!==$.ySnapped)&&l.current&&(g.current=E.sourceEvent,p.current=dt(E.sourceEvent,h.current),C($))}).on("end",E=>{if(c(!1),b.current=!1,cancelAnimationFrame(f.current),l.current){const{updateNodePositions:$,nodeInternals:P,onNodeDragStop:z,onSelectionDragStop:H}=a.getState(),R=i?z:$r(H);if($(l.current,!1,!1),R){const[L,M]=Cr({nodeId:i,dragItems:l.current,nodeInternals:P});R(E.sourceEvent,L,M)}}}).filter(E=>{const $=E.target;return!E.button&&(!n||!Do($,`.${n}`,e))&&(!r||Do($,r,e))});return x.call(k),()=>{x.on(".drag",null)}}}},[e,t,n,r,o,a,i,s,m]),u}function Va(){const e=ye();return w.useCallback(n=>{const{nodeInternals:r,nodeExtent:i,updateNodePositions:o,getNodes:s,snapToGrid:a,snapGrid:u,onError:c,nodesDraggable:l}=e.getState(),d=s().filter(x=>x.selected&&(x.draggable||l&&typeof x.draggable>"u")),f=a?u[0]:5,h=a?u[1]:5,p=n.isShiftPressed?4:1,g=n.x*f*p,b=n.y*h*p,m=d.map(x=>{if(x.positionAbsolute){const C={x:x.positionAbsolute.x+g,y:x.positionAbsolute.y+b};a&&(C.x=u[0]*Math.round(C.x/u[0]),C.y=u[1]*Math.round(C.y/u[1]));const{positionAbsolute:_,position:k}=Ga(x,C,r,i,void 0,c);x.position=k,x.positionAbsolute=_}return x});o(m,!0,!1)},[])}const Ht={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var rn=e=>{const t=({id:n,type:r,data:i,xPos:o,yPos:s,xPosOrigin:a,yPosOrigin:u,selected:c,onClick:l,onMouseEnter:d,onMouseMove:f,onMouseLeave:h,onContextMenu:p,onDoubleClick:g,style:b,className:m,isDraggable:x,isSelectable:C,isConnectable:_,isFocusable:k,selectNodesOnDrag:E,sourcePosition:$,targetPosition:P,hidden:z,resizeObserver:H,dragHandle:R,zIndex:L,isParent:M,noDragClassName:v,noPanClassName:D,initialized:S,disableKeyboardA11y:I,ariaLabel:O,rfId:N})=>{const T=ye(),G=w.useRef(null),U=w.useRef($),K=w.useRef(P),X=w.useRef(r),ee=C||x||l||d||f||h,ne=Va(),re=nn(n,T.getState,d),A=nn(n,T.getState,f),B=nn(n,T.getState,h),W=nn(n,T.getState,p),j=nn(n,T.getState,g),ie=Q=>{if(C&&(!E||!x)&&Yr({id:n,store:T,nodeRef:G}),l){const le=T.getState().nodeInternals.get(n);le&&l(Q,{...le})}},ce=Q=>{if(!Fr(Q))if(ua.includes(Q.key)&&C){const le=Q.key==="Escape";Yr({id:n,store:T,unselect:le,nodeRef:G})}else!I&&x&&c&&Object.prototype.hasOwnProperty.call(Ht,Q.key)&&(T.setState({ariaLiveMessage:`Moved selected node ${Q.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~o}, y: ${~~s}`}),ne({x:Ht[Q.key].x,y:Ht[Q.key].y,isShiftPressed:Q.shiftKey}))};w.useEffect(()=>{if(G.current&&!z){const Q=G.current;return H==null||H.observe(Q),()=>H==null?void 0:H.unobserve(Q)}},[z]),w.useEffect(()=>{const Q=X.current!==r,le=U.current!==$,J=K.current!==P;G.current&&(Q||le||J)&&(Q&&(X.current=r),le&&(U.current=$),J&&(K.current=P),T.getState().updateNodeDimensions([{id:n,nodeElement:G.current,forceUpdate:!0}]))},[n,r,$,P]);const se=La({nodeRef:G,disabled:z||!x,noDragClassName:v,handleSelector:R,nodeId:n,isSelectable:C,selectNodesOnDrag:E});return z?null:y("div",{className:_e(["react-flow__node",`react-flow__node-${r}`,{[D]:x},m,{selected:c,selectable:C,parent:M,dragging:se}]),ref:G,style:{zIndex:L,transform:`translate(${a}px,${u}px)`,pointerEvents:ee?"all":"none",visibility:S?"visible":"hidden",...b},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:re,onMouseMove:A,onMouseLeave:B,onContextMenu:W,onClick:ie,onDoubleClick:j,onKeyDown:k?ce:void 0,tabIndex:k?0:void 0,role:k?"button":void 0,"aria-describedby":I?void 0:`${ka}-${N}`,"aria-label":O,children:y(Hg,{value:n,children:y(e,{id:n,data:i,type:r,xPos:o,yPos:s,selected:c,isConnectable:_,sourcePosition:$,targetPosition:P,dragging:se,dragHandle:R,zIndex:L})})})};return t.displayName="NodeWrapper",w.memo(t)};const Ay=e=>{const t=e.getNodes().filter(n=>n.selected);return{...Ti(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function ky({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=ye(),{width:i,height:o,x:s,y:a,transformString:u,userSelectionActive:c}=de(Ay,xe),l=Va(),d=w.useRef(null);if(w.useEffect(()=>{var p;n||(p=d.current)==null||p.focus({preventScroll:!0})},[n]),La({nodeRef:d}),c||!i||!o)return null;const f=e?p=>{const g=r.getState().getNodes().filter(b=>b.selected);e(p,g)}:void 0,h=p=>{Object.prototype.hasOwnProperty.call(Ht,p.key)&&l({x:Ht[p.key].x,y:Ht[p.key].y,isShiftPressed:p.shiftKey})};return y("div",{className:_e(["react-flow__nodesselection","react-flow__container",t]),style:{transform:u},children:y("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:n?void 0:-1,onKeyDown:n?void 0:h,style:{width:i,height:o,top:a,left:s}})})}var Dy=w.memo(ky);const My=e=>e.nodesSelectionActive,Ha=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:o,onPaneScroll:s,deleteKeyCode:a,onMove:u,onMoveStart:c,onMoveEnd:l,selectionKeyCode:d,selectionOnDrag:f,selectionMode:h,onSelectionStart:p,onSelectionEnd:g,multiSelectionKeyCode:b,panActivationKeyCode:m,zoomActivationKeyCode:x,elementsSelectable:C,zoomOnScroll:_,zoomOnPinch:k,panOnScroll:E,panOnScrollSpeed:$,panOnScrollMode:P,zoomOnDoubleClick:z,panOnDrag:H,defaultViewport:R,translateExtent:L,minZoom:M,maxZoom:v,preventScrolling:D,onSelectionContextMenu:S,noWheelClassName:I,noPanClassName:O,disableKeyboardA11y:N})=>{const T=de(My),G=yn(d),K=yn(m)||H,X=G||f&&K!==!0;return yy({deleteKeyCode:a,multiSelectionKeyCode:b}),y(vy,{onMove:u,onMoveStart:c,onMoveEnd:l,onPaneContextMenu:o,elementsSelectable:C,zoomOnScroll:_,zoomOnPinch:k,panOnScroll:E,panOnScrollSpeed:$,panOnScrollMode:P,zoomOnDoubleClick:z,panOnDrag:!G&&K,defaultViewport:R,translateExtent:L,minZoom:M,maxZoom:v,zoomActivationKeyCode:x,preventScrolling:D,noWheelClassName:I,noPanClassName:O,children:q(Ra,{onSelectionStart:p,onSelectionEnd:g,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:o,onPaneScroll:s,panOnDrag:K,isSelecting:!!X,selectionMode:h,children:[e,T&&y(Dy,{onSelectionContextMenu:S,noPanClassName:O,disableKeyboardA11y:N})]})})};Ha.displayName="FlowRenderer";var Ty=w.memo(Ha);function Py(e){return de(w.useCallback(n=>e?ya(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function Iy(e){const t={input:rn(e.input||Sa),default:rn(e.default||Wr),output:rn(e.output||$a),group:rn(e.group||Ii)},n={},r=Object.keys(e).filter(i=>!["input","default","output","group"].includes(i)).reduce((i,o)=>(i[o]=rn(e[o]||Wr),i),n);return{...t,...r}}const zy=({x:e,y:t,width:n,height:r,origin:i})=>!n||!r?{x:e,y:t}:i[0]<0||i[1]<0||i[0]>1||i[1]>1?{x:e,y:t}:{x:e-n*i[0],y:t-r*i[1]},Ry=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Ba=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,updateNodeDimensions:o,onError:s}=de(Ry,xe),a=Py(e.onlyRenderVisibleElements),u=w.useRef(),c=w.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const l=new ResizeObserver(d=>{const f=d.map(h=>({id:h.target.getAttribute("data-id"),nodeElement:h.target,forceUpdate:!0}));o(f)});return u.current=l,l},[]);return w.useEffect(()=>()=>{var l;(l=u==null?void 0:u.current)==null||l.disconnect()},[]),y("div",{className:"react-flow__nodes",style:zi,children:a.map(l=>{var k,E;let d=l.type||"default";e.nodeTypes[d]||(s==null||s("003",Ze.error003(d)),d="default");const f=e.nodeTypes[d]||e.nodeTypes.default,h=!!(l.draggable||t&&typeof l.draggable>"u"),p=!!(l.selectable||i&&typeof l.selectable>"u"),g=!!(l.connectable||n&&typeof l.connectable>"u"),b=!!(l.focusable||r&&typeof l.focusable>"u"),m=e.nodeExtent?Si(l.positionAbsolute,e.nodeExtent):l.positionAbsolute,x=(m==null?void 0:m.x)??0,C=(m==null?void 0:m.y)??0,_=zy({x,y:C,width:l.width??0,height:l.height??0,origin:e.nodeOrigin});return y(f,{id:l.id,className:l.className,style:l.style,type:d,data:l.data,sourcePosition:l.sourcePosition||Y.Bottom,targetPosition:l.targetPosition||Y.Top,hidden:l.hidden,xPos:x,yPos:C,xPosOrigin:_.x,yPosOrigin:_.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!l.selected,isDraggable:h,isSelectable:p,isConnectable:g,isFocusable:b,resizeObserver:c,dragHandle:l.dragHandle,zIndex:((k=l[pe])==null?void 0:k.z)??0,isParent:!!((E=l[pe])!=null&&E.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!l.width&&!!l.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:l.ariaLabel},l.id)})})};Ba.displayName="NodeRenderer";var Oy=w.memo(Ba);const Gy=(e,t,n)=>n===Y.Left?e-t:n===Y.Right?e+t:e,Ly=(e,t,n)=>n===Y.Top?e-t:n===Y.Bottom?e+t:e,To="react-flow__edgeupdater",Po=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:o,onMouseOut:s,type:a})=>y("circle",{onMouseDown:i,onMouseEnter:o,onMouseOut:s,className:_e([To,`${To}-${a}`]),cx:Gy(t,r,e),cy:Ly(n,r,e),r,stroke:"transparent",fill:"transparent"}),Vy=()=>!0;var zt=e=>{const t=({id:n,className:r,type:i,data:o,onClick:s,onEdgeDoubleClick:a,selected:u,animated:c,label:l,labelStyle:d,labelShowBg:f,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:g,style:b,source:m,target:x,sourceX:C,sourceY:_,targetX:k,targetY:E,sourcePosition:$,targetPosition:P,elementsSelectable:z,hidden:H,sourceHandleId:R,targetHandleId:L,onContextMenu:M,onMouseEnter:v,onMouseMove:D,onMouseLeave:S,edgeUpdaterRadius:I,onEdgeUpdate:O,onEdgeUpdateStart:N,onEdgeUpdateEnd:T,markerEnd:G,markerStart:U,rfId:K,ariaLabel:X,isFocusable:ee,isUpdatable:ne,pathOptions:re,interactionWidth:A})=>{const B=w.useRef(null),[W,j]=w.useState(!1),[ie,ce]=w.useState(!1),se=ye(),Q=w.useMemo(()=>`url(#${qr(U,K)})`,[U,K]),le=w.useMemo(()=>`url(#${qr(G,K)})`,[G,K]);if(H)return null;const J=ve=>{const{edges:Ce,addSelectedEdges:pt}=se.getState();if(z&&(se.setState({nodesSelectionActive:!1}),pt([n])),s){const gt=Ce.find(yt=>yt.id===n);s(ve,gt)}},ze=tn(n,se.getState,a),be=tn(n,se.getState,M),Yt=tn(n,se.getState,v),Kt=tn(n,se.getState,D),$t=tn(n,se.getState,S),ft=(ve,Ce)=>{if(ve.button!==0)return;const{edges:pt,isValidConnection:gt}=se.getState(),yt=Ce?x:m,xn=(Ce?L:R)||null,mt=Ce?"target":"source",fr=gt||Vy,hr=Ce,jt=pt.find(wt=>wt.id===n);ce(!0),N==null||N(ve,jt,mt);const pr=wt=>{ce(!1),T==null||T(wt,jt,mt)};xa({event:ve,handleId:xn,nodeId:yt,onConnect:wt=>O==null?void 0:O(jt,wt),isTarget:hr,getState:se.getState,setState:se.setState,isValidConnection:fr,edgeUpdaterType:mt,onEdgeUpdateEnd:pr})},tt=ve=>ft(ve,!0),At=ve=>ft(ve,!1),nt=()=>j(!0),ht=()=>j(!1),Xt=!z&&!s,kt=ve=>{var Ce;if(ua.includes(ve.key)&&z){const{unselectNodesAndEdges:pt,addSelectedEdges:gt,edges:yt}=se.getState();ve.key==="Escape"?((Ce=B.current)==null||Ce.blur(),pt({edges:[yt.find(mt=>mt.id===n)]})):gt([n])}};return q("g",{className:_e(["react-flow__edge",`react-flow__edge-${i}`,r,{selected:u,animated:c,inactive:Xt,updating:W}]),onClick:J,onDoubleClick:ze,onContextMenu:be,onMouseEnter:Yt,onMouseMove:Kt,onMouseLeave:$t,onKeyDown:ee?kt:void 0,tabIndex:ee?0:void 0,role:ee?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":X===null?void 0:X||`Edge from ${m} to ${x}`,"aria-describedby":ee?`${Da}-${K}`:void 0,ref:B,children:[!ie&&y(e,{id:n,source:m,target:x,selected:u,animated:c,label:l,labelStyle:d,labelShowBg:f,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:g,data:o,style:b,sourceX:C,sourceY:_,targetX:k,targetY:E,sourcePosition:$,targetPosition:P,sourceHandleId:R,targetHandleId:L,markerStart:Q,markerEnd:le,pathOptions:re,interactionWidth:A}),ne&&q(Se,{children:[(ne==="source"||ne===!0)&&y(Po,{position:$,centerX:C,centerY:_,radius:I,onMouseDown:tt,onMouseEnter:nt,onMouseOut:ht,type:"source"}),(ne==="target"||ne===!0)&&y(Po,{position:P,centerX:k,centerY:E,radius:I,onMouseDown:At,onMouseEnter:nt,onMouseOut:ht,type:"target"})]})]})};return t.displayName="EdgeWrapper",w.memo(t)};function Hy(e){const t={default:zt(e.default||Zn),straight:zt(e.bezier||ki),step:zt(e.step||Ai),smoothstep:zt(e.step||lr),simplebezier:zt(e.simplebezier||$i)},n={},r=Object.keys(e).filter(i=>!["default","bezier"].includes(i)).reduce((i,o)=>(i[o]=zt(e[o]||Zn),i),n);return{...t,...r}}function Io(e,t,n=null){const r=((n==null?void 0:n.x)||0)+t.x,i=((n==null?void 0:n.y)||0)+t.y,o=(n==null?void 0:n.width)||t.width,s=(n==null?void 0:n.height)||t.height;switch(e){case Y.Top:return{x:r+o/2,y:i};case Y.Right:return{x:r+o,y:i+s/2};case Y.Bottom:return{x:r+o/2,y:i+s};case Y.Left:return{x:r,y:i+s/2}}}function zo(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const By=(e,t,n,r,i,o)=>{const s=Io(n,e,t),a=Io(o,r,i);return{sourceX:s.x,sourceY:s.y,targetX:a.x,targetY:a.y}};function Fy({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:i,targetHeight:o,width:s,height:a,transform:u}){const c={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+r,t.y+o)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const l=Ci({x:(0-u[0])/u[2],y:(0-u[1])/u[2],width:s/u[2],height:a/u[2]}),d=Math.max(0,Math.min(l.x2,c.x2)-Math.max(l.x,c.x)),f=Math.max(0,Math.min(l.y2,c.y2)-Math.max(l.y,c.y));return Math.ceil(d*f)>0}function Ro(e){var r,i,o,s,a;const t=((r=e==null?void 0:e[pe])==null?void 0:r.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)<"u"&&typeof((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.y)<"u";return[{x:((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.x)||0,y:((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const Uy=[{level:0,isMaxLevel:!0,edges:[]}];function qy(e,t,n=!1){let r=-1;const i=e.reduce((s,a)=>{var l,d;const u=Me(a.zIndex);let c=u?a.zIndex:0;if(n){const f=t.get(a.target),h=t.get(a.source),p=a.selected||(f==null?void 0:f.selected)||(h==null?void 0:h.selected),g=Math.max(((l=h==null?void 0:h[pe])==null?void 0:l.z)||0,((d=f==null?void 0:f[pe])==null?void 0:d.z)||0,1e3);c=(u?a.zIndex:0)+(p?g:0)}return s[c]?s[c].push(a):s[c]=[a],r=c>r?c:r,s},{}),o=Object.entries(i).map(([s,a])=>{const u=+s;return{edges:a,level:u,isMaxLevel:u===r}});return o.length===0?Uy:o}function Wy(e,t,n){const r=de(w.useCallback(i=>e?i.edges.filter(o=>{const s=t.get(o.source),a=t.get(o.target);return(s==null?void 0:s.width)&&(s==null?void 0:s.height)&&(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&Fy({sourcePos:s.positionAbsolute||{x:0,y:0},targetPos:a.positionAbsolute||{x:0,y:0},sourceWidth:s.width,sourceHeight:s.height,targetWidth:a.width,targetHeight:a.height,width:i.width,height:i.height,transform:i.transform})}):i.edges,[e,t]));return qy(r,t,n)}const Yy=({color:e="none",strokeWidth:t=1})=>y("polyline",{stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:t,fill:"none",points:"-5,-4 0,0 -5,4"}),Ky=({color:e="none",strokeWidth:t=1})=>y("polyline",{stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:t,fill:e,points:"-5,-4 0,0 -5,4 -5,-4"}),Oo={[jn.Arrow]:Yy,[jn.ArrowClosed]:Ky};function Xy(e){const t=ye();return w.useMemo(()=>{var i,o;return Object.prototype.hasOwnProperty.call(Oo,e)?Oo[e]:((o=(i=t.getState()).onError)==null||o.call(i,"009",Ze.error009(e)),null)},[e])}const jy=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:o="strokeWidth",strokeWidth:s,orient:a="auto-start-reverse"})=>{const u=Xy(t);return u?y("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:o,orient:a,refX:"0",refY:"0",children:y(u,{color:n,strokeWidth:s})}):null},Zy=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((i,o)=>([o.markerStart,o.markerEnd].forEach(s=>{if(s&&typeof s=="object"){const a=qr(s,t);r.includes(a)||(i.push({id:a,color:s.color||e,...s}),r.push(a))}}),i),[]).sort((i,o)=>i.id.localeCompare(o.id))},Fa=({defaultColor:e,rfId:t})=>{const n=de(w.useCallback(Zy({defaultColor:e,rfId:t}),[e,t]),(r,i)=>!(r.length!==i.length||r.some((o,s)=>o.id!==i[s].id)));return y("defs",{children:n.map(r=>y(jy,{id:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient},r.id))})};Fa.displayName="MarkerDefinitions";var Jy=w.memo(Fa);const Qy=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),Ua=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:i,noPanClassName:o,onEdgeUpdate:s,onEdgeContextMenu:a,onEdgeMouseEnter:u,onEdgeMouseMove:c,onEdgeMouseLeave:l,onEdgeClick:d,edgeUpdaterRadius:f,onEdgeDoubleClick:h,onEdgeUpdateStart:p,onEdgeUpdateEnd:g,children:b})=>{const{edgesFocusable:m,edgesUpdatable:x,elementsSelectable:C,width:_,height:k,connectionMode:E,nodeInternals:$,onError:P}=de(Qy,xe),z=Wy(t,$,n);return _?q(Se,{children:[z.map(({level:H,edges:R,isMaxLevel:L})=>q("svg",{style:{zIndex:H},width:_,height:k,className:"react-flow__edges react-flow__container",children:[L&&y(Jy,{defaultColor:e,rfId:r}),y("g",{children:R.map(M=>{const[v,D,S]=Ro($.get(M.source)),[I,O,N]=Ro($.get(M.target));if(!S||!N)return null;let T=M.type||"default";i[T]||(P==null||P("011",Ze.error011(T)),T="default");const G=i[T]||i.default,U=E===Ct.Strict?O.target:(O.target??[]).concat(O.source??[]),K=zo(D.source,M.sourceHandle),X=zo(U,M.targetHandle),ee=(K==null?void 0:K.position)||Y.Bottom,ne=(X==null?void 0:X.position)||Y.Top,re=!!(M.focusable||m&&typeof M.focusable>"u"),A=typeof s<"u"&&(M.updatable||x&&typeof M.updatable>"u");if(!K||!X)return P==null||P("008",Ze.error008(K,M)),null;const{sourceX:B,sourceY:W,targetX:j,targetY:ie}=By(v,K,ee,I,X,ne);return y(G,{id:M.id,className:_e([M.className,o]),type:T,data:M.data,selected:!!M.selected,animated:!!M.animated,hidden:!!M.hidden,label:M.label,labelStyle:M.labelStyle,labelShowBg:M.labelShowBg,labelBgStyle:M.labelBgStyle,labelBgPadding:M.labelBgPadding,labelBgBorderRadius:M.labelBgBorderRadius,style:M.style,source:M.source,target:M.target,sourceHandleId:M.sourceHandle,targetHandleId:M.targetHandle,markerEnd:M.markerEnd,markerStart:M.markerStart,sourceX:B,sourceY:W,targetX:j,targetY:ie,sourcePosition:ee,targetPosition:ne,elementsSelectable:C,onEdgeUpdate:s,onContextMenu:a,onMouseEnter:u,onMouseMove:c,onMouseLeave:l,onClick:d,edgeUpdaterRadius:f,onEdgeDoubleClick:h,onEdgeUpdateStart:p,onEdgeUpdateEnd:g,rfId:r,ariaLabel:M.ariaLabel,isFocusable:re,isUpdatable:A,pathOptions:"pathOptions"in M?M.pathOptions:void 0,interactionWidth:M.interactionWidth},M.id)})})]},H)),b]}):null};Ua.displayName="EdgeRenderer";var em=w.memo(Ua);const tm=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function nm({children:e}){const t=de(tm);return y("div",{className:"react-flow__viewport react-flow__container",style:{transform:t},children:e})}function rm(e){const t=dr(),n=w.useRef(!1);w.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const im={[Y.Left]:Y.Right,[Y.Right]:Y.Left,[Y.Top]:Y.Bottom,[Y.Bottom]:Y.Top},qa=({nodeId:e,handleType:t,style:n,type:r=ut.Bezier,CustomComponent:i,connectionStatus:o})=>{var E,$,P;const{fromNode:s,handleId:a,toX:u,toY:c,connectionMode:l}=de(w.useCallback(z=>({fromNode:z.nodeInternals.get(e),handleId:z.connectionHandleId,toX:(z.connectionPosition.x-z.transform[0])/z.transform[2],toY:(z.connectionPosition.y-z.transform[1])/z.transform[2],connectionMode:z.connectionMode}),[e]),xe),d=(E=s==null?void 0:s[pe])==null?void 0:E.handleBounds;let f=d==null?void 0:d[t];if(l===Ct.Loose&&(f=f||(d==null?void 0:d[t==="source"?"target":"source"])),!s||!f)return null;const h=a?f.find(z=>z.id===a):f[0],p=h?h.x+h.width/2:(s.width??0)/2,g=h?h.y+h.height/2:s.height??0,b=((($=s.positionAbsolute)==null?void 0:$.x)??0)+p,m=(((P=s.positionAbsolute)==null?void 0:P.y)??0)+g,x=h==null?void 0:h.position,C=x?im[x]:null;if(!x||!C)return null;if(i)return y(i,{connectionLineType:r,connectionLineStyle:n,fromNode:s,fromHandle:h,fromX:b,fromY:m,toX:u,toY:c,fromPosition:x,toPosition:C,connectionStatus:o});let _="";const k={sourceX:b,sourceY:m,sourcePosition:x,targetX:u,targetY:c,targetPosition:C};return r===ut.Bezier?[_]=Di(k):r===ut.Step?[_]=Ur({...k,borderRadius:0}):r===ut.SmoothStep?[_]=Ur(k):r===ut.SimpleBezier?[_]=ha(k):_=`M${b},${m} ${u},${c}`,y("path",{d:_,fill:"none",className:"react-flow__connection-path",style:n})};qa.displayName="ConnectionLine";const om=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function sm({containerStyle:e,style:t,type:n,component:r}){const{nodeId:i,handleType:o,nodesConnectable:s,width:a,height:u,connectionStatus:c}=de(om,xe);return!(i&&o&&a&&s)?null:y("svg",{style:e,width:a,height:u,className:"react-flow__edges react-flow__connectionline react-flow__container",children:y("g",{className:_e(["react-flow__connection",c]),children:y(qa,{nodeId:i,handleType:o,style:t,type:n,CustomComponent:r,connectionStatus:c})})})}function Go(e,t){return w.useRef(null),ye(),w.useMemo(()=>t(e),[e])}const Wa=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:i,onInit:o,onNodeClick:s,onEdgeClick:a,onNodeDoubleClick:u,onEdgeDoubleClick:c,onNodeMouseEnter:l,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:h,onSelectionContextMenu:p,onSelectionStart:g,onSelectionEnd:b,connectionLineType:m,connectionLineStyle:x,connectionLineComponent:C,connectionLineContainerStyle:_,selectionKeyCode:k,selectionOnDrag:E,selectionMode:$,multiSelectionKeyCode:P,panActivationKeyCode:z,zoomActivationKeyCode:H,deleteKeyCode:R,onlyRenderVisibleElements:L,elementsSelectable:M,selectNodesOnDrag:v,defaultViewport:D,translateExtent:S,minZoom:I,maxZoom:O,preventScrolling:N,defaultMarkerColor:T,zoomOnScroll:G,zoomOnPinch:U,panOnScroll:K,panOnScrollSpeed:X,panOnScrollMode:ee,zoomOnDoubleClick:ne,panOnDrag:re,onPaneClick:A,onPaneMouseEnter:B,onPaneMouseMove:W,onPaneMouseLeave:j,onPaneScroll:ie,onPaneContextMenu:ce,onEdgeUpdate:se,onEdgeContextMenu:Q,onEdgeMouseEnter:le,onEdgeMouseMove:J,onEdgeMouseLeave:ze,edgeUpdaterRadius:be,onEdgeUpdateStart:Yt,onEdgeUpdateEnd:Kt,noDragClassName:$t,noWheelClassName:ft,noPanClassName:tt,elevateEdgesOnSelect:At,disableKeyboardA11y:nt,nodeOrigin:ht,nodeExtent:Xt,rfId:kt})=>{const ve=Go(e,Iy),Ce=Go(t,Hy);return rm(o),y(Ty,{onPaneClick:A,onPaneMouseEnter:B,onPaneMouseMove:W,onPaneMouseLeave:j,onPaneContextMenu:ce,onPaneScroll:ie,deleteKeyCode:R,selectionKeyCode:k,selectionOnDrag:E,selectionMode:$,onSelectionStart:g,onSelectionEnd:b,multiSelectionKeyCode:P,panActivationKeyCode:z,zoomActivationKeyCode:H,elementsSelectable:M,onMove:n,onMoveStart:r,onMoveEnd:i,zoomOnScroll:G,zoomOnPinch:U,zoomOnDoubleClick:ne,panOnScroll:K,panOnScrollSpeed:X,panOnScrollMode:ee,panOnDrag:re,defaultViewport:D,translateExtent:S,minZoom:I,maxZoom:O,onSelectionContextMenu:p,preventScrolling:N,noDragClassName:$t,noWheelClassName:ft,noPanClassName:tt,disableKeyboardA11y:nt,children:q(nm,{children:[y(em,{edgeTypes:Ce,onEdgeClick:a,onEdgeDoubleClick:c,onEdgeUpdate:se,onlyRenderVisibleElements:L,onEdgeContextMenu:Q,onEdgeMouseEnter:le,onEdgeMouseMove:J,onEdgeMouseLeave:ze,onEdgeUpdateStart:Yt,onEdgeUpdateEnd:Kt,edgeUpdaterRadius:be,defaultMarkerColor:T,noPanClassName:tt,elevateEdgesOnSelect:!!At,disableKeyboardA11y:nt,rfId:kt,children:y(sm,{style:x,type:m,component:C,containerStyle:_})}),y("div",{className:"react-flow__edgelabel-renderer"}),y(Oy,{nodeTypes:ve,onNodeClick:s,onNodeDoubleClick:u,onNodeMouseEnter:l,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:h,selectNodesOnDrag:v,onlyRenderVisibleElements:L,noPanClassName:tt,noDragClassName:$t,disableKeyboardA11y:nt,nodeOrigin:ht,nodeExtent:Xt,rfId:kt})]})})};Wa.displayName="GraphView";var am=w.memo(Wa);const Kr=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],rt={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Kr,nodeExtent:Kr,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Ct.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:zg,isValidConnection:void 0},cm=()=>Yd((e,t)=>({...rt,setNodes:n=>{const{nodeInternals:r,nodeOrigin:i,elevateNodesOnSelect:o}=t();e({nodeInternals:Er(n,r,i,o)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(i=>({...r,...i}))})},setDefaultNodesAndEdges:(n,r)=>{const i=typeof n<"u",o=typeof r<"u",s=i?Er(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:s,edges:o?r:[],hasDefaultNodes:i,hasDefaultEdges:o})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:i,fitViewOnInit:o,fitViewOnInitDone:s,fitViewOnInitOptions:a,domNode:u,nodeOrigin:c}=t(),l=u==null?void 0:u.querySelector(".react-flow__viewport");if(!l)return;const d=window.getComputedStyle(l),{m22:f}=new window.DOMMatrixReadOnly(d.transform),h=n.reduce((g,b)=>{const m=i.get(b.id);if(m){const x=Ei(b.nodeElement);!!(x.width&&x.height&&(m.width!==x.width||m.height!==x.height||b.forceUpdate))&&(i.set(m.id,{...m,[pe]:{...m[pe],handleBounds:{source:Mo(".source",b.nodeElement,f,c),target:Mo(".target",b.nodeElement,f,c)}},...x}),g.push({id:m.id,type:"dimensions",dimensions:x}))}return g},[]);Ta(i,c);const p=s||o&&!s&&Pa(t,{initial:!0,...a});e({nodeInternals:new Map(i),fitViewOnInitDone:p}),(h==null?void 0:h.length)>0&&(r==null||r(h))},updateNodePositions:(n,r=!0,i=!1)=>{const{triggerNodeChanges:o}=t(),s=n.map(a=>{const u={id:a.id,type:"position",dragging:i};return r&&(u.positionAbsolute=a.positionAbsolute,u.position=a.position),u});o(s)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:i,hasDefaultNodes:o,nodeOrigin:s,getNodes:a,elevateNodesOnSelect:u}=t();if(n!=null&&n.length){if(o){const c=za(n,a()),l=Er(c,i,s,u);e({nodeInternals:l})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:i,getNodes:o}=t();let s,a=null;r?s=n.map(u=>ot(u,!0)):(s=Rt(o(),n),a=Rt(i,[])),Tn({changedNodes:s,changedEdges:a,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:i,getNodes:o}=t();let s,a=null;r?s=n.map(u=>ot(u,!0)):(s=Rt(i,n),a=Rt(o(),[])),Tn({changedNodes:a,changedEdges:s,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:i,getNodes:o}=t(),s=n||o(),a=r||i,u=s.map(l=>(l.selected=!1,ot(l.id,!1))),c=a.map(l=>ot(l.id,!1));Tn({changedNodes:u,changedEdges:c,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:i}=t();r==null||r.scaleExtent([n,i]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:i}=t();r==null||r.scaleExtent([i,n]),e({maxZoom:n})},setTranslateExtent:n=>{var r;(r=t().d3Zoom)==null||r.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),o=r().filter(a=>a.selected).map(a=>ot(a.id,!1)),s=n.filter(a=>a.selected).map(a=>ot(a.id,!1));Tn({changedNodes:o,changedEdges:s,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(i=>{i.positionAbsolute=Si(i.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:i,height:o,d3Zoom:s,d3Selection:a,translateExtent:u}=t();if(!s||!a||!n.x&&!n.y)return!1;const c=lt.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),l=[[0,0],[i,o]],d=s==null?void 0:s.constrain()(c,l,u);return s.transform(a,d),r[0]!==d.x||r[1]!==d.y||r[2]!==d.k},cancelConnection:()=>e({connectionNodeId:rt.connectionNodeId,connectionHandleId:rt.connectionHandleId,connectionHandleType:rt.connectionHandleType,connectionStatus:rt.connectionStatus,connectionStartHandle:rt.connectionStartHandle,connectionEndHandle:rt.connectionEndHandle}),reset:()=>e({...rt})}),Object.is),Ya=({children:e})=>{const t=w.useRef(null);return t.current||(t.current=cm()),y($g,{value:t.current,children:e})};Ya.displayName="ReactFlowProvider";const Ka=({children:e})=>w.useContext(ur)?y(Se,{children:e}):y(Ya,{children:e});Ka.displayName="ReactFlowWrapper";const um={input:Sa,default:Wr,output:$a,group:Ii},lm={default:Zn,straight:ki,step:Ai,smoothstep:lr,simplebezier:$i},dm=[0,0],fm=[15,15],hm={x:0,y:0,zoom:1},pm={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Xa=w.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:o=um,edgeTypes:s=lm,onNodeClick:a,onEdgeClick:u,onInit:c,onMove:l,onMoveStart:d,onMoveEnd:f,onConnect:h,onConnectStart:p,onConnectEnd:g,onClickConnectStart:b,onClickConnectEnd:m,onNodeMouseEnter:x,onNodeMouseMove:C,onNodeMouseLeave:_,onNodeContextMenu:k,onNodeDoubleClick:E,onNodeDragStart:$,onNodeDrag:P,onNodeDragStop:z,onNodesDelete:H,onEdgesDelete:R,onSelectionChange:L,onSelectionDragStart:M,onSelectionDrag:v,onSelectionDragStop:D,onSelectionContextMenu:S,onSelectionStart:I,onSelectionEnd:O,connectionMode:N=Ct.Strict,connectionLineType:T=ut.Bezier,connectionLineStyle:G,connectionLineComponent:U,connectionLineContainerStyle:K,deleteKeyCode:X="Backspace",selectionKeyCode:ee="Shift",selectionOnDrag:ne=!1,selectionMode:re=gn.Full,panActivationKeyCode:A="Space",multiSelectionKeyCode:B=Xn()?"Meta":"Control",zoomActivationKeyCode:W=Xn()?"Meta":"Control",snapToGrid:j=!1,snapGrid:ie=fm,onlyRenderVisibleElements:ce=!1,selectNodesOnDrag:se=!0,nodesDraggable:Q,nodesConnectable:le,nodesFocusable:J,nodeOrigin:ze=dm,edgesFocusable:be,edgesUpdatable:Yt,elementsSelectable:Kt,defaultViewport:$t=hm,minZoom:ft=.5,maxZoom:tt=2,translateExtent:At=Kr,preventScrolling:nt=!0,nodeExtent:ht,defaultMarkerColor:Xt="#b1b1b7",zoomOnScroll:kt=!0,zoomOnPinch:ve=!0,panOnScroll:Ce=!1,panOnScrollSpeed:pt=.5,panOnScrollMode:gt=_t.Free,zoomOnDoubleClick:yt=!0,panOnDrag:xn=!0,onPaneClick:mt,onPaneMouseEnter:fr,onPaneMouseMove:hr,onPaneMouseLeave:jt,onPaneScroll:pr,onPaneContextMenu:Ri,children:wt,onEdgeUpdate:rc,onEdgeContextMenu:ic,onEdgeDoubleClick:oc,onEdgeMouseEnter:sc,onEdgeMouseMove:ac,onEdgeMouseLeave:cc,onEdgeUpdateStart:uc,onEdgeUpdateEnd:lc,edgeUpdaterRadius:dc=10,onNodesChange:fc,onEdgesChange:hc,noDragClassName:pc="nodrag",noWheelClassName:gc="nowheel",noPanClassName:Oi="nopan",fitView:yc=!1,fitViewOptions:mc,connectOnClick:wc=!0,attributionPosition:bc,proOptions:vc,defaultEdgeOptions:xc,elevateNodesOnSelect:_c=!0,elevateEdgesOnSelect:Nc=!1,disableKeyboardA11y:Gi=!1,autoPanOnConnect:Ec=!0,autoPanOnNodeDrag:Sc=!0,connectionRadius:Cc=20,isValidConnection:$c,onError:Ac,style:kc,id:Li,...Dc},Mc)=>{const gr=Li||"1";return y("div",{...Dc,style:{...kc,...pm},ref:Mc,className:_e(["react-flow",i]),"data-testid":"rf__wrapper",id:Li,children:q(Ka,{children:[y(am,{onInit:c,onMove:l,onMoveStart:d,onMoveEnd:f,onNodeClick:a,onEdgeClick:u,onNodeMouseEnter:x,onNodeMouseMove:C,onNodeMouseLeave:_,onNodeContextMenu:k,onNodeDoubleClick:E,nodeTypes:o,edgeTypes:s,connectionLineType:T,connectionLineStyle:G,connectionLineComponent:U,connectionLineContainerStyle:K,selectionKeyCode:ee,selectionOnDrag:ne,selectionMode:re,deleteKeyCode:X,multiSelectionKeyCode:B,panActivationKeyCode:A,zoomActivationKeyCode:W,onlyRenderVisibleElements:ce,selectNodesOnDrag:se,defaultViewport:$t,translateExtent:At,minZoom:ft,maxZoom:tt,preventScrolling:nt,zoomOnScroll:kt,zoomOnPinch:ve,zoomOnDoubleClick:yt,panOnScroll:Ce,panOnScrollSpeed:pt,panOnScrollMode:gt,panOnDrag:xn,onPaneClick:mt,onPaneMouseEnter:fr,onPaneMouseMove:hr,onPaneMouseLeave:jt,onPaneScroll:pr,onPaneContextMenu:Ri,onSelectionContextMenu:S,onSelectionStart:I,onSelectionEnd:O,onEdgeUpdate:rc,onEdgeContextMenu:ic,onEdgeDoubleClick:oc,onEdgeMouseEnter:sc,onEdgeMouseMove:ac,onEdgeMouseLeave:cc,onEdgeUpdateStart:uc,onEdgeUpdateEnd:lc,edgeUpdaterRadius:dc,defaultMarkerColor:Xt,noDragClassName:pc,noWheelClassName:gc,noPanClassName:Oi,elevateEdgesOnSelect:Nc,rfId:gr,disableKeyboardA11y:Gi,nodeOrigin:ze,nodeExtent:ht}),y(iy,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:h,onConnectStart:p,onConnectEnd:g,onClickConnectStart:b,onClickConnectEnd:m,nodesDraggable:Q,nodesConnectable:le,nodesFocusable:J,edgesFocusable:be,edgesUpdatable:Yt,elementsSelectable:Kt,elevateNodesOnSelect:_c,minZoom:ft,maxZoom:tt,nodeExtent:ht,onNodesChange:fc,onEdgesChange:hc,snapToGrid:j,snapGrid:ie,connectionMode:N,translateExtent:At,connectOnClick:wc,defaultEdgeOptions:xc,fitView:yc,fitViewOptions:mc,onNodesDelete:H,onEdgesDelete:R,onNodeDragStart:$,onNodeDrag:P,onNodeDragStop:z,onSelectionDrag:v,onSelectionDragStart:M,onSelectionDragStop:D,noPanClassName:Oi,nodeOrigin:ze,rfId:gr,autoPanOnConnect:Ec,autoPanOnNodeDrag:Sc,onError:Ac,connectionRadius:Cc,isValidConnection:$c}),y(ny,{onSelectionChange:L}),wt,y(kg,{proOptions:vc,position:bc}),y(uy,{rfId:gr,disableKeyboardA11y:Gi})]})})});Xa.displayName="ReactFlow";function ja(e){return t=>{const[n,r]=w.useState(t),i=w.useCallback(o=>r(s=>e(o,s)),[]);return[n,r,i]}}const gm=ja(za),ym=ja(Ny);function mm(){return y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:y("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function wm(){return y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:y("path",{d:"M0 0h32v4.2H0z"})})}function bm(){return y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:y("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function vm(){return y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:y("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function xm(){return y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:y("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}const an=({children:e,className:t,...n})=>y("button",{type:"button",className:_e(["react-flow__controls-button",t]),...n,children:e});an.displayName="ControlButton";const _m=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),Za=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:o,onZoomOut:s,onFitView:a,onInteractiveChange:u,className:c,children:l,position:d="bottom-left"})=>{const f=ye(),[h,p]=w.useState(!1),{isInteractive:g,minZoomReached:b,maxZoomReached:m}=de(_m,xe),{zoomIn:x,zoomOut:C,fitView:_}=dr();if(w.useEffect(()=>{p(!0)},[]),!h)return null;const k=()=>{x(),o==null||o()},E=()=>{C(),s==null||s()},$=()=>{_(i),a==null||a()},P=()=>{f.setState({nodesDraggable:!g,nodesConnectable:!g,elementsSelectable:!g}),u==null||u(!g)};return q(sa,{className:_e(["react-flow__controls",c]),position:d,style:e,"data-testid":"rf__controls",children:[t&&q(Se,{children:[y(an,{onClick:k,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:m,children:y(mm,{})}),y(an,{onClick:E,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:b,children:y(wm,{})})]}),n&&y(an,{className:"react-flow__controls-fitview",onClick:$,title:"fit view","aria-label":"fit view",children:y(bm,{})}),r&&y(an,{className:"react-flow__controls-interactive",onClick:P,title:"toggle interactivity","aria-label":"toggle interactivity",children:g?y(xm,{}):y(vm,{})}),l]})};Za.displayName="Controls";var Nm=w.memo(Za),Ve;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Ve||(Ve={}));function Em({color:e,dimensions:t,lineWidth:n}){return y("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function Sm({color:e,radius:t}){return y("circle",{cx:t,cy:t,r:t,fill:e})}const Cm={[Ve.Dots]:"#91919a",[Ve.Lines]:"#eee",[Ve.Cross]:"#e2e2e2"},$m={[Ve.Dots]:1,[Ve.Lines]:1,[Ve.Cross]:6},Am=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Ja({id:e,variant:t=Ve.Dots,gap:n=20,size:r,lineWidth:i=1,offset:o=2,color:s,style:a,className:u}){const c=w.useRef(null),{transform:l,patternId:d}=de(Am,xe),f=s||Cm[t],h=r||$m[t],p=t===Ve.Dots,g=t===Ve.Cross,b=Array.isArray(n)?n:[n,n],m=[b[0]*l[2]||1,b[1]*l[2]||1],x=h*l[2],C=g?[x,x]:m,_=p?[x/o,x/o]:[C[0]/o,C[1]/o];return q("svg",{className:_e(["react-flow__background",u]),style:{...a,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:c,"data-testid":"rf__background",children:[y("pattern",{id:d+e,x:l[0]%m[0],y:l[1]%m[1],width:m[0],height:m[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${_[0]},-${_[1]})`,children:p?y(Sm,{color:f,radius:x/o}):y(Em,{dimensions:C,color:f,lineWidth:i})}),y("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${d+e})`})]})}Ja.displayName="Background";var km=w.memo(Ja);const Xr=e=>{const{sourceX:t,sourceY:n,targetX:r,targetY:i,sourcePosition:o,targetPosition:s,style:a={},markerEnd:u}=e,[c]=Di({sourceX:t,sourceY:n,sourcePosition:o,targetX:r,targetY:i,targetPosition:s});return q(Se,{children:[y("path",{style:a,className:ge(["react-flow__edge-path-selector"]),d:c,markerEnd:u,fillRule:"evenodd"}),y("path",{style:a,className:ge(["react-flow__edge-path"]),d:c,markerEnd:u,fillRule:"evenodd"})]})},jr=e=>t=>y(Xr,{...t,...e});try{Xr.displayName="CustomEdge",Xr.__docgenInfo={description:"",displayName:"CustomEdge",props:{}}}catch{}try{jr.displayName="edgeFunction",jr.__docgenInfo={description:"",displayName:"edgeFunction",props:{}}}catch{}const Qa=e=>{var t,n,r;return{id:e.id,type:e.type,position:e.position,name:(t=e==null?void 0:e.data)==null?void 0:t.name,description:(n=e==null?void 0:e.data)==null?void 0:n.description,content:(r=e==null?void 0:e.data)==null?void 0:r.content}},Dm=e=>e.map(Qa),Mm=e=>e.map(t=>({id:t==null?void 0:t.id,sourceId:t==null?void 0:t.source,type:t==null?void 0:t.type,targetId:t==null?void 0:t.target,name:t==null?void 0:t.label,sourceHandle:t.sourceHandle??void 0,targetHandle:t.targetHandle??void 0})),ec=e=>({id:e.id,type:e.type,position:e.position,data:{name:e.name,description:e.description,content:e==null?void 0:e.content}}),Ar=e=>e.map(ec),kr=e=>e.filter(t=>t.sourceId&&t.targetId).map(t=>({id:t.id,source:t.sourceId,type:(t==null?void 0:t.type)||"edge",target:t.targetId,label:t.name,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),Tm=e=>{const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.focus(),t.select();try{document.execCommand("copy")}catch(n){console.error("Unable to copy to clipboard",n)}document.body.removeChild(t)},Lo=async e=>{window.isSecureContext&&navigator.clipboard?await navigator.clipboard.writeText(e):Tm(e)},Pm=async()=>{try{return navigator.clipboard.readText()}catch{return""}},Im=e=>typeof e!="object"?!1:Array.isArray(e==null?void 0:e.nodes),zm=(e,t)=>{const n=w.useCallback(async o=>{try{if(!e)return;const s=o.map(l=>({id:l.id,type:l.type,data:l.data,position:l.position,width:l.width,height:l.height})),a=s.map(l=>l.id),u=[];s.length>0&&e.getEdges().forEach(d=>{a.includes(d.source)&&a.includes(d.target)&&u.push({type:d.type,source:d.source,target:d.target})}),await Lo(JSON.stringify({nodes:s,edges:u}))}catch(s){Oe.error(s.message)}},[e]),r=w.useCallback(async()=>{if(!e)return;const o=await Pm();if(!o)return;const s=JSON.parse(o);if(!Im(s))throw new Error("invalid clipboard");if(!Array.isArray(s==null?void 0:s.nodes))throw new Error("invalid clipboard");const a=s.nodes.reduce((p,g)=>({...p,[g.id]:ct()}),{}),u=Object.keys(a),c=e.getNodes().find(p=>u.includes(p.id)),l=s.nodes.find(p=>p.id===(c==null?void 0:c.id)),d={x:s.nodes.reduce((p,g)=>p+g.position.x,0)/s.nodes.length,y:s.nodes.reduce((p,g)=>p+g.position.y,0)/s.nodes.length},f=s.nodes.map(p=>{const g={x:p.position.x,y:p.position.y};if(c&&l)p.id===c.id?(g.x=c.position.x,g.y=c.position.y-20):(g.x=c.position.x-l.position.x+p.position.x,g.y=c.position.y-l.position.y+p.position.y-20);else if(t){const b=t.getBoundingClientRect(),m={x:b.width/2,y:b.height/2},x=e.project(m);g.x=p.position.x+x.x-d.x-(p.width||0)/2,g.y=p.position.y+x.y-d.y-(p.height||0)/2}return{...p,position:g,id:a[p.id]}}),h=s.edges.map(p=>({id:ct(),type:p.type,source:a[p.source],target:a[p.target]}));if(e.addNodes(f),e.addEdges(h),c)try{await Lo(JSON.stringify({nodes:f,edges:h}))}catch{}},[e]),i=w.useCallback(o=>{if(!o)return;const s=async a=>{if(a.code==="KeyC"&&(a.ctrlKey||a.metaKey)&&o.length>0)await n(o),Oe.success("Copied to clipboard!");else if(a.code==="KeyV"&&(a.ctrlKey||a.metaKey))try{await r(),Oe.success("Pasted from clipboard!")}catch{Oe.error("Invalid clipboard data.")}};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[n,r]);return{copyNodes:n,pasteNodes:r,register:i}},Zr=({inputDisabled:e,onPaste:t})=>{const n=Ie(i=>i.components||[],$e),r=w.useCallback((i,o)=>{const s=i.target;if(!s)return;const{offsetX:a,offsetY:u}=i.nativeEvent,{height:c,width:l}=s.getBoundingClientRect(),d={x:a/l,y:u/c};i.dataTransfer.effectAllowed="move",i.dataTransfer.setData("application/reactflow",o),i.dataTransfer.setData("relativePosition",JSON.stringify(d))},[]);return q("div",{className:"wrapper",children:[y(oe.Text,{style:{marginBottom:"1rem"},children:"Drag and Drop components"}),q("div",{className:"list",children:[y("div",{className:ge(["component",e&&"disabled"]),onDragStart:i=>r(i,"inputNode"),draggable:!e,children:y(oe.Text,{strong:!0,type:e?"secondary":void 0,children:"Input"})}),y("div",{className:ge(["component"]),onDragStart:i=>r(i,"outputNode"),draggable:!0,children:y(oe.Text,{strong:!0,children:"Output"})}),y("div",{className:ge(["component"]),onDragStart:i=>r(i,"decisionTableNode"),draggable:!0,children:y(oe.Text,{strong:!0,children:"Decision Table"})}),y("div",{className:ge(["component"]),onDragStart:i=>r(i,"functionNode"),draggable:!0,children:y(oe.Text,{strong:!0,children:"Function"})}),y("div",{className:ge(["component"]),onDragStart:i=>r(i,"expressionNode"),draggable:!0,children:y(oe.Text,{strong:!0,children:"Expression"})}),y("div",{className:ge(["component"]),onDragStart:i=>r(i,"switchNode"),draggable:!0,children:y(oe.Text,{strong:!0,children:"Switch"})}),n.map(i=>y("div",{className:ge(["component"]),onDragStart:o=>r(o,i.type),draggable:!0,children:y(oe.Text,{strong:!0,children:i.name})},i.type))]}),y(Ne,{onClick:t,type:"default",style:{marginTop:"auto"},children:"Paste from clipboard"})]})};try{Zr.displayName="GraphComponents",Zr.__docgenInfo={description:"",displayName:"GraphComponents",props:{inputDisabled:{defaultValue:null,description:"",name:"inputDisabled",required:!1,type:{name:"boolean"}},onPaste:{defaultValue:null,description:"",name:"onPaste",required:!1,type:{name:"(() => void)"}},components:{defaultValue:null,description:"",name:"components",required:!1,type:{name:"ReactNode[]"}}}}}catch{}const Jr=({nodes:e,edges:t,removeEdges:n,removeNodes:r,onClose:i,onCopy:o})=>q("div",{className:"node-form",children:[y(Ne,{className:"button",type:"text",onClick:i,icon:y(Qn,{})}),(e==null?void 0:e.length)>0&&q(Se,{children:[y(oe.Text,{style:{display:"block"},children:"Nodes selected:"}),y("ul",{style:{padding:"0 1rem 0"},children:e.map(s=>y("li",{children:y(oe.Text,{strong:!0,children:s.data.name})},s.id))})]}),(t==null?void 0:t.length)>0&&q(Se,{children:[y(oe.Text,{style:{display:"block",margin:"0.5rem 0 0"},children:"Edges selected:"}),y("ul",{style:{padding:"0 1rem 0"},children:t.map(s=>y("li",{children:y(oe.Text,{strong:!0,children:s.id})},s.id))})]}),q(Uo,{gap:8,horizontal:!0,children:[(t==null?void 0:t.length)===0&&y(Ne,{onClick:()=>o==null?void 0:o(e),children:"Copy"}),y(Ne,{danger:!0,onClick:()=>{(t==null?void 0:t.length)>0&&(n==null||n(t)),(e==null?void 0:e.length)>0&&(r==null||r(e))},children:"Remove"})]})]});try{Jr.displayName="MultiNodeForm",Jr.__docgenInfo={description:"",displayName:"MultiNodeForm",props:{nodes:{defaultValue:null,description:"",name:"nodes",required:!0,type:{name:"Node[]"}},edges:{defaultValue:null,description:"",name:"edges",required:!0,type:{name:"Edge[]"}},onCopy:{defaultValue:null,description:"",name:"onCopy",required:!1,type:{name:"((node: Node[]) => void)"}},removeNodes:{defaultValue:null,description:"",name:"removeNodes",required:!1,type:{name:"((nodes: Node[]) => void)"}},removeEdges:{defaultValue:null,description:"",name:"removeEdges",required:!1,type:{name:"((edges: Edge[]) => void)"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!1,type:{name:"(() => void)"}}}}}catch{}const Qr=({node:e,onChange:t,removeNode:n,onClose:r,onCopy:i})=>{var l,d,f,h,p;const[o]=Dt.useForm();w.useEffect(()=>{var g,b,m;o.setFieldsValue({name:(g=e==null?void 0:e.data)==null?void 0:g.name,description:(b=e==null?void 0:e.data)==null?void 0:b.description,content:(m=e==null?void 0:e.data)==null?void 0:m.content})},[e==null?void 0:e.id]),w.useEffect(()=>{var g,b,m;o.setFieldsValue({name:(g=e==null?void 0:e.data)==null?void 0:g.name,description:(b=e==null?void 0:e.data)==null?void 0:b.description,content:(m=e==null?void 0:e.data)==null?void 0:m.content})},[e==null?void 0:e.data]);const s=Ie(g=>g.components||[],$e),a=w.useMemo(()=>s.find(g=>g.type===e.type),[s,e==null?void 0:e.type]),u=w.useMemo(()=>{switch(e.type){case"inputNode":return"Input";case"outputNode":return"Output";case"decisionTableNode":return"Decision Table";case"decisionNode":return"Decision";case"functionNode":return"Function";case"expressionNode":return"Expression";case"switchNode":return"Switch"}return"Unknown"},[e==null?void 0:e.type]),c=g=>{t==null||t(Vn(e,b=>{b.data.content=g}))};return y("div",{className:"node-form",children:q(Dt,{form:o,layout:"vertical",className:"form",initialValues:{name:(l=e==null?void 0:e.data)==null?void 0:l.name,description:(d=e==null?void 0:e.data)==null?void 0:d.description,content:(f=e==null?void 0:e.data)==null?void 0:f.content},onValuesChange:(g,b)=>{t==null||t({id:e==null?void 0:e.id,data:b})},children:[y(Ne,{className:"button",type:"text",onClick:r,icon:y(Qn,{})}),y(Dt.Item,{noStyle:!0,children:q(me,{direction:"vertical",children:[y(oe.Text,{children:"Type"}),y(oe.Text,{strong:!0,children:(a==null?void 0:a.type)||u})]})}),(e==null?void 0:e.type)!=="inputNode"&&(e==null?void 0:e.type)!=="outputNode"&&q(Se,{children:[y(Dt.Item,{name:["name"],label:"Name",children:y(Hi,{placeholder:"Name"})}),y(Dt.Item,{name:["description"],label:"Description",children:y(Hi.TextArea,{placeholder:"Description",rows:3,style:{resize:"none"}})})]}),a&&(a==null?void 0:a.renderForm)&&((p=a==null?void 0:a.renderForm)==null?void 0:p.call(a,{value:(h=e==null?void 0:e.data)==null?void 0:h.content,onChange:c})),y(Dt.Item,{children:q(Uo,{gap:8,horizontal:!0,children:[y(Ne,{onClick:()=>i==null?void 0:i(e),children:"Copy"}),y(Ne,{danger:!0,onClick:()=>n==null?void 0:n(e),children:"Remove"})]})})]})})};try{Qr.displayName="NodeForm",Qr.__docgenInfo={description:"",displayName:"NodeForm",props:{node:{defaultValue:null,description:"",name:"node",required:!0,type:{name:"Node"}},onCopy:{defaultValue:null,description:"",name:"onCopy",required:!1,type:{name:"((node: Node) => void)"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((data: any) => void)"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!1,type:{name:"(() => void)"}},removeNode:{defaultValue:null,description:"",name:"removeNode",required:!1,type:{name:"((node: Node) => void)"}}}}}catch{}const tc=(e,t)=>{var n,r,i;return((r=(n=t==null?void 0:t.error)==null?void 0:n.data)==null?void 0:r.nodeId)===e?(i=t==null?void 0:t.error)==null?void 0:i.data:null},st=e=>{var h;const{id:t,data:n,isConnectable:r,type:i}=e,o=w.useRef(),{openTab:s,simulate:a,customComponents:u}=Ie(({simulate:p,openTab:g,components:b})=>({openTab:g,simulate:p,customComponents:b??[]}),$e),c=w.useMemo(()=>u.find(p=>p.type===i),[u,i]),l=w.useMemo(()=>{var p,g;return(g=(p=a==null?void 0:a.result)==null?void 0:p.trace)==null?void 0:g[t]},[a]),d=tc(t,a),f=()=>{var p;c?(p=c==null?void 0:c.onOpen)==null||p.call(c,Qa(e)):s==null||s(t)};return q("div",{className:ge(["node",l&&"simulated",d&&"error",i==="outputNode"&&"output",i==="inputNode"&&"input"]),onClick:()=>{o.current&&performance.now()-o.current<250&&i!=="inputNode"&&i!=="outputNode"&&i!=="switchNode"&&f(),o.current=performance.now()},children:[l&&(i==="decisionNode"||i==="expressionNode"||i==="decisionTableNode"||i==="functionNode")&&y("div",{className:"performance",children:y(oe.Text,{style:{fontSize:10},children:(l==null?void 0:l.performance)||null})}),(i==="decisionTableNode"||i==="decisionNode"||i==="functionNode"||i==="expressionNode"||i==="outputNode")&&y(He,{type:"target",position:Y.Left,isConnectable:r}),q(me,{direction:"vertical",size:0,className:"full-width",style:{textAlign:"center"},children:[y("div",{className:"text-ellipsis",children:y(oe.Text,{strong:!0,children:n==null?void 0:n.name})}),y("div",{className:"text-ellipsis",children:q(oe.Text,{style:{fontSize:12},children:[i==="decisionTableNode"&&q(me,{size:4,style:{maxWidth:"100%"},children:[y(jo,{}),y("span",{children:"Decision Table"})]}),i==="functionNode"&&q(me,{size:4,style:{maxWidth:"100%"},children:[y(Xo,{}),y("span",{children:"Function"})]}),i==="expressionNode"&&q(me,{size:4,style:{maxWidth:"100%"},children:[y(Ko,{}),y("span",{children:"Expression"})]}),i==="inputNode"&&q(me,{size:4,style:{maxWidth:"100%"},children:[y(Hn,{}),y("span",{children:"Input"})]}),i==="outputNode"&&q(me,{size:4,style:{maxWidth:"100%"},children:[y(Hn,{}),y("span",{children:"Output"})]}),c&&q(me,{size:4,style:{maxWidth:"100%"},children:[(h=c==null?void 0:c.renderIcon)==null?void 0:h.call(c),y("span",{children:c.name})]})]})}),c&&(c==null?void 0:c.onOpen)&&y(oe.Link,{onClick:()=>{f()},children:"Open"}),!c&&i!=="inputNode"&&i!=="outputNode"&&y(oe.Link,{onClick:()=>{f()},children:"Open"})]}),(i==="decisionTableNode"||i==="decisionNode"||i==="functionNode"||i==="expressionNode"||i==="inputNode")&&y(He,{type:"source",position:Y.Right,isConnectable:r})]})},at=e=>{const{data:t,isConnectable:n,type:r,selected:i}=e,o=Ie(a=>a.components||[],$e),s=w.useMemo(()=>o.find(a=>a.type===r),[o,r]);return q("div",{className:ge(["node",i&&"selected",r==="outputNode"&&"output",r==="inputNode"&&"input"]),children:[(r==="decisionTableNode"||r==="decisionNode"||r==="functionNode"||r==="expressionNode"||r==="outputNode"||s)&&y(He,{type:"target",position:Y.Left,isConnectable:n}),q(me,{direction:"vertical",size:0,className:"full-width",style:{textAlign:"center"},children:[y("div",{className:"text-ellipsis",children:y(oe.Text,{strong:!0,children:t==null?void 0:t.name})}),y("div",{className:"text-ellipsis",children:q(oe.Text,{style:{fontSize:12},children:[r==="decisionTableNode"&&q(me,{size:4,style:{maxWidth:"100%"},children:[y(jo,{}),y("span",{children:"Decision Table"}),(t==null?void 0:t.hitPolicy)==="COLLECT"&&y("span",{children:"(c)"})]}),r==="functionNode"&&q(me,{size:4,style:{maxWidth:"100%"},children:[y(Xo,{}),y("span",{children:"Function"})]}),r==="expressionNode"&&q(me,{size:4,style:{maxWidth:"100%"},children:[y(Ko,{}),y("span",{children:"Expression"})]}),r==="inputNode"&&q(me,{size:4,style:{maxWidth:"100%"},children:[y(Hn,{}),y("span",{children:"Input"})]}),r==="outputNode"&&q(me,{size:4,style:{maxWidth:"100%"},children:[y(Hn,{}),y("span",{children:"Output"})]}),s&&q(me,{size:4,style:{maxWidth:"100%"},children:[y(gu,{}),y("span",{children:s==null?void 0:s.name})]})]})})]}),(r==="decisionTableNode"||r==="decisionNode"||r==="functionNode"||r==="expressionNode"||r==="inputNode"||s)&&y(He,{type:"source",position:Y.Right,isConnectable:n})]})};try{st.displayName="GraphNode",st.__docgenInfo={description:"",displayName:"GraphNode",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"any"}},dragHandle:{defaultValue:null,description:"",name:"dragHandle",required:!1,type:{name:"string"}},selected:{defaultValue:null,description:"",name:"selected",required:!1,type:{name:"boolean"}},type:{defaultValue:null,description:"",name:"type",required:!1,type:{name:"string"}},zIndex:{defaultValue:null,description:"",name:"zIndex",required:!1,type:{name:"number"}},isConnectable:{defaultValue:null,description:"",name:"isConnectable",required:!0,type:{name:"boolean"}},xPos:{defaultValue:null,description:"",name:"xPos",required:!0,type:{name:"number"}},yPos:{defaultValue:null,description:"",name:"yPos",required:!0,type:{name:"number"}},dragging:{defaultValue:null,description:"",name:"dragging",required:!0,type:{name:"boolean"}},targetPosition:{defaultValue:null,description:"",name:"targetPosition",required:!1,type:{name:"enum",value:[{value:'"left"'},{value:'"top"'},{value:'"right"'},{value:'"bottom"'}]}},sourcePosition:{defaultValue:null,description:"",name:"sourcePosition",required:!1,type:{name:"enum",value:[{value:'"left"'},{value:'"top"'},{value:'"right"'},{value:'"bottom"'}]}}}}}catch{}try{at.displayName="GraphNodeEdit",at.__docgenInfo={description:"",displayName:"GraphNodeEdit",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"any"}},dragHandle:{defaultValue:null,description:"",name:"dragHandle",required:!1,type:{name:"string"}},selected:{defaultValue:null,description:"",name:"selected",required:!1,type:{name:"boolean"}},type:{defaultValue:null,description:"",name:"type",required:!1,type:{name:"string"}},zIndex:{defaultValue:null,description:"",name:"zIndex",required:!1,type:{name:"number"}},isConnectable:{defaultValue:null,description:"",name:"isConnectable",required:!0,type:{name:"boolean"}},xPos:{defaultValue:null,description:"",name:"xPos",required:!0,type:{name:"number"}},yPos:{defaultValue:null,description:"",name:"yPos",required:!0,type:{name:"number"}},dragging:{defaultValue:null,description:"",name:"dragging",required:!0,type:{name:"boolean"}},targetPosition:{defaultValue:null,description:"",name:"targetPosition",required:!1,type:{name:"enum",value:[{value:'"left"'},{value:'"top"'},{value:'"right"'},{value:'"bottom"'}]}},sourcePosition:{defaultValue:null,description:"",name:"sourcePosition",required:!1,type:{name:"enum",value:[{value:'"left"'},{value:'"top"'},{value:'"right"'},{value:'"bottom"'}]}}}}}catch{}const ei=e=>{var f,h;const{id:t}=e,n=w.useRef(null),{node:r,nodeTrace:i,updateNode:o,disabled:s,simulate:a}=Ie(({decisionGraph:p,simulate:g,updateNode:b,disabled:m,configurable:x})=>{var C,_;return{node:((p==null?void 0:p.nodes)??[]).find(k=>k.id===t),nodeTrace:(_=(C=g==null?void 0:g.result)==null?void 0:C.trace)==null?void 0:_[t],updateNode:b,disabled:m,configurable:x,simulate:g}},$e),u=tc(t,a),c=((f=r==null?void 0:r.content)==null?void 0:f.statements)||[],l=((h=r==null?void 0:r.content)==null?void 0:h.hitPolicy)||"first",d=p=>{o(t,Vn(r==null?void 0:r.content,g=>{g.hitPolicy=p}))};return q("div",{ref:n,className:ge(["node","switch",i&&"simulated",u&&"error"]),children:[i&&y("div",{className:"performance",children:y(oe.Text,{style:{fontSize:10},children:(i==null?void 0:i.performance)||null})}),q("div",{className:"switchNode",children:[q("div",{className:"switchNode__title",children:[y("div",{className:"text-ellipsis",children:y(oe.Text,{strong:!0,children:r==null?void 0:r.name})}),y("div",{className:"text-ellipsis",children:y(oe.Text,{style:{fontSize:12},children:q(me,{size:4,style:{maxWidth:"100%"},children:[y(Yo,{}),y("span",{children:"Switch Node"})]})})}),y(He,{type:"target",position:Y.Left,isConnectable:!1})]}),q("div",{className:"switchNode__conditionsText",children:[y(oe.Text,{style:{fontSize:12},children:"Conditions"}),y(Wo,{trigger:["click"],placement:"bottomRight",menu:{items:[{key:"first",label:"First",onClick:()=>{d("first")}},{key:"collect",label:"Collect",onClick:()=>{d("collect")}}]},children:q(oe.Link,{style:{fontSize:12,textTransform:"capitalize"},children:[l," ",y(qo,{})]})})]}),y("div",{className:"switchNode__body nodrag",children:c.map(p=>{var g;return y(nc,{value:p.condition,id:p.id,isConnectable:!1,configurable:!1,disabled:s,isActive:(((g=i==null?void 0:i.traceData)==null?void 0:g.statements)||[]).some(b=>(b==null?void 0:b.id)&&(b==null?void 0:b.id)===(p==null?void 0:p.id)),onChange:b=>{o(t,Vn(r==null?void 0:r.content,m=>{m.statements=(m.statements||[]).map(x=>p.id===x.id?{id:x.id,condition:b}:x)}))}},p.id)})})]})]})},ti=e=>{var c,l;const{id:t,data:n,isConnectable:r}=e,{setNodes:i}=dr(),o=w.useRef(null),s=((c=n==null?void 0:n.content)==null?void 0:c.statements)||[],a=((l=n==null?void 0:n.content)==null?void 0:l.hitPolicy)||"first",u=d=>{i(f=>f.map(h=>{var p;return h.id!==t?h:{...h,data:{...(h==null?void 0:h.data)??{},content:{...((p=h==null?void 0:h.data)==null?void 0:p.content)??{},hitPolicy:d}}}}))};return y("div",{ref:o,className:ge(["node","switch"]),children:q("div",{className:"switchNode",children:[q("div",{className:"switchNode__title",children:[y("div",{className:"text-ellipsis",children:y(oe.Text,{strong:!0,children:n==null?void 0:n.name})}),y("div",{className:"text-ellipsis",children:y(oe.Text,{style:{fontSize:12},children:q(me,{size:4,style:{maxWidth:"100%"},children:[y(Yo,{}),y("span",{children:"Switch Node"})]})})}),y(He,{type:"target",position:Y.Left,isConnectable:r})]}),q("div",{className:"switchNode__conditionsText",children:[y(oe.Text,{style:{fontSize:12},children:"Conditions"}),y(Wo,{trigger:["click"],placement:"bottomRight",menu:{items:[{key:"first",label:"First",onClick:()=>{u("first")}},{key:"collect",label:"Collect",onClick:()=>{u("collect")}}]},children:q(oe.Link,{style:{fontSize:12,textTransform:"capitalize"},children:[a," ",y(qo,{})]})})]}),y("div",{className:"switchNode__body edit nodrag",children:s.map(d=>y(nc,{value:d.condition,id:d.id,isConnectable:r,onDelete:()=>{i(f=>f.map(h=>{var p,g,b;return h.id!==t?h:{...h,data:{...(h==null?void 0:h.data)??{},content:{...((p=h==null?void 0:h.data)==null?void 0:p.content)??{},statements:(((b=(g=h==null?void 0:h.data)==null?void 0:g.content)==null?void 0:b.statements)||[]).filter(m=>(m==null?void 0:m.id)!==(d==null?void 0:d.id))}}}}))},onChange:f=>{i(h=>h.map(p=>{var g,b,m;return p.id!==t?p:{...p,data:{...(p==null?void 0:p.data)??{},content:{...((g=p==null?void 0:p.data)==null?void 0:g.content)??{},statements:(((m=(b=p==null?void 0:p.data)==null?void 0:b.content)==null?void 0:m.statements)??[]).map(x=>(x==null?void 0:x.id)!==d.id?x:{...x,condition:f})}}}}))}},d.id))}),y(Ne,{className:"switchNode__addButton",type:"link",size:"small",icon:y(Zc,{}),onClick:()=>{i(d=>d.map(f=>{var h,p,g;return f.id!==t?f:{...f,data:{...(f==null?void 0:f.data)??{},content:{...((h=f==null?void 0:f.data)==null?void 0:h.content)??{},statements:[...((g=(p=f==null?void 0:f.data)==null?void 0:p.content)==null?void 0:g.statements)??[],{id:ct(),condition:""}]}}}}))}})]})})},nc=({id:e,value:t,isConnectable:n,onChange:r,disabled:i,configurable:o=!0,onDelete:s,isActive:a})=>{const[u,c]=w.useState(t);w.useLayoutEffect(()=>{u!==t&&c(t)},[t]);const l=d=>{c(d),r==null||r(d)};return q("div",{className:ge("switchNode__statement"),children:[q("div",{className:"switchNode__statement__inputArea",children:[y(Jc,{style:{fontSize:12,lineHeight:"20px"},value:u,maxRows:4,readOnly:i,onChange:d=>l==null?void 0:l(typeof d.target.value=="string"?d.target.value:"")}),!i&&o&&y(Ne,{className:"switchNode__statement__more",size:"small",type:"text",icon:y(Tu,{}),onClick:()=>s==null?void 0:s()}),a&&y(Su,{className:"switchNode__statement__activeIndicator"})]}),y(He,{id:e,type:"source",position:Y.Right,isConnectable:n})]})};try{ei.displayName="GraphSwitchNode",ei.__docgenInfo={description:"",displayName:"GraphSwitchNode",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"any"}},dragHandle:{defaultValue:null,description:"",name:"dragHandle",required:!1,type:{name:"string"}},selected:{defaultValue:null,description:"",name:"selected",required:!1,type:{name:"boolean"}},type:{defaultValue:null,description:"",name:"type",required:!1,type:{name:"string"}},zIndex:{defaultValue:null,description:"",name:"zIndex",required:!1,type:{name:"number"}},isConnectable:{defaultValue:null,description:"",name:"isConnectable",required:!0,type:{name:"boolean"}},xPos:{defaultValue:null,description:"",name:"xPos",required:!0,type:{name:"number"}},yPos:{defaultValue:null,description:"",name:"yPos",required:!0,type:{name:"number"}},dragging:{defaultValue:null,description:"",name:"dragging",required:!0,type:{name:"boolean"}},targetPosition:{defaultValue:null,description:"",name:"targetPosition",required:!1,type:{name:"enum",value:[{value:'"left"'},{value:'"top"'},{value:'"right"'},{value:'"bottom"'}]}},sourcePosition:{defaultValue:null,description:"",name:"sourcePosition",required:!1,type:{name:"enum",value:[{value:'"left"'},{value:'"top"'},{value:'"right"'},{value:'"bottom"'}]}}}}}catch{}try{ti.displayName="GraphSwitchNodeEdit",ti.__docgenInfo={description:"",displayName:"GraphSwitchNodeEdit",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"any"}},dragHandle:{defaultValue:null,description:"",name:"dragHandle",required:!1,type:{name:"string"}},selected:{defaultValue:null,description:"",name:"selected",required:!1,type:{name:"boolean"}},type:{defaultValue:null,description:"",name:"type",required:!1,type:{name:"string"}},zIndex:{defaultValue:null,description:"",name:"zIndex",required:!1,type:{name:"number"}},isConnectable:{defaultValue:null,description:"",name:"isConnectable",required:!0,type:{name:"boolean"}},xPos:{defaultValue:null,description:"",name:"xPos",required:!0,type:{name:"number"}},yPos:{defaultValue:null,description:"",name:"yPos",required:!0,type:{name:"number"}},dragging:{defaultValue:null,description:"",name:"dragging",required:!0,type:{name:"boolean"}},targetPosition:{defaultValue:null,description:"",name:"targetPosition",required:!1,type:{name:"enum",value:[{value:'"left"'},{value:'"top"'},{value:'"right"'},{value:'"bottom"'}]}},sourcePosition:{defaultValue:null,description:"",name:"sourcePosition",required:!1,type:{name:"enum",value:[{value:'"left"'},{value:'"top"'},{value:'"right"'},{value:'"bottom"'}]}}}}}catch{}const Vo="application/vnd.gorules.decision",ni=w.forwardRef(({reactFlowProOptions:e,className:t,onDisableTabs:n,hideExportImport:r},i)=>{var ee,ne,re;const o=w.useRef(null),[s,a]=w.useState(),u=w.useRef(null),[c,l]=w.useState(!1),[d,f,h]=gm([]),[p,g,b]=ym([]),m=(ee=d==null?void 0:d.filter)==null?void 0:ee.call(d,A=>A.type==="inputNode"),x=(ne=d==null?void 0:d.filter)==null?void 0:ne.call(d,A=>A==null?void 0:A.selected),C=(re=p==null?void 0:p.filter)==null?void 0:re.call(p,A=>A==null?void 0:A.selected),{nodes:_,edges:k,setDecisionGraph:E,disabled:$,closeTab:P,openTab:z,onAddNode:H,onEditGraph:R,onChange:L}=Ie(({decisionGraph:A,setDecisionGraph:B,disabled:W,closeTab:j,openTab:ie,onChange:ce,onAddNode:se,onEditGraph:Q})=>({nodes:(A==null?void 0:A.nodes)??[],edges:(A==null?void 0:A.edges)??[],setDecisionGraph:B,disabled:W,closeTab:j,openTab:ie,onChange:ce,onAddNode:se,onEditGraph:Q}),$e),M=zm(s,o.current||void 0);w.useEffect(()=>{R==null||R(c),n==null||n(c)},[c]),w.useEffect(()=>M.register(c?x:void 0),[x,M.register,c]);const v=(A,B)=>{var ce,se;if(!o.current||!s)return;if(!B){const Q=(ce=o==null?void 0:o.current)==null?void 0:ce.getBoundingClientRect(),le={x:Q.width/2,y:Q.height/2};B=s==null?void 0:s.project(le)}if(A!=="decisionTableNode"&&A!=="functionNode"&&A!=="expressionNode"&&A!=="switchNode"&&A!=="inputNode"&&A!=="outputNode")return H==null?void 0:H(A,B);const W=(se=(_||[]).filter(Q=>(Q==null?void 0:Q.type)===A))==null?void 0:se.length,j={};if(A==="decisionTableNode"){const Q={id:ct(),name:"Input",type:"expression"},le={field:"output",id:ct(),name:"Output",type:"expression"};j.content={hitPolicy:"first",inputs:[Q],outputs:[le],rules:[]}}else A==="functionNode"?j.content=nu:A==="inputNode"?j.name="Request":A==="outputNode"?j.name="Response":A==="expressionNode"?j.content={expressions:[]}:A==="switchNode"&&(j.content={statements:[{id:ct(),condition:""}]});const ie={id:ct(),type:A,position:B,data:{name:`${A} ${W+1}`,...j}};f(Q=>Q.concat(ie))},D=A=>{f(B=>(B||[]).map(W=>W.id===(A==null?void 0:A.id)?{...W||{},...A||{},type:W.type,data:{...(W==null?void 0:W.data)||{},...(A==null?void 0:A.data)||{}}}:W))},S=A=>{if(A.preventDefault(),!o.current||!s)return;const B=o.current.getBoundingClientRect(),W=A.dataTransfer.getData("application/reactflow");let j;try{j=JSON.parse(A.dataTransfer.getData("relativePosition"))}catch{return}const ie=s.project({x:A.clientX-B.left,y:A.clientY-B.top});ie.x-=Math.round(j.x*180/10)*10,ie.y-=Math.round(j.y*80/10)*10,v(W,ie)},I=A=>{A.preventDefault(),A.dataTransfer.dropEffect="move"},O=A=>{g(B=>pa({...A,type:"edge",id:ct()},B))},N=w.useMemo(()=>({edge:jr({nodes:_})}),[]),T=w.useMemo(()=>({decisionTableNode:st,decisionNode:st,functionNode:st,expressionNode:st,switchNode:ei,inputNode:st,outputNode:st}),[]),G=w.useMemo(()=>({decisionTableNode:at,decisionNode:at,functionNode:at,expressionNode:at,switchNode:ti,inputNode:at,outputNode:at}),[]),U=()=>{var A;try{const B=Mm(p),W=Dm(d);if(((A=W.filter(ie=>(ie==null?void 0:ie.type)==="inputNode"))==null?void 0:A.length)>1){Oe.error("Maximum 1 input");return}const j=new yi;if(B.forEach(ie=>{j.mergeEdge(ie.sourceId,ie.targetId)}),qd(j))throw new Error("Graph is cyclic");E({nodes:W,edges:B}),L==null||L({nodes:W,edges:B}),l(!1)}catch(B){Oe.error(B==null?void 0:B.message)}},K=async A=>{var j,ie;const B=(j=A==null?void 0:A.target)==null?void 0:j.files,W=new FileReader;W.onload=function(ce){var se;try{const Q=JSON.parse((se=ce==null?void 0:ce.target)==null?void 0:se.result);if((Q==null?void 0:Q.contentType)!==Vo)throw new Error("Invalid content type");const le=Array.isArray(Q==null?void 0:Q.nodes)?Q.nodes:[],J=le.map(be=>be.id),ze=Q.edges.filter(be=>J.includes(be==null?void 0:be.targetId)&&J.includes(be==null?void 0:be.sourceId));E({edges:ze,nodes:le}),L==null||L({edges:ze,nodes:le})}catch(Q){Oe.error(Q.message)}},W.readAsText((ie=Array.from(B))==null?void 0:ie[0],"UTF-8")},X=async A=>{try{const B=`${A.replaceAll(".json","")}.json`,W=JSON.stringify({contentType:Vo,nodes:_,edges:k},null,2),j=new Blob([W],{type:"application/json"}),ie=URL.createObjectURL(j),ce=window.document.createElement("a");ce.href=ie,ce.download=B,window.document.body.appendChild(ce),ce.click(),window.document.body.removeChild(ce),URL.revokeObjectURL(ie)}catch(B){Oe.error(B.message)}};return w.useImperativeHandle(i,()=>({openEdit:()=>{$||(f(Ar(_)),g(kr(k)),l(!0))},closeEdit:()=>{l(!1)},confirmEdit:()=>{U()},addNode:A=>{c&&f(B=>B.concat(ec(A)))},openNode:A=>{c||z(A)},setDecisionGraph:E})),q("div",{className:ge(["tab-content",t]),children:[y("input",{hidden:!0,accept:"application/json",type:"file",ref:u,onChange:K,onClick:A=>{A.target.value=null}}),q("div",{className:"grl-dg__command-bar",children:[!c&&q(Se,{children:[y(Uc,{title:"Edit graph mode allows you to add, connect and move nodes.",children:y(Ne,{type:"default",size:"small",disabled:$,onClick:()=>{f(Ar(_)),g(kr(k)),l(!0)},icon:y(Lu,{}),children:"Edit graph"})}),!r&&y(Ne,{type:"default",size:"small",onClick:()=>{X("graph")},icon:y(su,{}),children:"Export JSON"}),!r&&y(Ne,{type:"default",size:"small",disabled:$,onClick:()=>{var A,B;(B=(A=u==null?void 0:u.current)==null?void 0:A.click)==null||B.call(A)},icon:y(au,{}),children:"Import JSON"})]}),c&&y(Ne,{type:"default",size:"small",onClick:()=>{U()},icon:y(qc,{}),children:"Apply changes"}),c&&y(Ne,{type:"default",color:"secondary",size:"small",onClick:()=>{l(!1)},icon:y(Qn,{}),children:"Revert"})]}),q("div",{className:"content-wrapper",children:[y("div",{className:ge(["react-flow"]),ref:o,children:q(Xa,{nodesConnectable:c,nodesDraggable:c,elevateEdgesOnSelect:c,elevateNodesOnSelect:c,zoomOnDoubleClick:!1,nodes:c?d:Ar(_||[]),edges:c?p:kr(k||[]),onInit:A=>a(A),snapToGrid:!0,snapGrid:[10,10],nodeTypes:c?G:T,edgeTypes:N,onDrop:A=>c?S(A):void 0,onDragOver:c?I:void 0,onConnect:O,proOptions:e,onNodesChange:A=>{c&&h(A)},onEdgesChange:A=>{c&&b(A)},onNodesDelete:A=>{c&&A.forEach(B=>{P==null||P(B==null?void 0:B.id)})},onEdgesDelete:()=>{},onEdgeClick:()=>{},children:[y(Nm,{showInteractive:!1}),y(km,{color:"var(--grl-color-border)",gap:20})]})}),c&&q("div",{className:"grl-dg__aside",children:[!(x!=null&&x.length)&&!(C!=null&&C.length)&&y(Zr,{inputDisabled:m.length>0,onPaste:async()=>{if(c)try{await M.pasteNodes()}catch(A){Oe.error(A==null?void 0:A.message)}}}),(x==null?void 0:x.length)===1&&(C==null?void 0:C.length)===0&&y(Qr,{node:x==null?void 0:x[0],onChange:D,onClose:()=>{f(A=>A.map(B=>({...B,selected:!1})))},onCopy:async()=>{await M.copyNodes(x),Oe.success("Copied to clipboard!")},removeNode:A=>{g(B=>B.filter(W=>(W==null?void 0:W.target)!==(A==null?void 0:A.id)&&(W==null?void 0:W.source)!==(A==null?void 0:A.id))),f(B=>B.filter(W=>(W==null?void 0:W.id)!==(A==null?void 0:A.id)))}}),((x==null?void 0:x.length)>1||(C==null?void 0:C.length)>0)&&y(Jr,{edges:C,nodes:x,onCopy:async A=>{await M.copyNodes(A),Oe.success("Copied to clipboard!")},removeNodes:A=>{const B=A.map(W=>W.id);g(W=>W.filter(j=>!B.includes(j==null?void 0:j.target)&&!B.includes(j==null?void 0:j.source))),f(W=>W.filter(j=>!B.includes(j==null?void 0:j.id)))},removeEdges:A=>{const B=A.map(W=>W.id);g(W=>W.filter(j=>!B.includes(j==null?void 0:j.id)))},onClose:()=>{f(A=>A.map(B=>({...B,selected:!1}))),g(A=>A.map(B=>({...B,selected:!1})))}})]})]})]})});try{ni.displayName="Graph",ni.__docgenInfo={description:"",displayName:"Graph",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},hideExportImport:{defaultValue:null,description:"",name:"hideExportImport",required:!1,type:{name:"boolean"}},onDisableTabs:{defaultValue:null,description:"",name:"onDisableTabs",required:!1,type:{name:"((val: boolean) => void)"}},reactFlowProOptions:{defaultValue:null,description:"",name:"reactFlowProOptions",required:!1,type:{name:"ProOptions"}}}}}catch{}const ri=({disabled:e,onTabChange:t})=>{const{activeNode:n,openNodes:r,openTab:i,closeTab:o}=Ie(({decisionGraph:s,openTab:a,closeTab:u,activeTab:c,openTabs:l})=>({activeNode:((s==null?void 0:s.nodes)??[]).find(d=>d.id===c),openNodes:((s==null?void 0:s.nodes)??[]).filter(d=>l.includes(d.id)),openTab:a,closeTab:u}),$e);return w.useEffect(()=>{t==null||t((n==null?void 0:n.id)||"graph")},[n]),y(cu,{hideAdd:!0,type:"editable-card",size:"small",className:"tabs",activeKey:(n==null?void 0:n.id)||"graph",onEdit:(s,a)=>{a==="remove"&&o(s)},onChange:s=>i(s),items:[{closable:!1,label:"Graph",key:"graph"},...r.map(s=>({disabled:e,key:s.id,label:(s==null?void 0:s.name)??(s==null?void 0:s.type),closable:!0}))]})};try{ri.displayName="GraphTabs",ri.__docgenInfo={description:"",displayName:"GraphTabs",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},onTabChange:{defaultValue:null,description:"",name:"onTabChange",required:!1,type:{name:"((val: string) => void)"}}}}}catch{}const ii=({id:e,manager:t})=>{var u,c,l;const{node:n,nodeTrace:r,updateNode:i,disabled:o,configurable:s}=Ie(({decisionGraph:d,simulate:f,updateNode:h,disabled:p,configurable:g})=>{var b,m;return{node:((d==null?void 0:d.nodes)??[]).find(x=>x.id===e),nodeTrace:(m=(b=f==null?void 0:f.result)==null?void 0:b.trace)==null?void 0:m[e],updateNode:h,disabled:p,configurable:g}},$e),a=(r==null?void 0:r.traceData)!==void 0?Array.isArray(r==null?void 0:r.traceData)?(u=r==null?void 0:r.traceData)==null?void 0:u.map(d=>{var f;return(f=d==null?void 0:d.rule)==null?void 0:f._id}):[(l=(c=r==null?void 0:r.traceData)==null?void 0:c.rule)==null?void 0:l._id]:[];return n?y(uu,{tableHeight:"100%",value:n==null?void 0:n.content,onChange:d=>i(e,d),manager:t,disabled:o,configurable:s,activeRules:(a||[]).filter(d=>!!d)}):null};try{ii.displayName="TabDecisionTable",ii.__docgenInfo={description:"",displayName:"TabDecisionTable",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},manager:{defaultValue:null,description:"",name:"manager",required:!1,type:{name:"DragDropManager"}}}}}catch{}const oi=({id:e,manager:t})=>{var s;const{node:n,updateNode:r,disabled:i,configurable:o}=Ie(({decisionGraph:a,updateNode:u,disabled:c,configurable:l})=>({node:((a==null?void 0:a.nodes)??[]).find(d=>d.id===e),updateNode:u,disabled:c,configurable:l}),$e);return n?y("div",{style:{maxWidth:900,height:"100%",overflowY:"auto",boxSizing:"border-box",paddingBottom:"1.5rem"},children:y(lu,{value:(s=n==null?void 0:n.content)==null?void 0:s.expressions,onChange:a=>r(e,{expressions:a}),disabled:i,configurable:o,manager:t})}):null};try{oi.displayName="TabExpression",oi.__docgenInfo={description:"",displayName:"TabExpression",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},manager:{defaultValue:null,description:"",name:"manager",required:!1,type:{name:"DragDropManager"}}}}}catch{}const Rm=Jn.lazy(async()=>({default:(await du(()=>import("./index-f27a2a26.js"),["./index-f27a2a26.js","./function-cd9d6b90.js","./index-f9942fbd.js","./index-f15177ee.js","./_commonjsHelpers-de833af9.js","./extends-0ea0fc03.js","./stack-efa65be7.js","./index-b7949e8c.js","./libs-5f276d5d.js","./function-460cfaaf.css"],import.meta.url)).Function})),si=({id:e})=>{const{node:t,nodeTrace:n,updateNode:r,disabled:i}=Ie(({decisionGraph:o,simulate:s,updateNode:a,disabled:u})=>{var c,l;return{node:((o==null?void 0:o.nodes)??[]).find(d=>d.id===e),nodeTrace:(l=(c=s==null?void 0:s.result)==null?void 0:c.trace)==null?void 0:l[e],updateNode:a,disabled:u}},$e);return t?y(w.Suspense,{fallback:y(ru,{}),children:y(Rm,{value:typeof(t==null?void 0:t.content)=="string"?t==null?void 0:t.content:"",onChange:o=>r(e,o),disabled:i,trace:n})}):null};try{si.displayName="TabFunction",si.__docgenInfo={description:"",displayName:"TabFunction",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}}}}}catch{}const ai=w.forwardRef(({reactFlowProOptions:e,hideExportImport:t},n)=>{const r=w.useRef(null),{activeNode:i,openNodes:o,onTabChange:s}=Ie(({decisionGraph:l,activeTab:d,openTabs:f,onTabChange:h})=>({onTabChange:h,activeNode:((l==null?void 0:l.nodes)??[]).find(p=>p.id===d),openNodes:((l==null?void 0:l.nodes)??[]).filter(p=>f.includes(p.id))}),$e),[a,u]=w.useState(!1),c=w.useMemo(()=>Qc(eu,void 0,{rootElement:r.current}),[r.current]);return y("div",{className:"grl-dg__wrapper",children:q("div",{className:"grl-dg__graph",children:[y(ri,{disabled:a,onTabChange:s}),y(ni,{ref:n,className:ge([!i&&"active"]),hideExportImport:t,reactFlowProOptions:e,onDisableTabs:u}),y("div",{style:{display:"contents"},ref:r,children:o.map(l=>q("div",{className:ge(["tab-content",(i==null?void 0:i.id)===(l==null?void 0:l.id)&&"active"]),children:[(l==null?void 0:l.type)==="decisionTableNode"&&y(ii,{id:l.id,manager:c}),(l==null?void 0:l.type)==="expressionNode"&&y(oi,{id:l.id,manager:c}),(l==null?void 0:l.type)==="functionNode"&&y(si,{id:l.id})]},l==null?void 0:l.id))})]})})});try{ai.displayName="DecisionGraphWrapper",ai.__docgenInfo={description:"",displayName:"DecisionGraphWrapper",props:{reactFlowProOptions:{defaultValue:null,description:"",name:"reactFlowProOptions",required:!1,type:{name:"ProOptions"}},hideExportImport:{defaultValue:null,description:"",name:"hideExportImport",required:!1,type:{name:"boolean"}}}}}catch{}const Ho=w.forwardRef(({manager:e,reactFlowProOptions:t,hideExportImport:n,...r},i)=>y("div",{className:"grl-dg",children:q(Mr,{children:[y(ai,{reactFlowProOptions:t,hideExportImport:n,ref:i}),y(Tr,{...r})]})}));try{Ho.displayName="DecisionGraph",Ho.__docgenInfo={description:"",displayName:"DecisionGraph",props:{manager:{defaultValue:null,description:"",name:"manager",required:!1,type:{name:"DragDropManager"}},reactFlowProOptions:{defaultValue:null,description:"",name:"reactFlowProOptions",required:!1,type:{name:"ProOptions"}},hideExportImport:{defaultValue:null,description:"",name:"hideExportImport",required:!1,type:{name:"boolean"}},id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"DecisionGraphType"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"DecisionGraphType"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},configurable:{defaultValue:null,description:"",name:"configurable",required:!1,type:{name:"boolean"}},simulate:{defaultValue:null,description:"",name:"simulate",required:!1,type:{name:"any"}},components:{defaultValue:null,description:"",name:"components",required:!1,type:{name:"CustomNodeType[]"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((val: DecisionGraphType) => void)"}},onAddNode:{defaultValue:null,description:"",name:"onAddNode",required:!1,type:{name:"((type: string, position?: XYPosition) => void)"}},onOpenNode:{defaultValue:null,description:"",name:"onOpenNode",required:!1,type:{name:"((node: DecisionNode) => void)"}},onTabChange:{defaultValue:null,description:"",name:"onTabChange",required:!1,type:{name:"((tab?: string) => void)"}},onEditGraph:{defaultValue:null,description:"",name:"onEditGraph",required:!1,type:{name:"((edit: boolean) => void)"}}}}}catch{}export{gu as A,Ho as D};
//# sourceMappingURL=dg-d577b223.js.map
